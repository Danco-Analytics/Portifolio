<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daniel Wanjala - Portfolio | Data Scientist | ML Engineer | Innovator</title>
    <link rel="icon" href="https://placehold.co/32x32/5c6ac4/FFFFFF?text=DW" type="image/png">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide-react@latest/dist/umd/lucide.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script>
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script src="https://unpkg.com/typed.js@2.0.16/dist/typed.umd.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">


    <style>
        /* --- Theme Variables --- */
        :root {
            /* Light Theme (Default) */
            --bg-primary: #f8faff; /* Even lighter blue */
            --bg-secondary: #ffffff;
            --bg-accent: #eef2ff; /* Indigo accent */
            --bg-glass: rgba(255, 255, 255, 0.75);
            --text-primary: #1f2937; /* Dark Gray */
            --text-secondary: #4b5563; /* Medium Gray */
            --text-accent: #4f46e5; /* Indigo */
            --text-accent-hover: #4338ca; /* Darker Indigo */
            --text-heading: #111827; /* Darkest Gray */
            --border-color: rgba(0, 0, 0, 0.07); /* Softer border */
            --gradient-start: #4f46e5; /* Indigo */
            --gradient-mid: #7c3aed; /* Purple */
            --gradient-end: #db2777; /* Pink */
            --shadow-color: rgba(79, 70, 229, 0.1); /* Indigo shadow */
            --shadow-color-hover: rgba(79, 70, 229, 0.18);
            --hero-overlay-bg: rgba(248, 250, 255, 0.9); /* Lighter overlay */
            --scrollbar-thumb: #c7d2fe; /* Lighter Indigo scrollbar */
            --scrollbar-track: transparent;
            --loader-bg: var(--bg-primary);
            --loader-color: var(--text-accent);
            --loader-logo-filter: none;
            /* Chat specific */
            --chat-widget-bg: rgba(255, 255, 255, 0.97);
            --chat-header-bg: rgba(238, 242, 255, 0.95); /* Light accent */
            --chat-body-color: var(--text-primary);
            --chat-input-area-bg: rgba(249, 250, 251, 0.95);
            --chat-input-bg: #ffffff;
            --chat-input-border: #d1d5db;
            --chat-input-text: var(--text-primary);
            --chat-send-btn-bg: var(--text-accent);
            --chat-send-btn-text: #ffffff;
            --chat-send-btn-hover-bg: var(--text-accent-hover);
            --chat-control-icon-color: var(--text-secondary);
            --chat-control-icon-hover-color: var(--text-primary);
            --chat-user-msg-bg: rgba(224, 231, 255, 0.9); /* Lighter user msg */
            --chat-ai-msg-bg: rgba(243, 244, 246, 0.9);
            --chat-typing-dot: var(--text-secondary);
        }

        .dark-mode {
            /* Dark Theme */
            --bg-primary: #111827; /* Darkest Gray */
            --bg-secondary: #1f2937; /* Dark Gray */
            --bg-accent: #374151; /* Medium Dark Gray */
            --bg-glass: rgba(31, 41, 55, 0.75);
            --text-primary: #e5e7eb; /* Light Gray */
            --text-secondary: #9ca3af; /* Medium Gray */
            --text-accent: #818cf8; /* Lighter Indigo */
            --text-accent-hover: #a7affb; /* Even lighter Indigo */
            --text-heading: #ffffff;
            --border-color: rgba(255, 255, 255, 0.12); /* Lighter border */
            --gradient-start: #818cf8; /* Lighter Indigo */
            --gradient-mid: #a78bfa; /* Lighter Purple */
            --gradient-end: #f472b6; /* Lighter Pink */
            --shadow-color: rgba(129, 140, 248, 0.1); /* Lighter Indigo shadow */
            --shadow-color-hover: rgba(129, 140, 248, 0.18);
            --hero-overlay-bg: rgba(17, 24, 39, 0.9); /* Darker overlay */
            --scrollbar-thumb: #4b5563; /* Darker scrollbar */
            --scrollbar-track: transparent;
            --loader-bg: var(--bg-primary);
            --loader-color: var(--text-accent);
            --loader-logo-filter: brightness(0) invert(1);
            /* Chat specific */
            --chat-widget-bg: rgba(31, 41, 55, 0.97);
            --chat-header-bg: rgba(55, 65, 81, 0.95); /* Dark accent */
            --chat-body-color: var(--text-primary);
            --chat-input-area-bg: rgba(17, 24, 39, 0.95);
            --chat-input-bg: #374151;
            --chat-input-border: #4b5563;
            --chat-input-text: var(--text-primary);
            --chat-send-btn-bg: var(--text-accent);
            --chat-send-btn-text: #111827; /* Dark text on light accent */
            --chat-send-btn-hover-bg: var(--text-accent-hover);
            --chat-control-icon-color: var(--text-secondary);
            --chat-control-icon-hover-color: var(--text-primary);
            --chat-user-msg-bg: rgba(75, 85, 99, 0.9); /* Darker user msg */
            --chat-ai-msg-bg: rgba(55, 65, 81, 0.9);
            --chat-typing-dot: var(--text-secondary);
        }

        /* --- Base & General Styles --- */
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            overflow-x: hidden;
            transition: background-color 0.4s ease, color 0.4s ease;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Space Grotesk', sans-serif;
            color: var(--text-heading);
            transition: color 0.4s ease;
        }

        .gradient-text {
            background: linear-gradient(90deg, var(--gradient-start), var(--gradient-mid), var(--gradient-end));
            -webkit-background-clip: text; background-clip: text; color: transparent;
            animation: gradient-flow 8s ease infinite; /* Subtle gradient animation */
            background-size: 200% auto;
        }
        @keyframes gradient-flow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }


        /* --- Loading Overlay --- */
        #loading-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: var(--loader-bg);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 10000;
            opacity: 1;
            transition: opacity 0.8s ease-out 0.4s; /* Slower fade out */
            pointer-events: auto;
        }
        #loading-overlay.hidden { opacity: 0; pointer-events: none; }
        .loader-logo { height: 60px; width: auto; margin-bottom: 25px; filter: var(--loader-logo-filter); animation: pulse 2s infinite ease-in-out; }
        .loader-spinner { border: 4px solid rgba(128, 128, 128, 0.2); border-left-color: var(--loader-color); border-radius: 50%; width: 40px; height: 40px; animation: spin 1.2s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        @keyframes pulse { 0%, 100% { opacity: 0.8; transform: scale(1); } 50% { opacity: 1; transform: scale(1.05); } }


        /* --- Navigation --- */
        #main-header {
            transition: background-color 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
            background: transparent;
            border-bottom: 1px solid transparent;
        }
        #main-header.scrolled {
            background: var(--bg-glass);
            -webkit-backdrop-filter: blur(16px); /* Increased blur */
            backdrop-filter: blur(16px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06); /* Softer, wider shadow */
            border-bottom: 1px solid var(--border-color);
        }
        .nav-link {
            color: var(--text-secondary);
            transition: color 0.3s ease, border-bottom-color 0.3s ease;
            padding: 0.5rem 0.75rem;
            font-size: 0.9rem;
            font-weight: 500;
            position: relative;
            border-bottom: 2px solid transparent;
            margin: 0 0.25rem; /* Add slight horizontal margin */
        }
        .nav-link::after { content: ''; display: block; width: 0; height: 2px; background: var(--text-accent); transition: width .3s ease-out; position: absolute; bottom: -2px; left: 0; transform-origin: left; border-radius: 1px; }
        .nav-link:hover::after, .nav-link.active::after { width: 100%; }
        .nav-link:hover, .nav-link.active { color: var(--text-heading); }
        #mobile-menu { background-color: var(--bg-secondary); border-top: 1px solid var(--border-color); }
        .nav-link-mobile { color: var(--text-primary); display: block; padding: 0.8rem 1.5rem; transition: background-color 0.2s ease, color 0.2s ease; font-weight: 500; border-left: 3px solid transparent; }
        .nav-link-mobile:hover, .nav-link-mobile.active { background-color: var(--bg-accent); color: var(--text-accent); border-left-color: var(--text-accent); }


        /* --- Buttons --- */
        .cta-button {
            background: linear-gradient(95deg, var(--gradient-start), var(--gradient-mid));
            color: white;
            padding: 0.8rem 2rem;
            border-radius: 9999px;
            font-weight: 600;
            transition: all 0.35s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: 0 6px 20px var(--shadow-color);
            display: inline-flex; /* Use flex for icon alignment */
            align-items: center;
            justify-content: center;
            text-align: center;
            border: none; cursor: pointer;
            letter-spacing: 0.025em;
            position: relative; /* For potential pseudo-elements */
            overflow: hidden; /* For ripple effects if added */
        }
        .cta-button:hover {
            transform: translateY(-4px) scale(1.03); /* Slightly less scale */
            box-shadow: 0 12px 35px var(--shadow-color-hover);
        }
        .cta-button-secondary {
             background-color: transparent;
             border: 2px solid var(--text-accent);
             color: var(--text-accent);
             padding: 0.7rem 1.8rem; /* Slightly more padding */
             border-radius: 9999px;
             font-weight: 600;
             transition: all 0.3s ease;
             display: inline-flex; /* Use flex for icon alignment */
             align-items: center;
             justify-content: center;
             text-align: center;
             letter-spacing: 0.025em;
        }
        .cta-button-secondary:hover {
            background-color: var(--text-accent);
            color: var(--bg-secondary);
            transform: translateY(-3px);
            box-shadow: 0 6px 15px var(--shadow-color);
        }
        /* Button icon transition */
        .cta-button i, .cta-button-secondary i { transition: transform 0.3s ease; }
        .cta-button:hover i, .cta-button-secondary:hover i { transform: translateX(3px); }

        /* --- General Layout & Spacing --- */
        section {
            scroll-margin-top: 80px; /* Adjust based on fixed header height */
            padding-top: 6rem; padding-bottom: 6rem; /* Slightly reduced padding */
        }
        .container { max-width: 1200px; } /* Slightly wider container */

        /* --- Particle canvas --- */
        #particles-js { position: absolute; width: 100%; height: 100%; top: 0; left: 0; z-index: 0; background-color: var(--bg-primary); /* Ensure bg matches */ transition: background-color 0.4s ease; }
        .content-above { position: relative; z-index: 1; }

        /* --- Section Transitions --- */
        .section-container {
            opacity: 0;
            transform: translateY(40px) scale(0.99); /* Start slightly down and smaller */
            transition: opacity 0.9s cubic-bezier(0.165, 0.84, 0.44, 1), transform 0.9s cubic-bezier(0.165, 0.84, 0.44, 1);
            will-change: opacity, transform;
        }
        .section-container.visible { opacity: 1; transform: translateY(0) scale(1); }

        /* --- Cards --- */
        .card-base {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 1rem; /* 16px */
            padding: 1.75rem; /* p-7 */
            box-shadow: 0 5px 15px rgba(0,0,0,0.03); /* Softer base shadow */
            transition: transform 0.35s ease, box-shadow 0.35s ease, border-color 0.35s ease, background-color 0.4s ease;
        }
        .card-hover:hover {
            transform: translateY(-8px); /* More lift */
            box-shadow: 0 18px 35px var(--shadow-color); /* Enhanced shadow */
            border-color: var(--text-accent);
        }

        /* --- Project Card Specific --- */
        .project-card { height: 100%; display: flex; flex-direction: column; }
        .project-card img { aspect-ratio: 16 / 9; object-fit: cover; border-radius: 0.75rem; margin-bottom: 1.25rem; border: 1px solid var(--border-color); transition: transform 0.4s ease, filter 0.4s ease; filter: saturate(0.9) brightness(1); }
        .project-card:hover img { transform: scale(1.04); filter: saturate(1.1) brightness(1.02); }
        .project-card .flex-grow { flex-grow: 1; }
        .project-card .mt-auto { margin-top: auto; }

        /* --- Timeline --- */
        .timeline { position: relative; padding: 2rem 0; margin-left: 30px; } /* Increased margin */
        .timeline::before { content: ''; position: absolute; top: 0; left: 0px; height: 100%; width: 4px; border-radius: 2px; background: linear-gradient(to bottom, var(--text-accent), color-mix(in srgb, var(--text-accent) 15%, transparent)); opacity: 0.6; transition: opacity 0.4s ease; } /* Gradient line */
        .timeline-item { margin-bottom: 3rem; position: relative; padding-left: 50px; } /* Increased padding */
        .timeline-dot { position: absolute; left: 0; top: 8px; transform: translateX(-50%) translateX(2px); width: 22px; height: 22px; border-radius: 50%; border: 5px solid var(--bg-primary); background-color: var(--text-accent); transition: all 0.35s ease; box-shadow: 0 0 0 5px color-mix(in srgb, var(--text-accent) 20%, transparent); }
        .timeline-item:hover .timeline-dot { transform: translateX(-50%) translateX(2px) scale(1.2); box-shadow: 0 0 25px color-mix(in srgb, var(--text-accent) 35%, transparent); background-color: var(--text-accent-hover); }
        .timeline-content { padding: 1.5rem; border-radius: 0.75rem; transition: box-shadow 0.35s ease, transform 0.35s ease, background-color 0.4s ease, border-color 0.4s ease; border: 1px solid var(--border-color); background-color: var(--bg-secondary); }
        .timeline-item:hover .timeline-content { box-shadow: 0 12px 35px rgba(0,0,0,0.06); transform: translateX(10px) rotate(-0.75deg); border-color: color-mix(in srgb, var(--text-accent) 30%, transparent); }

        /* --- Lottie Player --- */
        lottie-player { width: 100%; max-width: 180px; height: auto; margin: 1rem auto; }
        .lottie-placeholder-container { display: flex; justify-content: center; align-items: center; min-height: 180px; }

        /* --- WebGL/AR Placeholders --- */
        .tech-placeholder {
            background-color: var(--bg-accent); border: 1px dashed var(--border-color);
            border-radius: 0.75rem; padding: 2rem 1rem; min-height: 200px; /* Reduced height */
            display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center;
            color: var(--text-secondary); transition: background-color 0.4s ease, border-color 0.4s ease, color 0.4s ease, transform 0.3s ease;
        }
         .tech-placeholder:hover { transform: scale(1.02); background-color: color-mix(in srgb, var(--bg-accent) 95%, black); }
        .tech-placeholder i { font-size: 2.2rem; margin-bottom: 0.75rem; opacity: 0.6; color: var(--text-accent); transition: transform 0.3s ease; }
        .tech-placeholder:hover i { transform: scale(1.1) rotate(5deg); }
        .tech-placeholder p { font-size: 0.8rem; max-width: 350px; line-height: 1.5; }
        .tech-placeholder .tech-label { font-weight: 600; color: var(--text-heading); margin-top: 0.5rem; font-size: 0.75rem; opacity: 0.8; }

        /* --- AI Chat Widget --- */
        #ai-chat-widget {
            position: fixed; bottom: 25px; right: 25px; width: 360px; /* Wider */
            max-height: calc(100vh - 100px);
            border-radius: 1rem; /* More rounded */
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15); /* Enhanced shadow */
            z-index: 1000; display: flex; flex-direction: column; overflow: hidden;
            opacity: 0; transform: translateY(25px) scale(0.95);
            transition: all 0.45s cubic-bezier(0.165, 0.84, 0.44, 1); /* Smoother transition */
            background-color: var(--chat-widget-bg);
            border: 1px solid var(--border-color);
            backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
        }
        #ai-chat-widget.visible { opacity: 1; transform: translateY(0) scale(1); }
        #ai-chat-widget.minimized { height: 55px; width: 230px; bottom: 20px; right: 20px; cursor: pointer; overflow: hidden; }
        #ai-chat-widget.minimized #ai-chat-body,
        #ai-chat-widget.minimized #ai-chat-input-area,
        #ai-chat-widget.minimized #ai-typing-indicator { display: none; } /* Hide typing indicator when minimized */
        #ai-chat-widget.minimized #ai-chat-header { cursor: pointer; }
        #ai-chat-header {
            padding: 0.8rem 1.1rem; font-weight: 600;
            display: flex; justify-content: space-between; align-items: center;
            cursor: grab; border-bottom: 1px solid var(--border-color);
            background-color: var(--chat-header-bg); color: var(--text-heading);
            transition: background-color 0.4s ease, border-color 0.4s ease, color 0.4s ease;
        }
        #ai-chat-header:active { cursor: grabbing; }
        #ai-chat-body {
            flex-grow: 1; padding: 1.1rem; overflow-y: auto; font-size: 0.9rem;
            color: var(--chat-body-color); scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);
            min-height: 200px; /* Increased min height */
            transition: color 0.4s ease;
            display: flex; /* Use flexbox for message alignment */
            flex-direction: column; /* Stack messages vertically */
        }
        #ai-chat-body p { margin-bottom: 0.8rem; line-height: 1.55; max-width: 85%; /* Slightly narrower */ padding: 0.65rem 0.9rem; border-radius: 1rem; word-wrap: break-word; }
        #ai-chat-body .user-message { align-self: flex-end; background-color: var(--chat-user-msg-bg); border-bottom-right-radius: 0.25rem; transition: background-color 0.4s ease; }
        #ai-chat-body .ai-message { align-self: flex-start; background-color: var(--chat-ai-msg-bg); border-bottom-left-radius: 0.25rem; transition: background-color 0.4s ease; }
        /* Typing Indicator */
        #ai-typing-indicator { display: none; align-self: flex-start; margin: 0.5rem 0; padding: 0.65rem 0.9rem; }
        #ai-typing-indicator span { display: inline-block; width: 8px; height: 8px; margin: 0 2px; background-color: var(--chat-typing-dot); border-radius: 50%; animation: typing-bounce 1.4s infinite ease-in-out both; }
        #ai-typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
        #ai-typing-indicator span:nth-child(2) { animation-delay: -0.16s; }
        @keyframes typing-bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1.0); } }

        #ai-chat-input-area {
            border-top: 1px solid var(--border-color); padding: 0.8rem; display: flex; align-items: center;
            background-color: var(--chat-input-area-bg); transition: background-color 0.4s ease, border-color 0.4s ease;
        }
        #ai-chat-input {
            flex-grow: 1; border: 1px solid var(--chat-input-border); border-radius: 0.5rem; padding: 0.75rem 1rem; /* Increased padding */
            outline: none; margin-right: 0.6rem; background-color: var(--chat-input-bg); color: var(--chat-input-text); font-size: 0.9rem;
            transition: background-color 0.4s ease, border-color 0.4s ease, color 0.4s ease, box-shadow 0.2s ease;
        }
        #ai-chat-input:focus { box-shadow: 0 0 0 3px color-mix(in srgb, var(--text-accent) 25%, transparent); border-color: var(--text-accent); }
        #ai-chat-send-btn, #voice-input-btn {
            border: none; border-radius: 0.5rem; padding: 0.75rem; cursor: pointer;
            transition: background-color 0.2s, transform 0.1s, color 0.4s ease;
            display: flex; justify-content: center; align-items: center;
        }
        #ai-chat-send-btn { background-color: var(--chat-send-btn-bg); color: var(--chat-send-btn-text); padding: 0.75rem 1rem; }
        #ai-chat-send-btn:hover { background-color: var(--chat-send-btn-hover-bg); }
        #ai-chat-send-btn:active, #voice-input-btn:active { transform: scale(0.94); }
        #voice-input-btn { background: none; color: var(--chat-control-icon-color); margin-left: 0.3rem; }
        #voice-input-btn:hover { color: var(--chat-control-icon-hover-color); }
        #ai-chat-controls button { background: none; border: none; cursor: pointer; padding: 0.3rem; transition: color 0.2s, transform 0.2s ease; margin-left: 0.6rem; color: var(--chat-control-icon-color); }
        #ai-chat-controls button:hover { color: var(--chat-control-icon-hover-color); transform: scale(1.15) rotate(5deg); } /* Add slight rotation */

        /* --- Custom Scrollbar --- */
        ::-webkit-scrollbar { width: 10px; height: 10px; }
        ::-webkit-scrollbar-track { background: var(--scrollbar-track); }
        ::-webkit-scrollbar-thumb { background-color: var(--scrollbar-thumb); border-radius: 10px; border: 2px solid var(--bg-primary); transition: background-color 0.4s ease, border-color 0.4s ease; }
        ::-webkit-scrollbar-thumb:hover { background-color: color-mix(in srgb, var(--scrollbar-thumb) 80%, white); }
        .dark-mode ::-webkit-scrollbar-thumb:hover { background-color: color-mix(in srgb, var(--scrollbar-thumb) 80%, black); }
        /* Chat body scrollbar */
        #ai-chat-body::-webkit-scrollbar-thumb { background-color: color-mix(in srgb, var(--scrollbar-thumb) 70%, transparent); border: none; }
        #ai-chat-body::-webkit-scrollbar-track { background: transparent; }


        /* --- Skill Badges --- */
        .skill-badge { transition: all 0.35s ease; transform: scale(1); }
        .skill-badge:hover { transform: scale(1.05); }
        .skill-badge.unlocked { background: linear-gradient(45deg, var(--gradient-start), var(--gradient-mid)) !important; color: white !important; font-weight: bold; box-shadow: 0 0 15px color-mix(in srgb, var(--text-accent) 40%, transparent); }
        .dark-mode .skill-badge.unlocked { color: var(--bg-primary) !important; }

        /* --- Pulsing animation --- */
        .pulsate { animation: pulsate-animation 1.8s infinite ease-in-out; }
        @keyframes pulsate-animation { 0%, 100% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.03); opacity: 0.85; } }

        /* --- Theme Toggle Button Icons --- */
        #theme-toggle i, #theme-toggle-mobile i { transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55); } /* Bounce effect */
        .dark-mode #theme-toggle i, .dark-mode #theme-toggle-mobile i { transform: rotate(180deg); }

        /* --- Footer --- */
        footer { background-color: var(--bg-secondary); border-top: 1px solid var(--border-color); transition: background-color 0.4s ease, border-color 0.4s ease; }

        /* --- Typed.js Cursor --- */
         .typed-cursor { opacity: 1; animation: typedjsBlink 0.7s infinite; color: var(--text-accent); font-weight: bold; }
         @keyframes typedjsBlink { 50% { opacity: 0.0; } }

         /* --- Input Fields --- */
         input[type="text"], input[type="email"], textarea {
            transition: border-color 0.3s ease, box-shadow 0.3s ease, background-color 0.4s ease, color 0.4s ease;
            background-color: var(--bg-accent); /* Use accent bg */
            border: 1px solid var(--border-color);
            color: var(--text-primary);
         }
         input[type="text"]:focus, input[type="email"]:focus, textarea:focus {
             border-color: var(--text-accent);
             box-shadow: 0 0 0 3px color-mix(in srgb, var(--text-accent) 20%, transparent);
             background-color: var(--bg-secondary); /* Change bg on focus */
         }
         ::placeholder { /* Chrome, Firefox, Opera, Safari 10.1+ */
            color: var(--text-secondary);
            opacity: 0.7; /* Firefox */
         }

        /* --- Section Header Lines --- */
        .section-header-line {
            display: inline-block;
            position: relative;
            padding-bottom: 0.5rem;
            margin-bottom: 0.5rem;
        }
        .section-header-line::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 3px;
            background-color: var(--text-accent);
            border-radius: 2px;
            opacity: 0.6;
        }

        /* --- GitHub Feed Placeholder Style --- */
        .github-feed-placeholder {
            background-color: var(--bg-accent);
            border: 1px dashed var(--border-color);
            border-radius: 0.75rem;
            padding: 1.5rem;
            min-height: 150px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            color: var(--text-secondary);
            transition: background-color 0.4s ease, border-color 0.4s ease, color 0.4s ease;
        }
        .github-feed-placeholder i {
            font-size: 2rem;
            margin-bottom: 0.75rem;
            opacity: 0.7;
            color: var(--text-accent);
        }
        .github-feed-placeholder p {
            font-size: 0.8rem;
            max-width: 300px;
            line-height: 1.5;
        }
         .github-feed-placeholder .tech-label {
            font-weight: 600;
            color: var(--text-heading);
            margin-top: 0.5rem;
            font-size: 0.75rem;
            opacity: 0.8;
        }

        /* --- Accessibility Focus Outline --- */
        *:focus-visible {
            outline: 3px solid var(--text-accent);
            outline-offset: 2px;
            box-shadow: 0 0 0 5px color-mix(in srgb, var(--text-accent) 20%, transparent);
            border-radius: 4px; /* Optional: makes outline rounded */
        }
        /* Remove default outline when focus-visible is supported */
        *:focus:not(:focus-visible) {
            outline: none;
        }


    </style>
</head>
<body class="antialiased">

    <div id="loading-overlay">
        <img src="https://placehold.co/120x60/FFFFFF/4f46e5?text=DW" alt="Daniel Wanjala Logo Placeholder" class="loader-logo">
        <div class="loader-spinner"></div>
    </div>

    <aside id="ai-chat-widget" aria-live="polite" aria-atomic="true">
        <div id="ai-chat-header" title="Drag to move (Conceptual)">
            <span class="flex items-center"><i data-lucide="bot" class="h-5 w-5 mr-2"></i>AI Assistant</span>
            <div id="ai-chat-controls">
                <button id="ai-chat-minimize-btn" aria-label="Minimize chat widget" title="Minimize/Maximize Chat">
                    <i data-lucide="minus" class="minimize-icon h-4 w-4"></i>
                    <i data-lucide="square" class="maximize-icon hidden h-4 w-4"></i>
                </button>
                <button id="ai-chat-close-btn" aria-label="Close chat widget" title="Close Chat">
                    <i data-lucide="x" class="h-4 w-4"></i>
                </button>
            </div>
        </div>
        <div id="ai-chat-body" role="log">
            <p class="ai-message">Greetings! I'm your AI guide to Daniel's work. Ask about projects (GDP Model, Plant Detector), skills (Python, ML), or experience!</p>
            <div id="ai-typing-indicator" aria-label="AI is typing">
                <span></span><span></span><span></span>
            </div>
            <div id="ai-recommendation" class="mt-4 p-3 bg-indigo-100 dark:bg-indigo-900/50 rounded-lg border border-indigo-300 dark:border-indigo-700 text-xs text-indigo-700 dark:text-indigo-200 hidden transition-all duration-300">
                 <p class="flex items-start"><i data-lucide="lightbulb" class="inline h-4 w-4 mr-2 flex-shrink-0 mt-0.5"></i> <span id="recommendation-text">Recommendation placeholder...</span></p>
            </div>
        </div>
        <div id="ai-chat-input-area">
            <input type="text" id="ai-chat-input" placeholder="Ask me anything..." aria-label="Chat input">
             <button id="voice-input-btn" title="Use Voice Input (Conceptual - Requires Web Speech API)" aria-label="Use voice input (Conceptual)">
                <i data-lucide="mic" class="h-5 w-5"></i>
            </button>
            <button id="ai-chat-send-btn" aria-label="Send chat message">
                <i data-lucide="send" class="h-5 w-5"></i>
            </button>
        </div>
    </aside>

    <header id="main-header" class="fixed top-0 left-0 right-0 z-50">
        <nav class="container mx-auto px-6 py-3 flex justify-between items-center">
            <a href="#home" class="flex items-center space-x-2 flex-shrink-0" aria-label="Daniel Wanjala - Home">
                 <img src="https://placehold.co/80x40/FFFFFF/4f46e5?text=DW" alt="Daniel Wanjala Logo Placeholder" class="h-8 md:h-10 w-auto rounded">
                 <span class="text-xl font-bold text-heading font-space-grotesk hidden sm:inline">Daniel Wanjala</span>
            </a>
            <div class="hidden lg:flex space-x-1 items-center flex-wrap">
                <a href="#about" class="nav-link">About</a>
                <a href="#experience" class="nav-link">Experience</a>
                <a href="#skills" class="nav-link">Skills</a>
                <a href="#projects" class="nav-link">Projects</a>
                <a href="#education" class="nav-link">Education</a>
                <a href="#certifications" class="nav-link">Certifications</a>
                <a href="#blog" class="nav-link">Blog</a>
                <a href="#contact" class="nav-link">Contact</a>
                <button id="theme-toggle" title="Toggle Theme" aria-label="Toggle color theme" class="ml-4 p-2 rounded-full text-secondary hover:text-accent focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent transition-colors duration-200">
                    <i class="fas fa-moon text-lg"></i> </button>
            </div>
            <div class="lg:hidden flex items-center">
                 <button id="theme-toggle-mobile" title="Toggle Theme" aria-label="Toggle color theme" class="p-2 rounded-full text-secondary hover:text-accent focus:outline-none transition-colors duration-200 mr-2">
                    <i class="fas fa-moon text-xl"></i> </button>
                <button id="mobile-menu-button" class="text-secondary hover:text-heading focus:outline-none" aria-label="Open mobile menu" aria-expanded="false" aria-controls="mobile-menu">
                    <i data-lucide="menu" class="h-7 w-7"></i>
                </button>
            </div>
        </nav>
        <div id="mobile-menu" class="lg:hidden hidden absolute top-full left-0 right-0 shadow-lg border-t border-color py-2 bg-bg-secondary">
            <a href="#about" class="nav-link-mobile">About</a>
            <a href="#experience" class="nav-link-mobile">Experience</a>
            <a href="#skills" class="nav-link-mobile">Skills</a>
            <a href="#projects" class="nav-link-mobile">Projects</a>
            <a href="#education" class="nav-link-mobile">Education</a>
            <a href="#certifications" class="nav-link-mobile">Certifications</a>
            <a href="#blog" class="nav-link-mobile">Blog</a>
            <a href="#contact" class="nav-link-mobile">Contact</a>
        </div>
    </header>

    <section id="home" class="relative min-h-screen flex items-center justify-center text-center overflow-hidden pt-24 md:pt-0">
        <div id="particles-js"></div>
        <div class="content-above container mx-auto px-6 z-10">
             <div class="hero-content bg-hero-overlay-bg p-8 md:p-12 rounded-xl shadow-xl max-w-4xl mx-auto section-container visible backdrop-blur-sm">
                <h1 class="text-5xl md:text-7xl font-bold mb-4 leading-tight gradient-text">
                    Daniel Wanjala
                </h1>
                <p class="text-xl md:text-3xl text-heading mb-8 font-medium">
                    <span id="typed-subtitle"></span>
                </p>
                <p class="text-md md:text-lg text-secondary max-w-3xl mx-auto mb-10 leading-relaxed">
                    Welcome to a showcase of innovation where data meets design. I engineer intelligent solutions, transform complex datasets into strategic assets, and drive technological progress. Rooted in Ruiru, Kenya, my focus is on creating measurable impact through cutting-edge IT strategies and sophisticated machine learning applications.
                </p>
                <div class="flex flex-col sm:flex-row justify-center gap-4 mt-8">
                    <a href="#projects" class="cta-button">
                        Discover My Work <i data-lucide="arrow-right" class="inline-block ml-2 h-4 w-4"></i>
                    </a>
                    <a href="#contact" class="cta-button-secondary">
                        Get In Touch <i data-lucide="mail" class="inline-block ml-2 h-4 w-4"></i>
                    </a>
                </div>
                 <p id="welcome-back-message" class="mt-6 text-sm text-accent font-medium"></p>
                 <div id="user-progress-bar" class="w-1/2 max-w-xs h-2 bg-gray-300 dark:bg-gray-700 rounded-full mx-auto mt-4 hidden">
                     <div id="user-progress" class="h-full bg-gradient-to-r from-gradient-start to-gradient-mid rounded-full transition-all duration-500 ease-out" style="width: 0%;"></div>
                 </div>
                 <p id="user-progress-text" class="text-xs text-secondary mt-1"></p>
            </div>
        </div>
         <div class="absolute bottom-10 left-1/2 transform -translate-x-1/2 content-above z-10">
             <a href="#about" aria-label="Scroll down to about section">
                <i data-lucide="arrow-down-circle" class="text-secondary hover:text-accent transition-colors animate-bounce h-10 w-10 cursor-pointer"></i>
            </a>
        </div>
    </section>

    <section id="about" class="bg-bg-secondary section-container" data-section-name="About">
        <div class="container mx-auto px-6">
             <div class="text-center mb-16">
                 <span class="section-header-line text-accent font-semibold">Chapter I</span>
                <h2 class="section-header-title text-4xl md:text-5xl font-bold text-heading mt-2">The Narrative Arc</h2>
                <p class="section-header-subtitle text-lg text-secondary leading-relaxed mt-4 max-w-3xl mx-auto">
                    Blending Technology & Impact: From rigorous academic training to real-world applications improving Kenyan healthcare and public sector digital infrastructure.
                </p>
            </div>

            <div class="flex flex-col lg:flex-row items-center gap-12 lg:gap-16">
                <div class="lg:w-1/3 text-center flex-shrink-0">
                    <img src="https://placehold.co/256x256/E0E7FF/4F46E5?text=DW" alt="Daniel Wanjala Profile Picture Placeholder" class="rounded-full shadow-xl border-4 border-accent/50 mx-auto w-48 h-48 md:w-64 md:h-64 object-cover mb-6 hover:scale-105 transition-transform duration-300">
                    <p class="text-center text-md font-medium text-heading">Daniel Wanjala</p>
                    <p class="text-center text-sm text-secondary">Data Scientist & Innovator | Ruiru, Kenya</p>
                    <div class="lottie-placeholder-container mt-6">
                        <lottie-player src="https://assets10.lottiefiles.com/packages/lf20_qp1q7mct.json" background="transparent" speed="1" style="width: 150px; height: 150px;" loop autoplay aria-label="Data Analysis Animation"></lottie-player>
                    </div>
                </div>

                <div class="lg:w-2/3 space-y-8">
                    <div class="card-base card-hover">
                        <h3 class="text-2xl font-semibold mb-3 text-accent flex items-center">
                            <i data-lucide="map-pin" class="mr-3 h-6 w-6 flex-shrink-0"></i> Grounded in Kenya, Driven by Innovation
                        </h3>
                        <p class="text-secondary leading-relaxed">
                            My journey began with a BSc in Information Technology from Zetech University (2022), enhanced by specialized Data Science training at Moringa School. Currently pursuing an MSc in Data Science at Cooperative University Kenya (2024-Present), I'm dedicated to applying global tech advancements to solve local challenges and boost Kenya's innovation ecosystem.
                        </p>
                    </div>
                     <div class="card-base card-hover">
                        <h3 class="text-2xl font-semibold mb-3 text-green-500 flex items-center">
                            <i data-lucide="activity" class="mr-3 h-6 w-6 flex-shrink-0"></i> Experience: Transforming Healthcare Ops
                        </h3>
                        <p class="text-secondary leading-relaxed">
                            As volunteer Senior IT Manager & Data Scientist at Kingdom Hospital, Webuye (Jan 2023 - Present), I mentored interns and focused on network security, system uptime, and data integrity. A key achievement involved developing predictive models that <strong class="text-green-600 dark:text-green-400 pulsate">reduced patient wait times by 35%</strong>. We also automated management tasks using Frappe-based ERP solutions, enhancing record accuracy and billing.
                        </p>
                         <p class="mt-3 text-sm text-secondary">Methodology: <strong class="text-accent underline decoration-dotted cursor-help" title="Utilized predictive modeling (queuing theory, regression) and process mining on historical data to identify bottlenecks in scheduling/resource allocation and optimize patient journey workflows.">Patient flow optimization techniques</strong>.</p>
                    </div>
                     <div class="card-base card-hover">
                        <h3 class="text-2xl font-semibold mb-3 text-red-500 flex items-center">
                            <i data-lucide="shield-check" class="mr-3 h-6 w-6 flex-shrink-0"></i> Experience: Enhancing Public Sector Resilience
                        </h3>
                        <p class="text-secondary leading-relaxed">
                            Volunteering as an ICT Expert for Webuye District (March 2024), I focused on digitizing records and strengthening digital defenses through network upgrades and implementing comprehensive <strong class="text-red-600 dark:text-red-400 hover:animate-pulse cursor-help" title="Protecting critical systems through security audits, firewall configuration, and user access controls.">cybersecurity</strong> frameworks. I also trained staff in data management and secure digital practices.
                        </p>
                    </div>
                </div>
            </div>
             <div class="text-center mt-16">
                 <a href="about.html" class="cta-button-secondary group">
                     <span>Learn More About My Journey</span>
                     <i data-lucide="arrow-right" class="ml-2 h-4 w-4"></i>
                 </a>
             </div>
        </div>
    </section>

     <section id="experience" class="bg-bg-primary section-container" data-section-name="Experience">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16">
                <h2 class="text-4xl md:text-5xl font-bold text-heading">Professional Experience</h2>
                <p class="text-lg text-secondary leading-relaxed mt-4 max-w-3xl mx-auto">
                    A timeline highlighting key roles and responsibilities where I applied my skills to drive tangible results.
                </p>
            </div>
            <div class="timeline max-w-3xl mx-auto">
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content card-hover">
                        <h3 class="text-xl font-semibold mb-1 text-heading">Senior IT Manager & Data Scientist (Volunteer)</h3>
                        <p class="text-sm font-medium text-accent mb-3">Kingdom Hospital, Webuye | Jan 2023 – Present</p>
                        <ul class="list-disc list-inside space-y-1.5 text-secondary text-sm">
                            <li>Led IT operations, mentored interns, ensured system uptime & data integrity.</li>
                            <li>Developed predictive models reducing patient wait times by 35%.</li>
                            <li>Implemented Frappe-based ERP for automated hospital management.</li>
                            <li>Enhanced cybersecurity protocols and disaster recovery plans.</li>
                        </ul>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content card-hover">
                         <h3 class="text-xl font-semibold mb-1 text-heading">ICT Expert (Volunteer)</h3>
                        <p class="text-sm font-medium text-accent mb-3">Webuye District | March 2024 (Short-term)</p>
                        <ul class="list-disc list-inside space-y-1.5 text-secondary text-sm">
                            <li>Spearheaded digitization of administrative records.</li>
                            <li>Strengthened digital defenses via network upgrades & cybersecurity frameworks.</li>
                            <li>Trained district staff on data management, troubleshooting & security.</li>
                        </ul>
                    </div>
                </div>
            </div>
             <div class="text-center mt-16">
                 <a href="experience.html" class="cta-button-secondary group">
                     <span>View Detailed Experience</span>
                     <i data-lucide="arrow-right" class="ml-2 h-4 w-4"></i>
                 </a>
             </div>
        </div>
    </section>


    <section id="skills" class="bg-bg-secondary section-container" data-section-name="Skills">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16">
                <span class="section-header-line text-accent font-semibold">Chapter II</span>
                <h2 class="section-header-title text-4xl md:text-5xl font-bold text-heading mt-2">Skills & Expertise</h2>
                <p class="section-header-subtitle text-lg text-secondary leading-relaxed mt-4 max-w-3xl mx-auto">
                    A blend of technical proficiency, strategic thinking, and collaborative strengths honed through diverse projects and continuous learning.
                </p>
            </div>

            <div class="mb-16 card-base card-hover">
                <h3 class="text-3xl font-semibold mb-6 text-center text-accent">Interactive Skill Galaxy (Conceptual)</h3>
                <div class="tech-placeholder">
                     <i class="fas fa-project-diagram"></i>
                     <p>Imagine navigating a 3D space where skills orbit like celestial bodies. Python, TensorFlow, Tableau, Network Security connect via luminous pathways. Interacting reveals proficiency details and links to relevant projects.</p>
                     <span class="tech-label">(Requires WebGL/Three.js Implementation)</span>
                 </div>
                 <p class="mt-4 text-center text-sm text-secondary">Hover over terms like <strong class="text-accent underline decoration-dotted cursor-help" title="Expertise in MLPs, CNNs (e.g., plant disease detection), RNNs/LSTMs (e.g., GDP forecasting), including architecture design, training, evaluation, and optimization using frameworks like TensorFlow/Keras.">Neural Networks</strong> for details.</p>
            </div>

            <div class="mb-16 card-base card-hover">
                <h3 class="text-3xl font-semibold mb-6 text-center text-green-500">Skill Mastery Challenge</h3>
                <div class="text-center text-secondary">
                    <p class="mb-4">Test your knowledge! Answer correctly to unlock skill badges!</p>
                    <p class="mb-2 text-lg">Challenge: <span id="skill-challenge-question" class="font-medium text-heading">Which ML technique was central to the GDP prediction model?</span></p>
                    <div class="flex justify-center items-center gap-2 mt-3">
                        <input type="text" id="skill-challenge-answer" class="w-full max-w-xs px-3 py-2 border rounded-md focus:ring-accent focus:border-accent outline-none placeholder-gray-400 text-sm" placeholder="Enter your answer...">
                        <button id="skill-challenge-submit" class="cta-button-secondary !px-4 !py-2">Validate</button>
                    </div>
                    <p id="skill-challenge-feedback" class="text-sm mt-3 h-5 font-medium"></p>
                    <div id="skill-badges" class="mt-4 flex justify-center gap-3 flex-wrap">
                         <span class="skill-badge inline-block p-1.5 px-3 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-full text-xs shadow" data-skill="python" title="Locked: Core language for data analysis, ML, scripting.">Python <i data-lucide="lock" class="inline h-3 w-3 ml-1"></i></span>
                         <span class="skill-badge inline-block p-1.5 px-3 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-full text-xs shadow" data-skill="tensorflow" title="Locked: Deep learning framework (used in Plant Detector).">TensorFlow <i data-lucide="lock" class="inline h-3 w-3 ml-1"></i></span>
                         <span class="skill-badge inline-block p-1.5 px-3 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-full text-xs shadow" data-skill="timeseries" title="Locked: Analyzing sequential data (used in GDP Model).">Time-Series <i data-lucide="lock" class="inline h-3 w-3 ml-1"></i></span>
                         <span class="skill-badge inline-block p-1.5 px-3 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-full text-xs shadow" data-skill="tableau" title="Locked: Data visualization tool.">Tableau <i data-lucide="lock" class="inline h-3 w-3 ml-1"></i></span>
                         <span class="skill-badge inline-block p-1.5 px-3 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-full text-xs shadow" data-skill="cybersecurity" title="Locked: Network security, vulnerability assessment.">Cybersecurity <i data-lucide="lock" class="inline h-3 w-3 ml-1"></i></span>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="card-base card-hover">
                    <h4 class="text-2xl font-semibold mb-4 text-green-500 flex items-center"><i data-lucide="cpu" class="mr-3 flex-shrink-0"></i>Technical Proficiency</h4>
                    <ul class="space-y-3 text-secondary text-sm">
                        <li title="Data analysis (Pandas, NumPy), ML (Scikit-learn, TensorFlow/Keras), DB interaction."><i data-lucide="check-circle" class="text-green-500 mr-2 h-4 w-4 inline"></i>Python, SQL</li>
                        <li title="Static (Matplotlib, Seaborn) & interactive (Tableau) data visualization."><i data-lucide="check-circle" class="text-green-500 mr-2 h-4 w-4 inline"></i>Tableau, Matplotlib, Seaborn</li>
                        <li title="Predictive modeling, classification, clustering, NNs, CNNs, RNNs."><i data-lucide="check-circle" class="text-green-500 mr-2 h-4 w-4 inline"></i>ML: Predictive Modeling, Deep Learning</li>
                        <li title="Data cleaning, transformation, feature engineering & selection."><i data-lucide="check-circle" class="text-green-500 mr-2 h-4 w-4 inline"></i>Big Data Wrangling & Feature Engineering</li>
                        <li title="Network config, server maint., system admin, troubleshooting."><i data-lucide="check-circle" class="text-green-500 mr-2 h-4 w-4 inline"></i>System Admin & IT Troubleshooting</li>
                        <li title="ERPNext customization & development (e.g., hospital system)."><i data-lucide="check-circle" class="text-green-500 mr-2 h-4 w-4 inline"></i>Frappe Framework</li>
                        <li title="Security protocols, vulnerability assessment, disaster recovery planning."><i data-lucide="check-circle" class="text-green-500 mr-2 h-4 w-4 inline"></i>Cybersecurity & Disaster Recovery</li>
                    </ul>
                </div>
                <div class="card-base card-hover">
                    <h4 class="text-2xl font-semibold mb-4 text-yellow-500 flex items-center"><i data-lucide="users-2" class="mr-3 flex-shrink-0"></i>Strategic & Soft Skills</h4>
                    <ul class="space-y-3 text-secondary text-sm">
                        <li><i data-lucide="check-circle" class="text-yellow-500 mr-2 h-4 w-4 inline"></i>Analytical Problem-Solving</li>
                        <li><i data-lucide="check-circle" class="text-yellow-500 mr-2 h-4 w-4 inline"></i>Proactive Leadership & Mentoring</li>
                        <li><i data-lucide="check-circle" class="text-yellow-500 mr-2 h-4 w-4 inline"></i>Meticulous Research & Documentation</li>
                        <li><i data-lucide="check-circle" class="text-yellow-500 mr-2 h-4 w-4 inline"></i>Adaptability & Continuous Learning</li>
                        <li><i data-lucide="check-circle" class="text-yellow-500 mr-2 h-4 w-4 inline"></i>Clear Communication & Team Synergy</li>
                        <li><i data-lucide="check-circle" class="text-yellow-500 mr-2 h-4 w-4 inline"></i>Project Management Fundamentals</li>
                        <li><i data-lucide="check-circle" class="text-yellow-500 mr-2 h-4 w-4 inline"></i>Stakeholder Engagement</li>
                    </ul>
                </div>
                <div class="card-base card-hover">
                    <h4 class="text-2xl font-semibold mb-4 text-red-500 flex items-center"><i data-lucide="box" class="mr-3 flex-shrink-0"></i>Tools & Platforms</h4>
                    <ul class="space-y-3 text-secondary text-sm">
                        <li><i data-lucide="check-circle" class="text-red-500 mr-2 h-4 w-4 inline"></i>ML/DL: TensorFlow, Keras, Scikit-learn</li>
                        <li><i data-lucide="check-circle" class="text-red-500 mr-2 h-4 w-4 inline"></i>DevOps: Git, GitHub, Docker (Basic)</li>
                        <li><i data-lucide="check-circle" class="text-red-500 mr-2 h-4 w-4 inline"></i>Cloud: Google Cloud Platform (Intro)</li>
                        <li><i data-lucide="check-circle" class="text-red-500 mr-2 h-4 w-4 inline"></i>Data Env: Jupyter Notebooks, Google Colab</li>
                        <li><i data-lucide="check-circle" class="text-red-500 mr-2 h-4 w-4 inline"></i>OS: Linux Proficiency (Ubuntu, CentOS)</li>
                        <li><i data-lucide="check-circle" class="text-red-500 mr-2 h-4 w-4 inline"></i>BI: Tableau Desktop</li>
                        <li><i data-lucide="check-circle" class="text-red-500 mr-2 h-4 w-4 inline"></i>Databases: SQL (PostgreSQL, MySQL)</li>
                    </ul>
                </div>
            </div>
             <div class="text-center mt-16">
                 <a href="skills.html" class="cta-button-secondary group">
                     <span>Explore Skills in Detail</span>
                     <i data-lucide="arrow-right" class="ml-2 h-4 w-4"></i>
                 </a>
             </div>
        </div>
    </section>

    <section id="projects" class="bg-bg-primary section-container" data-section-name="Projects">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16">
                 <span class="section-header-line text-accent font-semibold">Chapter III</span>
                <h2 class="section-header-title text-4xl md:text-5xl font-bold text-heading mt-2">Innovation Lab</h2>
                <p class="section-header-subtitle text-lg text-secondary leading-relaxed mt-4 max-w-3xl mx-auto">
                    Featured projects showcasing the application of data science, machine learning, and IT strategy to solve real-world problems.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="project-card card-base card-hover">
                     <img src="https://placehold.co/600x338/E0E7FF/4F46E5?text=GDP+Model" alt="GDP Growth Prediction Visualization Placeholder" class="project-image">
                    <h3 class="text-xl font-semibold mb-2 text-blue-600 dark:text-blue-400 flex items-center">
                        <i data-lucide="trending-up" class="mr-2 flex-shrink-0"></i>GDP Growth Prediction Model
                    </h3>
                    <p class="text-sm text-secondary mb-3">Forecasting national GDP growth using ML (Time-Series Analysis) and key economic indicators.</p>
                    <p class="text-sm text-secondary mb-4 flex-grow"><strong>Outcome:</strong> Provided data-driven insights for economic policy formulation and strategic investment planning.</p>
                    <div class="mt-auto pt-4 border-t border-color">
                         <a href="https://github.com/dmwanjala/Phase-3-Project-Modelling" target="_blank" rel="noopener noreferrer" class="text-sm font-medium text-accent hover:text-accent-hover transition duration-200 inline-flex items-center group">
                            Explore Repository <i data-lucide="github" class="inline h-4 w-4 ml-1.5 group-hover:scale-110 transition-transform"></i>
                        </a>
                    </div>
                </div>

                <div class="project-card card-base card-hover">
                     <img src="https://placehold.co/600x338/ECFDF5/10B981?text=Plant+AI" alt="AI Plant Disease Detection Interface Placeholder" class="project-image">
                    <h3 class="text-xl font-semibold mb-2 text-green-600 dark:text-green-400 flex items-center">
                         <i data-lucide="scan-search" class="mr-2 flex-shrink-0"></i>AI-Driven Plant Disease Detection
                    </h3>
                     <p class="text-sm text-secondary mb-3">Advanced AgTech solution using computer vision (CNNs with TensorFlow) to identify plant diseases from images.</p>
                     <p class="text-sm text-secondary mb-4 flex-grow"><strong>Outcome:</strong> Tool for early disease detection, potentially boosting crop yields and contributing to food security.</p>
                     <div class="mt-auto pt-4 border-t border-color">
                        <a href="https://github.com/dmwanjala/Capstone-Lazarus" target="_blank" rel="noopener noreferrer" class="text-sm font-medium text-accent hover:text-accent-hover transition duration-200 inline-flex items-center group mr-4">
                            Explore Repository <i data-lucide="github" class="inline h-4 w-4 ml-1.5 group-hover:scale-110 transition-transform"></i>
                        </a>
                        <div class="tech-placeholder mt-4 !min-h-0 !p-3">
                             <i class="fas fa-vr-cardboard !text-xl !mb-1"></i>
                             <p class="!text-xs">Conceptual AR Preview</p>
                             <span class="tech-label">(Requires AR.js/WebXR)</span>
                        </div>
                    </div>
                </div>

                <div class="project-card card-base card-hover">
                     <img src="https://placehold.co/600x338/EDE9FE/8B5CF6?text=GDP+Forecast" alt="Kenya GDP Forecasting Chart Placeholder" class="project-image">
                    <h3 class="text-xl font-semibold mb-2 text-purple-600 dark:text-purple-400 flex items-center">
                         <i data-lucide="line-chart" class="mr-2 flex-shrink-0"></i>Kenya GDP Forecasting Tool
                    </h3>
                     <p class="text-sm text-secondary mb-3">Analytical tool employing time-series analysis (ARIMA/LSTM) to model and predict Kenya's GDP trends.</p>
                    <p class="text-sm text-secondary mb-4 flex-grow"><strong>Outcome:</strong> Equipped stakeholders with data-informed perspectives on economic trajectories for better strategic planning.</p>
                    <div class="mt-auto pt-4 border-t border-color">
                        <a href="https://github.com/dmwanjala/GDP-Forecast-Sample" target="_blank" rel="noopener noreferrer" class="text-sm font-medium text-accent hover:text-accent-hover transition duration-200 inline-flex items-center group">
                            Explore Repository <i data-lucide="github" class="inline h-4 w-4 ml-1.5 group-hover:scale-110 transition-transform"></i>
                        </a>
                    </div>
                </div>

                <div class="project-card card-base card-hover">
                     <img src="https://placehold.co/600x338/FEF3C7/F59E0B?text=InvestWise" alt="InvestWise Predictor Dashboard Concept Placeholder" class="project-image">
                    <h3 class="text-xl font-semibold mb-2 text-yellow-600 dark:text-yellow-400 flex items-center">
                         <i data-lucide="brain-circuit" class="mr-2 flex-shrink-0"></i>InvestWise Predictor <span class="text-xs ml-2 bg-yellow-100 text-yellow-800 px-1.5 py-0.5 rounded-full dark:bg-yellow-900 dark:text-yellow-300">WIP</span>
                    </h3>
                     <p class="text-sm text-secondary mb-3">Intelligent web platform using neural networks to synthesize diverse data for predicting regional investment viability in Kenya.</p>
                    <p class="text-sm text-secondary mb-4 flex-grow"><strong>Outcome (Goal):</strong> Provide investors with sophisticated, data-driven evaluations to promote targeted economic development.</p>
                    <div class="mt-auto pt-4 border-t border-color">
                        <a href="https://github.com/dmwanjala/InvestWise-Predictor-Project" target="_blank" rel="noopener noreferrer" class="text-sm font-medium text-accent hover:text-accent-hover transition duration-200 inline-flex items-center group">
                            Track Progress <i data-lucide="github" class="inline h-4 w-4 ml-1.5 group-hover:scale-110 transition-transform"></i>
                        </a>
                    </div>
                </div>

                 <div class="project-card card-base card-hover">
                    <img src="https://placehold.co/600x338/FEE2E2/EF4444?text=Netflix+Stocks" alt="Netflix Stock Chart Analysis Placeholder" class="project-image">
                    <h3 class="text-xl font-semibold mb-2 text-red-600 dark:text-red-400 flex items-center">
                         <i data-lucide="candlestick-chart" class="mr-2 flex-shrink-0"></i>Netflix Stock Performance Analysis
                    </h3>
                     <p class="text-sm text-secondary mb-3">Quantitative examination of Netflix's historical stock data to identify trends, volatility, and investment characteristics.</p>
                    <p class="text-sm text-secondary mb-4 flex-grow"><strong>Outcome:</strong> Delivered objective, data-supported insights on historical performance and risk profile for investor evaluation.</p>
                     <div class="mt-auto pt-4 border-t border-color">
                        <a href="https://github.com/dmwanjala/Netflix-Analysis" target="_blank" rel="noopener noreferrer" class="text-sm font-medium text-accent hover:text-accent-hover transition duration-200 inline-flex items-center group">
                            Explore Repository <i data-lucide="github" class="inline h-4 w-4 ml-1.5 group-hover:scale-110 transition-transform"></i>
                        </a>
                    </div>
                </div>

                 <div class="card-base flex flex-col items-center justify-center text-center bg-gradient-to-br from-bg-accent to-bg-primary dark:from-gray-800 dark:to-gray-900 card-hover">
                     <i data-lucide="github" class="w-12 h-12 text-accent mb-4"></i>
                     <h3 class="text-xl font-semibold mb-3 text-heading">Discover More Innovations</h3>
                     <p class="text-secondary mb-6 text-sm">My GitHub profile hosts a broader range of projects, experiments, and open-source contributions.</p>
                     <div class="github-feed-placeholder w-full mb-6">
                         <i class="fas fa-stream"></i>
                         <p>Conceptual feed showing recent GitHub activity (commits, PRs, issues). Requires GitHub API integration.</p>
                         <span class="tech-label">(Requires Backend/GitHub API)</span>
                     </div>
                     <a href="https://github.com/MadScie254?tab=repositories" target="_blank" rel="noopener noreferrer" class="cta-button-secondary mt-auto group">
                         <span>Visit GitHub Profile</span>
                         <i data-lucide="arrow-right" class="ml-2 h-4 w-4"></i>
                     </a>
                 </div>
            </div>
             <div class="text-center mt-16">
                 <a href="projects.html" class="cta-button group">
                     <span>View All Projects</span>
                     <i data-lucide="arrow-right" class="ml-2 h-4 w-4"></i>
                 </a>
             </div>
        </div>
    </section>

     <section id="education" class="bg-bg-secondary section-container" data-section-name="Education">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16">
                <span class="section-header-line text-accent font-semibold">Foundations</span>
                <h2 class="section-header-title text-4xl md:text-5xl font-bold text-heading mt-2">Academic Pillars</h2>
                <p class="section-header-subtitle text-lg text-secondary leading-relaxed mt-4 max-w-3xl mx-auto">
                    Charting the educational milestones that shaped my technical expertise and analytical approach.
                </p>
                 <div class="lottie-placeholder-container mt-6">
                    <lottie-player src="https://assets3.lottiefiles.com/packages/lf20_DMgKkTTM9M.json" background="transparent" speed="1" style="width: 180px; height: 180px;" loop autoplay aria-label="Education Animation"></lottie-player>
                </div>
            </div>
            <div class="max-w-4xl mx-auto space-y-8">
                <div class="card-base card-hover">
                    <h3 class="text-xl font-semibold mb-1 text-heading">Master of Science in Data Science</h3>
                    <p class="font-medium text-accent mb-2">Cooperative University Kenya | 2024 – Present</p>
                    <p class="text-sm text-secondary leading-relaxed">Advancing knowledge in sophisticated ML algorithms, scalable big data analytics, advanced statistical modeling, and rigorous research methodologies.</p>
                </div>
                <div class="card-base card-hover">
                    <h3 class="text-xl font-semibold mb-1 text-heading">Bachelor of Science in Information Technology</h3>
                    <p class="font-medium text-accent mb-2">Zetech University | Graduated 2022 (Honors)</p>
                    <p class="text-sm text-secondary leading-relaxed">Comprehensive curriculum covering SQL, Python (OOP), network architecture, systems analysis, and business intelligence concepts.</p>
                </div>
                 <div class="card-base card-hover">
                    <h3 class="text-xl font-semibold mb-1 text-heading">Certificate in Data Science and Machine Learning</h3>
                    <p class="font-medium text-accent mb-2">Moringa School</p>
                    <p class="text-sm text-secondary leading-relaxed">Immersive, project-based learning focused on practical data science workflows (Python, Pandas, NumPy, Scikit-learn), deep learning fundamentals, and data visualization (Matplotlib, Seaborn).</p>
                </div>
            </div>
             <div class="text-center mt-16">
                 <a href="education.html" class="cta-button-secondary group">
                     <span>See Education Details</span>
                      <i data-lucide="arrow-right" class="ml-2 h-4 w-4"></i>
                 </a>
             </div>
        </div>
    </section>

     <section id="certifications" class="bg-bg-primary section-container" data-section-name="Certifications">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16">
                <span class="section-header-line text-accent font-semibold">Credentials</span>
                <h2 class="section-header-title text-4xl md:text-5xl font-bold text-heading mt-2">Validated Expertise</h2>
                <p class="section-header-subtitle text-lg text-secondary leading-relaxed mt-4 max-w-3xl mx-auto">
                    Commitment to continuous professional development demonstrated through certifications from respected industry platforms.
                </p>
            </div>
            <div class="max-w-5xl mx-auto">
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="card-base flex items-center space-x-4 transition-all duration-300 hover:opacity-85 hover:scale-[1.02] hover:shadow-md">
                        <i data-lucide="award" class="text-yellow-500 h-10 w-10 flex-shrink-0"></i>
                        <div>
                            <h4 class="font-semibold text-heading text-sm">Google Cloud - Intro to Workspace Admin</h4>
                            <p class="text-xs text-secondary">ID: VUAXGZW4DX9Y</p>
                        </div>
                    </div>
                     <div class="card-base flex items-center space-x-4 transition-all duration-300 hover:opacity-85 hover:scale-[1.02] hover:shadow-md">
                        <i data-lucide="award" class="text-green-500 h-10 w-10 flex-shrink-0"></i>
                        <div>
                            <h4 class="font-semibold text-heading text-sm">HackerRank - Software Engineer Role Cert</h4>
                            <p class="text-xs text-secondary">ID: 0A531F3CF6CB</p>
                        </div>
                    </div>
                     <div class="card-base flex items-center space-x-4 transition-all duration-300 hover:opacity-85 hover:scale-[1.02] hover:shadow-md">
                        <i data-lucide="award" class="text-blue-500 h-10 w-10 flex-shrink-0"></i>
                        <div>
                            <h4 class="font-semibold text-heading text-sm">HackerRank - Problem Solving (Intermediate)</h4>
                            <p class="text-xs text-secondary">ID: 9D0D1B09D24E</p>
                        </div>
                    </div>
                     <div class="card-base flex items-center space-x-4 transition-all duration-300 hover:opacity-85 hover:scale-[1.02] hover:shadow-md">
                        <i data-lucide="award" class="text-yellow-500 h-10 w-10 flex-shrink-0"></i>
                        <div>
                            <h4 class="font-semibold text-heading text-sm">Google - Foundations: Data, Data, Everywhere</h4>
                            <p class="text-xs text-secondary">ID: ZYDCF6KNWSAX</p>
                        </div>
                    </div>
                     <div class="card-base flex items-center space-x-4 transition-all duration-300 hover:opacity-85 hover:scale-[1.02] hover:shadow-md">
                        <i data-lucide="award" class="text-green-500 h-10 w-10 flex-shrink-0"></i>
                        <div>
                            <h4 class="font-semibold text-heading text-sm">HackerRank - Python (Basic)</h4>
                            <p class="text-xs text-secondary">ID: E883F6B460CF</p>
                        </div>
                    </div>
                     <div class="card-base flex items-center space-x-4 transition-all duration-300 hover:opacity-85 hover:scale-[1.02] hover:shadow-md">
                        <i data-lucide="award" class="text-purple-500 h-10 w-10 flex-shrink-0"></i>
                        <div>
                            <h4 class="font-semibold text-heading text-sm">Udemy - Python for Data Science</h4>
                            <p class="text-xs text-secondary">ID: UC-b80a...</p>
                        </div>
                    </div>
                     <div class="card-base flex items-center space-x-4 transition-all duration-300 hover:opacity-85 hover:scale-[1.02] hover:shadow-md">
                        <i data-lucide="award" class="text-blue-500 h-10 w-10 flex-shrink-0"></i>
                        <div>
                            <h4 class="font-semibold text-heading text-sm">LinkedIn - Non-Technical Skills of Data Scientists</h4>
                            <p class="text-xs text-secondary">(Completion)</p>
                        </div>
                    </div>
                     <div class="card-base flex items-center space-x-4 transition-all duration-300 hover:opacity-85 hover:scale-[1.02] hover:shadow-md">
                        <i data-lucide="award" class="text-red-500 h-10 w-10 flex-shrink-0"></i>
                        <div>
                            <h4 class="font-semibold text-heading text-sm">Udemy - Practical Password Cracking</h4>
                             <p class="text-xs text-secondary">ID: UC-96f1...</p>
                        </div>
                    </div>
                     <div class="card-base flex items-center space-x-4 transition-all duration-300 hover:opacity-85 hover:scale-[1.02] hover:shadow-md bg-bg-accent dark:bg-gray-700/50">
                        <i data-lucide="award" class="text-gray-500 h-10 w-10 flex-shrink-0"></i>
                        <div>
                            <h4 class="font-semibold text-heading text-sm">And More...</h4>
                            <p class="text-xs text-secondary">Continuously enhancing skills.</p>
                        </div>
                    </div>
                </div>
            </div>
             <div class="text-center mt-16">
                 <a href="certifications.html" class="cta-button-secondary group">
                     <span>See All Certifications</span>
                      <i data-lucide="arrow-right" class="ml-2 h-4 w-4"></i>
                 </a>
             </div>
        </div>
    </section>

     <section id="blog" class="bg-bg-secondary section-container" data-section-name="Blog">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16">
                <span class="section-header-line text-accent font-semibold">Insights</span>
                <h2 class="section-header-title text-4xl md:text-5xl font-bold text-heading mt-2">From the Digital Desk</h2>
                <p class="section-header-subtitle text-lg text-secondary leading-relaxed mt-4 max-w-3xl mx-auto">
                    Articles, reflections, and technical deep-dives on AI, data science applications, project lessons, and emerging tech trends. (Blog content is conceptual)
                </p>
            </div>
            <div class="max-w-4xl mx-auto">
                 <div class="card-base card-hover">
                     <h3 class="text-2xl font-semibold mb-4 text-accent">Featured Post (Example)</h3>
                     <article class="prose prose-sm sm:prose lg:prose-lg max-w-none text-secondary dark:prose-invert prose-a:text-accent prose-a:no-underline hover:prose-a:underline prose-strong:text-heading dark:prose-strong:text-white prose-headings:text-heading dark:prose-headings:text-white">
                         <h4>Bridging the Gap: Advanced Analytics in Resource-Constrained Settings</h4>
                         <p>The successful application of predictive analytics at Kingdom Hospital highlights that advanced data science isn't exclusive to large corporations. However, deploying these techniques effectively with limited infrastructure or data quality issues requires a nuanced approach. This involves prioritizing robust preprocessing, selecting efficient models (like simpler regressions or tree-based methods before jumping to deep learning), and focusing on actionable insights without extensive technical overhead...</p>
                         <p>Key challenges often include inconsistent data entry, lack of standardized formats, and limited computational power. Strategies like data imputation, feature engineering tailored to available data, and utilizing cloud platforms for bursts of computation can mitigate these issues. The focus shifts from cutting-edge complexity to practical impact.</p>
                         <a href="blog/featured-post.html" class="font-medium">Continue Reading &raquo;</a>
                     </article>
                </div>
                 <div class="mt-16 text-center">
                     <a href="blog.html" class="cta-button group">
                         <span>View All Posts</span>
                          <i data-lucide="arrow-right" class="ml-2 h-4 w-4"></i>
                     </a>
                 </div>
            </div>
        </div>
    </section>

    <section id="contact" class="bg-bg-primary section-container" data-section-name="Contact">
         <div class="container mx-auto px-6">
            <div class="text-center mb-16">
                 <span class="section-header-line text-accent font-semibold">Chapter IV</span>
                <h2 class="section-header-title text-4xl md:text-5xl font-bold text-heading mt-2">Initiate Dialogue</h2>
                <p class="section-header-subtitle text-lg text-secondary leading-relaxed mt-4 max-w-3xl mx-auto">
                    Let's connect and explore possibilities. Use the methods below to discuss collaborations, data science challenges, or groundbreaking projects.
                </p>
            </div>

            <div class="flex flex-col lg:flex-row gap-12 lg:gap-16 items-start">
                <div class="w-full lg:w-1/2 space-y-8">
                     <div class="card-base card-hover">
                        <h3 class="text-2xl font-semibold mb-4 text-center text-accent">Mapping the Journey (Conceptual)</h3>
                        <div class="tech-placeholder">
                             <i class="fas fa-globe-africa"></i>
                             <p>Envision an interactive 3D globe highlighting significant locations (Ruiru, Webuye, Zetech Uni). Clicking points could reveal narrative snippets or project highlights.</p>
                            <span class="tech-label">(Requires WebGL/Three.js Implementation)</span>
                        </div>
                    </div>
                     <div class="card-base card-hover">
                         <h3 class="text-2xl font-semibold mb-4 text-center text-accent">AR vCard (Conceptual)</h3>
                        <div class="tech-placeholder">
                             <i class="fas fa-qrcode"></i>
                             <p>Scan a QR code (conceptually displayed here) to view an Augmented Reality vCard with contact details overlaid in your environment.</p>
                             <span class="tech-label">(Requires AR.js/WebXR & vCard Generation)</span>
                        </div>
                    </div>
                </div>

                <div class="w-full lg:w-1/2 card-base card-hover">
                     <h3 class="text-2xl font-semibold mb-6 text-heading">Let's Start a Conversation</h3>
                     <p class="text-secondary mb-6 leading-relaxed text-sm">
                        I welcome inquiries regarding collaborative ventures, data science consulting, speaking engagements, or discussions on leveraging technology for positive impact.
                    </p>

                     <div class="space-y-3 mb-6 border-b border-color pb-6">
                         <p class="flex items-center text-md"><i data-lucide="mail" class="mr-3 text-accent flex-shrink-0 h-5 w-5"></i> <a href="mailto:dmwanjala254@gmail.com" class="text-secondary hover:text-accent transition break-all">dmwanjala254@gmail.com</a></p>
                         <p class="flex items-center text-md"><i data-lucide="phone-call" class="mr-3 text-accent flex-shrink-0 h-5 w-5"></i> <a href="tel:+254742007277" class="text-secondary hover:text-accent transition">+254 742 007 277</a></p>
                         <p class="flex items-center text-md"><i data-lucide="map-pin" class="mr-3 text-accent flex-shrink-0 h-5 w-5"></i> <span class="text-secondary">Ruiru, Kiambu, Kenya</span></p>
                     </div>

                     <div class="flex flex-wrap gap-3 mb-6">
                         <a href="https://linkedin.com/in/daniel-wanjala-91" target="_blank" rel="noopener noreferrer" class="flex items-center bg-blue-600 hover:bg-blue-700 text-white font-semibold py-1.5 px-3 rounded-md text-sm transition duration-300 shadow hover:shadow-lg transform hover:-translate-y-0.5" aria-label="LinkedIn Profile">
                             <i data-lucide="linkedin" class="mr-1.5 h-4 w-4"></i> LinkedIn
                         </a>
                          <a href="https://github.com/dmwanjala" target="_blank" rel="noopener noreferrer" class="flex items-center bg-gray-700 hover:bg-gray-600 text-white font-semibold py-1.5 px-3 rounded-md text-sm transition duration-300 shadow hover:shadow-lg transform hover:-translate-y-0.5" aria-label="GitHub Profile">
                             <i data-lucide="github" class="mr-1.5 h-4 w-4"></i> GitHub
                         </a>
                         <a href="https://wa.me/254742007277?text=Hi%20Daniel,%20I%20visited%20your%20portfolio..." target="_blank" rel="noopener noreferrer" class="flex items-center bg-green-600 hover:bg-green-700 text-white font-semibold py-1.5 px-3 rounded-md text-sm transition duration-300 shadow hover:shadow-lg transform hover:-translate-y-0.5" aria-label="WhatsApp">
                             <i data-lucide="message-circle" class="mr-1.5 h-4 w-4"></i> WhatsApp
                         </a>
                          <button id="copy-email-btn" class="flex items-center bg-purple-600 hover:bg-purple-700 text-white font-semibold py-1.5 px-3 rounded-md text-sm transition duration-300 shadow hover:shadow-lg transform hover:-translate-y-0.5" aria-label="Copy Email Address" data-clipboard-text="dmwanjala254@gmail.com">
                             <i data-lucide="clipboard-copy" class="mr-1.5 h-4 w-4"></i> Copy Email
                         </button>
                     </div>
                     <div id="clipboard-toast" class="fixed bottom-5 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg text-sm opacity-0 transition-opacity duration-300 pointer-events-none z-[10001]">
                         Email address copied!
                     </div>

                    <form id="contact-form" class="space-y-4" aria-labelledby="contact-heading">
                         <h4 id="contact-heading" class="text-lg font-semibold text-heading border-t border-color pt-6">Send a Direct Message</h4>
                        <div>
                            <label for="name" class="block text-sm font-medium text-secondary mb-1 sr-only">Your Name</label>
                            <input type="text" id="name" name="name" required class="w-full px-3 py-2 border rounded-md focus:ring-accent focus:border-accent outline-none placeholder-text-secondary text-sm" placeholder="Your Name" aria-required="true" autocomplete="name">
                        </div>
                        <div>
                            <label for="email" class="block text-sm font-medium text-secondary mb-1 sr-only">Your Email</label>
                            <input type="email" id="email" name="email" required class="w-full px-3 py-2 border rounded-md focus:ring-accent focus:border-accent outline-none placeholder-text-secondary text-sm" placeholder="Your Email Address" aria-required="true" autocomplete="email">
                        </div>
                        <div>
                            <label for="message" class="block text-sm font-medium text-secondary mb-1 sr-only">Your Message</label>
                            <textarea id="message" name="message" rows="4" required class="w-full px-3 py-2 border rounded-md focus:ring-accent focus:border-accent outline-none placeholder-text-secondary text-sm" placeholder="Share your thoughts, questions, or proposal..." aria-required="true"></textarea>
                        </div>
                        <button type="submit" class="w-full cta-button group">
                            <span>Submit Message (Demo)</span>
                            <i data-lucide="send" class="ml-2 h-4 w-4"></i>
                        </button>
                         <p id="form-status" class="text-xs text-center text-secondary mt-2" aria-live="polite"></p>
                         <p class="text-xs text-secondary mt-1 text-center">(Form requires backend integration to send emails)</p>
                    </form>
                </div>
            </div>
             <div class="text-center mt-16">
                 <a href="contact.html" class="cta-button-secondary group">
                     <span>View More Contact Options</span>
                      <i data-lucide="arrow-right" class="ml-2 h-4 w-4"></i>
                 </a>
             </div>
        </div>
    </section>

    <footer class="py-10 mt-16 bg-bg-secondary border-t border-color">
        <div class="container mx-auto px-6 text-center text-secondary">
            <div class="mb-4 inline-block group">
                 <span class="text-4xl transition duration-300 ease-in-out group-hover:animate-bounce cursor-pointer" title="A hint of personality!" aria-label="Rugby ball icon">🏉</span>
            </div>
            <p class="text-sm">&copy; <span id="current-year"></span> Daniel Wanjala. All Rights Reserved.</p>
            <p class="text-xs mt-2">Data-driven solutions & digital experiences from Ruiru, Kenya.</p>
             <button id="konami-trigger" class="mt-4 text-xs text-gray-400 dark:text-gray-600 hover:text-secondary transition-colors" aria-label="Konami code hint button">Konami Hint</button>
        </div>
    </footer>

    <script>
        try {
            // Wait for the DOM to be fully loaded before executing scripts
            document.addEventListener('DOMContentLoaded', () => {
                console.log("DOM fully loaded. Initializing scripts...");

                // --- Global Variables & Elements ---
                const body = document.body;
                const loadingOverlay = document.getElementById('loading-overlay');
                const header = document.getElementById('main-header');
                const mobileMenuButton = document.getElementById('mobile-menu-button');
                const mobileMenu = document.getElementById('mobile-menu');
                const mobileMenuIcon = mobileMenuButton?.querySelector('i[data-lucide]');
                const themeToggle = document.getElementById('theme-toggle');
                const themeToggleMobile = document.getElementById('theme-toggle-mobile');
                const sunIconClass = 'fa-sun'; // Font Awesome class
                const moonIconClass = 'fa-moon'; // Font Awesome class
                const allNavLinks = document.querySelectorAll('.nav-link, .nav-link-mobile');
                const scrollSections = document.querySelectorAll('section[id]');

                // --- Loading Screen ---
                // Hide the loading overlay after a delay
                setTimeout(() => {
                    if (loadingOverlay) {
                        loadingOverlay.classList.add('hidden');
                        console.log("Loading overlay hidden.");
                    }
                }, 1500); // Reduced delay

                // --- Initialize Lucide Icons ---
                if (typeof lucide !== 'undefined') {
                    try {
                        lucide.createIcons();
                        console.log("Lucide icons initialized.");
                    } catch (e) {
                        console.error("Lucide icons initialization failed:", e);
                    }
                } else {
                    console.warn("Lucide library not found. Icons may not render.");
                }

                // --- Header Scroll Effect ---
                // Add a 'scrolled' class to the header when the page is scrolled down
                if (header) {
                    const scrollHandler = () => {
                        header.classList.toggle('scrolled', window.scrollY > 50);
                    };
                    window.addEventListener('scroll', scrollHandler, { passive: true }); // Use passive listener for performance
                    scrollHandler(); // Initial check
                }

                // --- Mobile Menu Toggle ---
                // Handle opening and closing the mobile navigation menu
                if (mobileMenuButton && mobileMenu && mobileMenuIcon) {
                    mobileMenuButton.addEventListener('click', () => {
                        const isHidden = mobileMenu.classList.toggle('hidden');
                        mobileMenuButton.setAttribute('aria-expanded', String(!isHidden));
                        // Change icon between menu and X
                        mobileMenuIcon.setAttribute('data-lucide', isHidden ? 'menu' : 'x');
                        try { lucide.createIcons({ nodes: [mobileMenuIcon.parentElement] }); } catch(e){ console.error("Error recreating lucide icon:", e); }
                    });
                    // Close mobile menu when a link is clicked
                    mobileMenu.querySelectorAll('a').forEach(link => {
                        link.addEventListener('click', () => {
                            if (!mobileMenu.classList.contains('hidden')) {
                                mobileMenu.classList.add('hidden');
                                mobileMenuButton.setAttribute('aria-expanded', 'false');
                                mobileMenuIcon.setAttribute('data-lucide', 'menu');
                                try { lucide.createIcons({ nodes: [mobileMenuIcon.parentElement] }); } catch(e){ console.error("Error recreating lucide icon:", e); }
                            }
                        });
                    });
                }

                // --- Theme Management ---
                // Function to apply the selected theme (light/dark)
                const applyTheme = (theme) => {
                    const isDark = theme === 'dark';
                    body.classList.toggle('dark-mode', isDark); // Add/remove dark-mode class to body
                    // Update theme toggle button icons
                    [themeToggle, themeToggleMobile].forEach(button => {
                        if (button) {
                            const icon = button.querySelector('i'); // Get Font Awesome icon
                            if (icon) {
                                icon.classList.remove(isDark ? moonIconClass : sunIconClass);
                                icon.classList.add(isDark ? sunIconClass : moonIconClass);
                            }
                        }
                    });
                    // Update particle theme if the function exists
                    if (typeof window.updateParticlesTheme === 'function') {
                         window.updateParticlesTheme(isDark);
                    }
                    console.log(`Theme applied: ${theme}`);
                };
                // Function to toggle the theme and save preference
                const toggleTheme = () => {
                    const newTheme = body.classList.contains('dark-mode') ? 'light' : 'dark';
                    localStorage.setItem('portfolioTheme', newTheme); // Save theme preference
                    applyTheme(newTheme);
                };
                // Load saved theme or default to light
                const currentTheme = localStorage.getItem('portfolioTheme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'); // Prefer system theme initially if no preference saved
                applyTheme(currentTheme);
                // Add event listeners to theme toggle buttons
                if (themeToggle) themeToggle.addEventListener('click', toggleTheme);
                if (themeToggleMobile) themeToggleMobile.addEventListener('click', toggleTheme);

                // --- Particle.js Initialization ---
                // Configuration for light and dark themes
                const particlesConfig = {
                    light: { particles: { color: { value: "#4f46e5" }, line_linked: { color: "#818cf8", opacity: 0.25 }, opacity: { value: 0.6 } }, interactivity: { modes: { bubble: { color: "#db2777", size: 5 } } } },
                    dark: { particles: { color: { value: "#818cf8" }, line_linked: { color: "#a78bfa", opacity: 0.18 }, opacity: { value: 0.45 } }, interactivity: { modes: { bubble: { color: "#f472b6", size: 5 } } } },
                    common: { particles: { number: { value: 60, density: { enable: true, value_area: 800 } }, shape: { type: "circle" }, size: { value: 2.5, random: true }, move: { enable: true, speed: 1.5, direction: "none", random: true, straight: false, out_mode: "out", bounce: false } }, interactivity: { detect_on: "canvas", events: { onhover: { enable: true, mode: "bubble" }, onclick: { enable: true, mode: "push" }, resize: true }, modes: { bubble: { distance: 120, duration: 2, opacity: 0.8 }, push: { particles_nb: 3 } } }, retina_detect: true }
                };
                // Function to initialize or update particles.js
                const initParticles = (theme) => {
                    const particlesElement = document.getElementById('particles-js');
                    if (typeof particlesJS !== 'undefined' && particlesElement) {
                        const config = JSON.parse(JSON.stringify(particlesConfig.common)); // Deep clone common config
                        const themeConfig = particlesConfig[theme];
                        // Deep merge theme-specific settings
                        Object.assign(config.particles.color, themeConfig.particles.color);
                        Object.assign(config.particles.line_linked, themeConfig.particles.line_linked);
                        Object.assign(config.particles.opacity, themeConfig.particles.opacity);
                        Object.assign(config.interactivity.modes.bubble, themeConfig.interactivity.modes.bubble);

                        particlesJS('particles-js', config); // Initialize particles.js
                        console.log(`particles.js initialized for ${theme} theme.`);
                    } else {
                        console.warn("particles.js library or #particles-js element not found.");
                        if(particlesElement) particlesElement.style.display = 'none'; // Hide if library fails
                    }
                };
                // Make update function global for theme switcher
                window.updateParticlesTheme = (isDark) => { initParticles(isDark ? 'dark' : 'light'); };
                // Initialize particles with the current theme
                initParticles(currentTheme === 'dark' ? 'dark' : 'light');


                // --- Typed.js Initialization ---
                // Initialize the typing animation for the subtitle
                const typedTarget = document.getElementById('typed-subtitle');
                if (typedTarget && typeof Typed !== 'undefined') {
                    try {
                        new Typed('#typed-subtitle', {
                            strings: ["Data Scientist", "Machine Learning Engineer", "IT Strategist", "Innovator", "Problem Solver", "Tech Enthusiast"],
                            typeSpeed: 60, // Slightly faster
                            backSpeed: 40,
                            backDelay: 2000,
                            loop: true,
                            smartBackspace: true,
                            cursorChar: '|' // Changed cursor
                        });
                        console.log("Typed.js initialized.");
                    } catch (error) {
                        console.error("Typed.js Error:", error);
                        typedTarget.textContent = 'Data Scientist | ML Engineer'; // Fallback text
                    }
                } else if (typedTarget) {
                    typedTarget.textContent = 'Data Scientist | ML Engineer'; // Fallback if Typed.js fails
                    console.warn("Typed.js library not found or target element missing.");
                }

                // --- Section Fade-in Animation ---
                // Use Intersection Observer to add 'visible' class when sections enter viewport
                const sections = document.querySelectorAll('.section-container');
                if ('IntersectionObserver' in window) {
                    const observerOptions = { root: null, rootMargin: '0px', threshold: 0.1 }; // Trigger slightly earlier
                    const observer = new IntersectionObserver((entries, observer) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                entry.target.classList.add('visible');
                                // Update progress bar when section becomes visible
                                if (typeof window.updateProgress === 'function') {
                                    window.updateProgress(entry.target.dataset.sectionName);
                                }
                                // Optionally unobserve after first reveal: observer.unobserve(entry.target);
                            }
                            // Optional: Remove 'visible' class when scrolling up
                            // else { entry.target.classList.remove('visible'); }
                        });
                    }, observerOptions);
                    sections.forEach(section => { if (section) observer.observe(section); });
                    console.log("Intersection Observer for section reveal initialized.");
                } else {
                    // Fallback for browsers without Intersection Observer
                    sections.forEach(section => section?.classList.add('visible'));
                    console.warn("Intersection Observer not supported, revealing all sections immediately.");
                }

                // --- Footer Current Year ---
                // Dynamically set the current year in the footer
                const yearSpan = document.getElementById('current-year');
                if (yearSpan) yearSpan.textContent = new Date().getFullYear();

                // --- Contact Form Submission Placeholder ---
                // Simulate form submission and provide feedback
                const contactForm = document.getElementById('contact-form');
                const formStatus = document.getElementById('form-status');
                if (contactForm && formStatus) {
                    contactForm.addEventListener('submit', (e) => {
                        e.preventDefault(); // Prevent actual form submission
                        formStatus.textContent = 'Processing... (Demo)';
                        formStatus.className = 'text-xs text-center mt-2 text-yellow-600 dark:text-yellow-400';
                        // Simulate sending delay
                        setTimeout(() => {
                            formStatus.textContent = 'Message Sent Successfully! (Demo - No backend)';
                            formStatus.className = 'text-xs text-center mt-2 text-green-600 dark:text-green-400';
                            contactForm.reset(); // Clear the form
                            // Fade out status message after a while
                            setTimeout(() => { formStatus.textContent = ''; }, 4000);
                        }, 1500);
                    });
                }

                 // --- AI Chat Widget Logic ---
                 const aiChatWidget = document.getElementById('ai-chat-widget');
                 const aiChatInput = document.getElementById('ai-chat-input');
                 const aiChatSendBtn = document.getElementById('ai-chat-send-btn');
                 const aiChatBody = document.getElementById('ai-chat-body');
                 const voiceInputBtn = document.getElementById('voice-input-btn');
                 const aiChatCloseBtn = document.getElementById('ai-chat-close-btn');
                 const aiChatMinimizeBtn = document.getElementById('ai-chat-minimize-btn');
                 const aiChatHeader = document.getElementById('ai-chat-header');
                 const aiRecommendation = document.getElementById('ai-recommendation');
                 const recommendationText = document.getElementById('recommendation-text');
                 const typingIndicator = document.getElementById('ai-typing-indicator');

                 // Show chat widget after a delay
                 setTimeout(() => { if(aiChatWidget) aiChatWidget.classList.add('visible'); }, 3000); // Slightly shorter delay

                 // Close button functionality
                 if (aiChatWidget && aiChatCloseBtn) {
                     aiChatCloseBtn.addEventListener('click', () => aiChatWidget.classList.remove('visible'));
                 }

                 // Minimize/Maximize button functionality
                 if (aiChatWidget && aiChatMinimizeBtn && aiChatHeader) {
                     aiChatMinimizeBtn.addEventListener('click', (e) => {
                         e.stopPropagation(); // Prevent header click event when clicking button
                         const isMinimized = aiChatWidget.classList.toggle('minimized');
                         const minIcon = aiChatMinimizeBtn.querySelector('.minimize-icon');
                         const maxIcon = aiChatMinimizeBtn.querySelector('.maximize-icon');
                         if (minIcon && maxIcon) {
                             minIcon.classList.toggle('hidden', isMinimized);
                             maxIcon.classList.toggle('hidden', !isMinimized);
                         }
                         aiChatMinimizeBtn.setAttribute('aria-label', isMinimized ? 'Maximize chat' : 'Minimize chat');
                         aiChatHeader.style.cursor = isMinimized ? 'pointer' : 'grab';
                     });
                     // Allow maximizing by clicking the header when minimized
                     aiChatHeader.addEventListener('click', () => {
                         if (aiChatWidget.classList.contains('minimized')) {
                             aiChatMinimizeBtn.click(); // Simulate click on the minimize/maximize button
                         }
                     });
                 }

                 // Send message functionality
                 if (aiChatSendBtn && aiChatInput && aiChatBody && typingIndicator) {
                     const sendChatMessage = () => {
                         const userMessage = aiChatInput.value.trim();
                         if (userMessage) {
                             // Display user message
                             const userMsgElement = document.createElement('p');
                             userMsgElement.textContent = userMessage;
                             userMsgElement.className = 'user-message';
                             aiChatBody.insertBefore(userMsgElement, typingIndicator); // Insert before typing indicator
                             aiChatInput.value = ''; // Clear input
                             aiChatBody.scrollTop = aiChatBody.scrollHeight; // Scroll down

                             // Show typing indicator
                             typingIndicator.style.display = 'flex';
                             aiChatBody.scrollTop = aiChatBody.scrollHeight;

                             // --- Simulated AI Response Logic ---
                             let aiResponse = "Thanks for reaching out! I can share details about Daniel's projects (like the GDP Model or Plant Detector), his technical skills (Python, ML, IT Management), or experience at Kingdom Hospital. How can I assist you further?";
                             let showRecommendation = false;
                             let recText = "";
                             const lowerUserMessage = userMessage.toLowerCase();

                             // Basic keyword matching for simulated responses
                             if (lowerUserMessage.includes('gdp') || lowerUserMessage.includes('economic')) {
                                 aiResponse = "The GDP Growth Prediction Model used time-series analysis (like ARIMA or LSTM) on economic indicators (inflation, rates, etc.) with Python (Pandas, Statsmodels, Scikit-learn). The goal was data-driven policy insights. It involved data cleaning, feature engineering, model selection (MAE/RMSE metrics), training, and interpretation.";
                                 showRecommendation = true;
                                 recText = "You might also find the 'InvestWise Predictor' project interesting, as it also deals with economic data.";
                             } else if (lowerUserMessage.includes('plant') || lowerUserMessage.includes('lazarus') || lowerUserMessage.includes('agriculture') || lowerUserMessage.includes('cnn')) {
                                  aiResponse = "Project Lazarus (AI Plant Disease Detector) employed Convolutional Neural Networks (CNNs) via TensorFlow/Keras for image recognition. Trained on 10k+ images, it involved augmentation, model design (maybe transfer learning like MobileNet), training, and achieved ~92% accuracy in identifying diseases like early blight, aiding farmers in early diagnosis.";
                                   showRecommendation = true;
                                   recText = "Check the 'Skills' section for TensorFlow/Deep Learning. The 'Capstone-Lazarus' GitHub repo has more details.";
                             } else if (lowerUserMessage.includes('investwise') || lowerUserMessage.includes('investment')) {
                                 aiResponse = "InvestWise Predictor (Work in Progress) aims to be a web platform analyzing regional investment viability in Kenya. It plans to use neural networks (MLPs/RNNs) on diverse data (economic, demographic, infrastructure). The challenge is integrating varied sources to predict investment potential scores, aiding investors/policymakers.";
                                 showRecommendation = true;
                                 recText = "This project combines Data Wrangling, Neural Networks, and potentially Web Dev skills.";
                             } else if (lowerUserMessage.includes('skill') || lowerUserMessage.includes('technolog') || lowerUserMessage.includes('expert')) {
                                 aiResponse = "Daniel's key skills include: \n• **Data Science/ML:** Python (Pandas, NumPy, Scikit-learn), TensorFlow/Keras, Predictive Modeling, Deep Learning (CNNs, RNNs), Visualization (Tableau, Matplotlib), Data Wrangling.\n• **IT:** System Admin (Linux), Networking, Troubleshooting, Cybersecurity, Disaster Recovery.\n• **Dev:** SQL, Frappe Framework, Git/GitHub.\n• **Soft Skills:** Problem-Solving, Leadership, Research, Communication.";
                             } else if (lowerUserMessage.includes('experience') || lowerUserMessage.includes('hospital') || lowerUserMessage.includes('webuye') || lowerUserMessage.includes('volunteer')) {
                                 aiResponse = "Volunteering at Kingdom Hospital (Jan 2023-Present) as Sr. IT Manager & Data Scientist, Daniel led IT ops, mentored interns, cut patient wait times by 35% using predictive models, implemented ERPNext (Frappe), and boosted cybersecurity. At Webuye District (Mar 2024), he digitized records, enhanced network security, and trained staff.";
                             } else if (lowerUserMessage.includes('contact') || lowerUserMessage.includes('email') || lowerUserMessage.includes('phone') || lowerUserMessage.includes('reach')) {
                                 aiResponse = "You can contact Daniel via email: dmwanjala254@gmail.com or phone: +254 742 007 277. The Contact section also has links to LinkedIn, GitHub, and WhatsApp.";
                             } else if (lowerUserMessage.includes('hello') || lowerUserMessage.includes('hi') || lowerUserMessage.includes('help') || lowerUserMessage.includes('?') || lowerUserMessage.includes('what can you do')) {
                                 aiResponse = "Hello there! I'm an AI assistant for Daniel Wanjala's portfolio. You can ask me about his specific projects (e.g., 'Tell me about the plant disease detector'), his skills ('What programming languages does he know?'), or his professional experience ('Where did he volunteer?').";
                             } else if (lowerUserMessage.includes('thank')) {
                                 aiResponse = "You're welcome! Let me know if anything else comes to mind.";
                             }

                             // Simulate AI thinking time
                             const delay = 800 + Math.random() * 700;
                             setTimeout(() => {
                                // Hide typing indicator
                                typingIndicator.style.display = 'none';

                                // Display AI response
                                const aiMsgElement = document.createElement('p');
                                aiMsgElement.textContent = aiResponse;
                                aiMsgElement.className = 'ai-message';
                                aiChatBody.insertBefore(aiMsgElement, typingIndicator); // Insert before indicator placeholder

                                // Show/hide recommendation box
                                if (aiRecommendation && recommendationText) {
                                    aiRecommendation.classList.toggle('hidden', !showRecommendation);
                                    if(showRecommendation) recommendationText.textContent = recText;
                                }
                                 aiChatBody.scrollTop = aiChatBody.scrollHeight; // Scroll down after adding message
                             }, delay);
                         }
                     };
                     // Event listeners for sending message
                     aiChatSendBtn.addEventListener('click', sendChatMessage);
                     aiChatInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') sendChatMessage(); });
                 }

                 // Voice input button (conceptual)
                 if (voiceInputBtn) {
                     voiceInputBtn.addEventListener('click', () => {
                        // Provide feedback that this is conceptual
                        const tempMsg = document.createElement('p');
                        tempMsg.textContent = "(Voice input is conceptual and requires browser API integration.)";
                        tempMsg.className = 'ai-message text-xs italic opacity-70';
                        aiChatBody.insertBefore(tempMsg, typingIndicator);
                        aiChatBody.scrollTop = aiChatBody.scrollHeight;
                        setTimeout(() => tempMsg.remove(), 3000); // Remove message after a few seconds
                     });
                 }
                 console.log("AI Chat Widget logic initialized.");

                // --- Skill Mastery Game Logic ---
                 const skillChallengeSubmit = document.getElementById('skill-challenge-submit');
                 const skillChallengeAnswer = document.getElementById('skill-challenge-answer');
                 const skillChallengeFeedback = document.getElementById('skill-challenge-feedback');
                 const skillBadges = document.querySelectorAll('.skill-badge');
                 const skillQuestions = [ // Add more questions
                     { q: "Which ML technique was central to the GDP prediction model?", a: ["time-series", "time series", "arima", "lstm"], skill: "timeseries" },
                     { q: "What type of neural network was used for plant disease detection?", a: ["cnn", "convolutional", "computer vision"], skill: "tensorflow" },
                     { q: "Which Python library is commonly used for data manipulation?", a: ["pandas"], skill: "python" },
                     { q: "What tool is mentioned for interactive data visualization?", a: ["tableau"], skill: "tableau" },
                     { q: "What area involves protecting networks and systems?", a: ["cybersecurity", "security"], skill: "cybersecurity" }
                 ];
                 let currentSkillQuestionIndex = 0;

                 // Function to display the current skill question
                 const displaySkillQuestion = () => {
                     const questionEl = document.getElementById('skill-challenge-question');
                     if(questionEl) {
                         questionEl.textContent = skillQuestions[currentSkillQuestionIndex].q;
                     }
                 };

                 // Function to unlock a skill badge
                 const unlockBadge = (skillName) => {
                     const badge = document.querySelector(`.skill-badge[data-skill="${skillName}"]`);
                     if (badge && !badge.classList.contains('unlocked')) {
                         badge.classList.remove('bg-gray-200', 'dark:bg-gray-600', 'text-gray-700', 'dark:text-gray-300');
                         badge.classList.add('unlocked', 'pulsate');
                         badge.title = `Unlocked: ${badge.title.split(':')[1] || skillName}`; // Keep original title description
                         const lockIcon = badge.querySelector('i[data-lucide="lock"]');
                         if (lockIcon) {
                             lockIcon.setAttribute('data-lucide', 'check-circle'); // Use check-circle
                             try { lucide.createIcons({ nodes: [lockIcon.parentElement] }); } catch(e) {}
                         }
                         // Remove pulsate animation after a short delay
                         setTimeout(() => badge.classList.remove('pulsate'), 2000);
                     }
                 };

                 if(skillChallengeSubmit && skillChallengeAnswer && skillChallengeFeedback) {
                     displaySkillQuestion(); // Display initial question
                     skillChallengeSubmit.addEventListener('click', () => {
                         const userAnswer = skillChallengeAnswer.value.toLowerCase().trim();
                         const currentQuestion = skillQuestions[currentSkillQuestionIndex];
                         let correct = false;

                         // Check if user answer matches any of the correct answers for the current question
                         currentQuestion.a.forEach(correctAnswer => {
                             if (userAnswer.includes(correctAnswer)) {
                                 correct = true;
                             }
                         });

                         if (correct) {
                             skillChallengeFeedback.textContent = "Correct! Badge Unlocked! ✨";
                             skillChallengeFeedback.className = 'text-sm mt-3 h-5 font-medium text-green-600 dark:text-green-400';
                             unlockBadge(currentQuestion.skill);

                             // Move to the next question or cycle back
                             currentSkillQuestionIndex = (currentSkillQuestionIndex + 1) % skillQuestions.length;
                             setTimeout(displaySkillQuestion, 1500); // Display next question after a delay

                         } else {
                             skillChallengeFeedback.textContent = "Not quite, try again or check the project/skill details!";
                             skillChallengeFeedback.className = 'text-sm mt-3 h-5 font-medium text-red-600 dark:text-red-400';
                         }
                         skillChallengeAnswer.value = ''; // Clear input field
                         // Clear feedback message after a few seconds
                         setTimeout(() => { skillChallengeFeedback.textContent = ''; }, 3000);
                     });
                     // Allow submitting with Enter key
                     skillChallengeAnswer.addEventListener('keypress', (e) => { if (e.key === 'Enter') skillChallengeSubmit.click(); });
                     console.log("Skill Mastery Game initialized.");
                 }

                 // --- ClipboardJS Initialization ---
                // Handle copying email address to clipboard
                if (typeof ClipboardJS !== 'undefined') {
                    const clipboard = new ClipboardJS('#copy-email-btn');
                    const toast = document.getElementById('clipboard-toast');
                    clipboard.on('success', (e) => {
                        if (toast) {
                            toast.textContent = 'Email copied!';
                            toast.classList.replace('bg-red-500','bg-green-500'); // Ensure correct color
                            toast.classList.remove('opacity-0');
                            setTimeout(() => { toast.classList.add('opacity-0'); }, 2500); // Hide after delay
                        }
                        e.clearSelection(); // Deselect text
                        console.log("Email copied to clipboard.");
                    });
                    clipboard.on('error', (e) => {
                        if (toast) {
                            toast.textContent = 'Failed to copy!';
                            toast.classList.replace('bg-green-500','bg-red-500'); // Show error color
                            toast.classList.remove('opacity-0');
                            setTimeout(() => { toast.classList.add('opacity-0'); }, 2500);
                        }
                        console.error("Failed to copy email:", e);
                    });
                } else {
                    console.warn("ClipboardJS library not found.");
                    const copyBtn = document.getElementById('copy-email-btn');
                    if(copyBtn) copyBtn.style.display = 'none'; // Hide button if library fails
                }

                // --- Rugby Ball Easter Egg ---
                // Add a fun alert when the rugby ball is clicked
                const rugbyBall = document.querySelector('footer .group span');
                if(rugbyBall) {
                    rugbyBall.addEventListener('click', () => {
                        alert("🏉 Fun Fact: Beyond the code and data, I have a strong passion for Rugby! 🏉");
                    });
                }

                // --- Konami Code Easter Egg ---
                 // Listen for the Konami code sequence to trigger a theme toggle
                 const konamiTrigger = document.getElementById('konami-trigger');
                 const konamiCode = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];
                 let konamiIndex = 0;
                 document.addEventListener('keydown', (e) => {
                     // Check if the pressed key matches the expected key in the sequence
                     if (e.key.toLowerCase() === konamiCode[konamiIndex]?.toLowerCase()) {
                         konamiIndex++; // Move to the next step in the sequence
                         // If the sequence is complete
                         if (konamiIndex === konamiCode.length) {
                             alert('Konami Code Activated! ✨ Theme Toggle!');
                             toggleTheme(); // Trigger the theme toggle function
                             konamiIndex = 0; // Reset the sequence index
                         }
                     } else {
                         konamiIndex = 0; // Reset if the wrong key is pressed
                     }
                 });
                 // Add a hint on clicking the trigger button
                 if(konamiTrigger) {
                     konamiTrigger.addEventListener('click', () => alert('Hint: ↑↑↓↓←→←→BA'));
                 }

                 // --- Welcome Back & Progress Tracking ---
                 // Track visited sections and show a welcome message
                 const welcomeMsgElement = document.getElementById('welcome-back-message');
                 const progressBarContainer = document.getElementById('user-progress-bar');
                 const progressBar = document.getElementById('user-progress');
                 const progressText = document.getElementById('user-progress-text');
                 let sectionsViewed = {};
                 const sectionElements = document.querySelectorAll('section[data-section-name]');
                 const totalSections = sectionElements.length;

                 // Function to update the progress bar (made global for Intersection Observer)
                 window.updateProgress = (sectionName) => {
                     if (!sectionName || sectionsViewed[sectionName] || totalSections === 0) return; // Exit if no name, already viewed, or no sections
                     sectionsViewed[sectionName] = true; // Mark section as viewed
                     const viewedCount = Object.keys(sectionsViewed).length;
                     const progressPercent = Math.min(100, Math.round((viewedCount / totalSections) * 100));

                     // Update progress bar UI elements
                     if(progressBarContainer && progressBar && progressText && progressPercent > 0) {
                         progressBarContainer.classList.remove('hidden');
                         progressBar.style.width = `${progressPercent}%`;
                         progressText.textContent = `Exploration: ${progressPercent}% viewed`;
                         if(progressPercent >= 100) {
                             progressText.textContent += " - All sections seen! 🎉";
                         }
                     }
                     // Save viewed sections to localStorage
                     try {
                         localStorage.setItem('sectionsViewed', JSON.stringify(sectionsViewed));
                     } catch(e) {
                         console.warn("localStorage interaction failed for progress tracking:", e);
                     }
                 };

                 // Initialize progress and welcome message on load
                 if (welcomeMsgElement && typeof localStorage !== 'undefined') {
                     try {
                         // Load viewed sections from localStorage
                         sectionsViewed = JSON.parse(localStorage.getItem('sectionsViewed') || '{}');
                         const initialViewedCount = Object.keys(sectionsViewed).length;
                         const initialProgressPercent = totalSections > 0 ? Math.min(100, Math.round((initialViewedCount / totalSections) * 100)) : 0;

                         // Update progress bar on load
                         if(progressBarContainer && progressBar && progressText && initialProgressPercent > 0) {
                             progressBarContainer.classList.remove('hidden');
                             progressBar.style.width = `${initialProgressPercent}%`;
                             progressText.textContent = `Exploration: ${initialProgressPercent}% viewed`;
                             if(initialProgressPercent >= 100) {
                                 progressText.textContent += " - All sections seen! 🎉";
                             }
                         }

                         // Update visit count and show welcome message
                         let visitCount = parseInt(localStorage.getItem('visitCount') || '0');
                         visitCount++;
                         localStorage.setItem('visitCount', visitCount.toString());
                         if (visitCount > 5) { welcomeMsgElement.textContent = "Welcome back, seasoned explorer!"; }
                         else if (visitCount > 1) { welcomeMsgElement.textContent = "Welcome back!"; }
                         console.log(`Visit count: ${visitCount}, Initial progress: ${initialProgressPercent}%`);
                     } catch(e) {
                         console.warn("localStorage interaction failed for welcome/progress init:", e);
                     }
                 }

                // --- Scrollspy ---
                // Highlight the current navigation link based on scroll position
                const activateLink = (targetId) => {
                    allNavLinks.forEach(link => {
                        // Check if the link's href matches the target section ID
                        link.classList.toggle('active', link.getAttribute('href') === `#${targetId}`);
                    });
                };

                if (scrollSections.length > 0 && "IntersectionObserver" in window) {
                    const headerHeight = header ? header.offsetHeight : 70; // Get header height or estimate
                    // Observer to watch sections entering/leaving the viewport
                    const scrollSpyObserver = new IntersectionObserver((entries) => {
                        let currentSectionId = '';
                        entries.forEach(entry => {
                            // If a section is intersecting near the top of the viewport
                            if (entry.isIntersecting && entry.boundingClientRect.top <= headerHeight + 150) { // Increased offset
                                currentSectionId = entry.target.getAttribute('id');
                            }
                        });

                        // Fallback: If no section is intersecting near the top, find the last one scrolled past
                        if (!currentSectionId) {
                            for (let i = scrollSections.length - 1; i >= 0; i--) {
                                if (window.scrollY >= scrollSections[i].offsetTop - headerHeight - 150) { // Increased offset
                                    currentSectionId = scrollSections[i].getAttribute('id');
                                    break;
                                }
                            }
                        }
                        // Default to 'home' if scrolled near the very top
                        if (window.scrollY < 300) { // Increased threshold for home
                             currentSectionId = 'home';
                        }

                        // Activate the corresponding nav link
                        if (currentSectionId) {
                            activateLink(currentSectionId);
                        }

                    }, {
                        rootMargin: `-${headerHeight}px 0px -55% 0px`, // Adjust rootMargin: top margin = negative header height, bottom margin = negative percentage of viewport height
                        threshold: 0 // Trigger as soon as any part enters/leaves the margin
                    });

                    // Observe all sections with IDs
                    scrollSections.forEach(section => { scrollSpyObserver.observe(section); });
                    // Activate the 'home' link initially
                    activateLink('home');
                    console.log("Scrollspy initialized.");
                } else {
                    console.warn("Scrollspy requires Intersection Observer support or sections with IDs were not found.");
                }


                console.log("Enhanced script execution complete.");
            }); // End DOMContentLoaded
        } catch (error) {
            // Catch any critical errors during script setup or execution
            console.error("A critical error occurred during script execution:", error);
            // Optionally display a message to the user
            // document.body.innerHTML = '<p style="color: red; padding: 20px;">An error occurred loading the page. Please try refreshing.</p>';
        }
    </script>
</body>
</html>
