<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daniel Wanjala - Data Scientist / ML Engineer</title>
    <link rel="icon" href="assets/favicon.ico" sizes="32x32">
    <link rel="icon" href="assets/favicon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="assets/apple-touch-icon.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&family=Satoshi:wght@400;500;700&family=Inter:wght@400;500&family=IBM+Plex+Sans:wght@400;500&family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>

    <style>
        /* Base body styles */
        body {
          font-family: 'Inter', 'IBM Plex Sans', sans-serif;
          overflow-x: hidden;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
          /* Noise pattern - applied via JS for theme change */
          background-attachment: fixed; /* Creates parallax effect */
        }
        html.dark body {
             background-attachment: fixed;
        }

        /* Font utility classes */
        .font-heading { font-family: 'Satoshi', 'Space Grotesk', 'Neue Montreal', sans-serif; }
        .font-body { font-family: 'Inter', 'IBM Plex Sans', sans-serif; }
        .font-mono { font-family: 'JetBrains Mono', 'Source Code Pro', monospace; }

        /* Custom Scrollbar Styling */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: theme('colors.sandstone'); }
        ::-webkit-scrollbar-thumb { background: theme('colors.accent'); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: theme('colors.accent-secondary'); }
        html.dark ::-webkit-scrollbar-track { background: theme('colors.dark-secondary-bg'); }
        html.dark ::-webkit-scrollbar-thumb { background: theme('colors.dark-accent'); }
        html.dark ::-webkit-scrollbar-thumb:hover { background: theme('colors.dark-accent-secondary'); }

        /* Basic shake animation */
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
          20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        .animate-shake { animation: shake 0.5s ease-in-out; }

        /* Smooth scrolling */
        html { scroll-behavior: smooth; }

        /* Modal Styles */
        #projectModal { transition: opacity 0.3s ease-in-out; }
        #projectModal.hidden-modal { opacity: 0; pointer-events: none; }
        #projectModal.visible-modal { opacity: 1; pointer-events: auto; }
        #projectModalContentWrapper { transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out; }
        #projectModal.hidden-modal #projectModalContentWrapper { transform: scale(0.9) translateY(20px); opacity: 0; }
        #projectModal.visible-modal #projectModalContentWrapper { transform: scale(1) translateY(0); opacity: 1; }

        /* Mobile Menu Transition */
        #mobile-menu {
            max-height: 0; overflow: hidden;
            transition: max-height 0.3s ease-out, opacity 0.3s ease-out; opacity: 0;
        }
        #mobile-menu.open { max-height: 500px; opacity: 1; }

        /* Tooltip Styles */
        .tooltip-container { position: relative; display: inline-block; }
        .tooltip-text {
            visibility: hidden; width: max-content; text-align: center; border-radius: 6px;
            padding: 5px 10px; position: absolute; z-index: 10; bottom: 125%; left: 50%;
            transform: translateX(-50%); opacity: 0; transition: opacity 0.3s; font-size: 0.75rem;
            background-color: theme('colors.tertiary-light');
            color: theme('colors.primary-text');
        }
        html.dark .tooltip-text {
            background-color: theme('colors.tertiary-dark');
            color: theme('colors.dark-primary-text');
        }
        .tooltip-container:hover .tooltip-text { visibility: visible; opacity: 1; }

        /* Scroll Reveal Animation Base */
        .reveal-hidden { opacity: 0; transform: translateY(30px); transition: opacity 0.8s ease-out, transform 0.8s ease-out; }
        .reveal-visible { opacity: 1; transform: translateY(0); }
        .reveal-slide-left { opacity: 0; transform: translateX(-50px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
        .reveal-slide-right { opacity: 0; transform: translateX(50px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
        .reveal-visible.slide-in { opacity: 1; transform: translateX(0); }
        /* Staggering delay added via JS */

        /* Navbar Underline */
        .nav-link.nav-active {
            @apply bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent;
        }
        .nav-link .active-underline {
             display: none; width: 0%; height: 2px;
             background-image: linear-gradient(to right, theme('colors.accent'), theme('colors.accent-secondary'));
             position: absolute; bottom: -2px; left: 50%; transform: translateX(-50%); transition: width 0.3s ease;
        }
        html.dark .nav-link .active-underline {
             background-image: linear-gradient(to right, theme('colors.dark-accent'), theme('colors.dark-accent-secondary'));
        }
        .nav-link.nav-active .active-underline { display: block !important; width: 60%; }

        /* Mobile active link */
        .mobile-nav-link.nav-active {
            background-image: linear-gradient(to right, theme('colors.accent/10'), theme('colors.accent-secondary/20'));
            color: theme('colors.accent') !important;
        }
        html.dark .mobile-nav-link.nav-active {
             background-image: linear-gradient(to right, theme('colors.dark-accent/10'), theme('colors.dark-accent-secondary/20'));
             color: theme('colors.dark-accent') !important;
        }

        /* --- Canvas Background --- */
        #particle-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            /* pointer-events: none; */ /* Removed to allow mouse interaction */
        }

         /* --- Main Content Container for Tilt --- */
        #main-content-container {
            perspective: 1000px;
            transition: transform 0.5s cubic-bezier(0.23, 1, 0.32, 1);
        }

        /* --- Preloader Styles (Loading Bar) --- */
        #preloader {
            position: fixed; inset: 0; background-color: #F7F7F7;
            z-index: 9999; display: flex; align-items: center; justify-content: center;
            opacity: 1; transition: opacity 0.5s ease-out 3.8s;
        }
        html.dark #preloader { background-color: #0B0C10; }
        #preloader.hidden { opacity: 0; pointer-events: none; }

        #loading-bar-container {
            width: 70%; max-width: 400px; height: 8px;
            background-color: rgba(108, 92, 231, 0.2);
            border-radius: 4px; overflow: hidden;
        }
        html.dark #loading-bar-container { background-color: rgba(102, 252, 241, 0.2); }

        #loading-bar {
            width: 100%; height: 100%;
            background-image: linear-gradient(to right, theme('colors.accent'), theme('colors.accent-secondary'));
            border-radius: 4px;
            transform: scaleX(0);
            transform-origin: left;
            animation: load 4s ease-out forwards;
        }
        html.dark #loading-bar {
             background-image: linear-gradient(to right, theme('colors.dark-accent'), theme('colors.dark-accent-secondary'));
        }
        @keyframes load {
            0% { transform: scaleX(0); }
            100% { transform: scaleX(1); }
        }

         /* --- Copy Toast Styles --- */
         #copy-toast {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            background-color: theme('colors.emerald-green'); color: white;
            padding: 10px 20px; border-radius: 20px; font-size: 0.9rem;
            z-index: 10000; opacity: 0; transition: opacity 0.3s ease-out, transform 0.3s ease-out;
            pointer-events: none;
        }
        #copy-toast.show { opacity: 1; transform: translateX(-50%) translateY(-10px); }

        /* --- Know More Button Style --- */
        .know-more-button {
            @apply inline-flex items-center justify-center px-6 py-2 mt-8 text-sm font-medium rounded-lg shadow-md transition-all duration-300 ease-out transform hover:-translate-y-1 hover:scale-103;
            @apply bg-gradient-to-r from-accent/80 to-accent-secondary/80 dark:from-dark-accent/80 dark:to-dark-accent-secondary/80 text-white dark:text-jet-black;
            @apply hover:from-accent hover:to-accent-secondary dark:hover:from-dark-accent dark:hover:to-dark-accent-secondary hover:shadow-lg;
        }
        .know-more-button i {
            @apply ml-2 h-4 w-4 transition-transform duration-300 group-hover:translate-x-1;
        }

        /* --- Section Title Hover Effect --- */
        section h2:hover {
            transform: skewX(-5deg) scale(1.02);
            transition: transform 0.3s ease-in-out;
        }

    </style>
    <script>
      // Tailwind Config - Extended with new theme colors
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            colors: {
              'jet-black': '#0B0C10', 'ghost-white': '#F7F7F7', 'signal-cyan': '#66FCF1',
              'tech-purple': '#6C5CE7', 'emerald-green': '#2ECC71', 'red-coral': '#FF6B6B',
              'sandstone': '#E0C097',
              // Base Theme
              'primary-bg': '#F7F7F7', 'primary-text': '#0B0C10', 'secondary-bg': '#E0C097',
              'secondary-text': '#4A4A4A', 'accent': '#6C5CE7', 'accent-secondary': '#FF6B6B',
              // Dark Theme
              'dark-primary-bg': '#0B0C10', 'dark-primary-text': '#F7F7F7', 'dark-secondary-bg': '#1F2833',
              'dark-secondary-text': '#C5C6C7', 'dark-accent': '#66FCF1', 'dark-accent-secondary': '#45A29E',
              // Tertiary Accents
              'tertiary-light': '#F5B041',
              'tertiary-dark': '#F39C12',
              // Tinted Glass Backgrounds
              'glass-light': 'rgba(225, 229, 255, 0.1)',
              'glass-dark': 'rgba(17, 24, 39, 0.2)',
              'glass-darker': 'rgba(17, 24, 39, 0.3)',
            },
            fontFamily: {
              heading: ['Satoshi', 'Space Grotesk', 'Neue Montreal', 'sans-serif'],
              body: ['Inter', 'IBM Plex Sans', 'sans-serif'],
              mono: ['JetBrains Mono', 'Source Code Pro', 'monospace'],
            },
            keyframes: {
               shake: {
                 '0%, 100%': { transform: 'translateX(0)' },
                 '10%, 30%, 50%, 70%, 90%': { transform: 'translateX(-5px)' },
                 '20%, 40%, 60%, 80%': { transform: 'translateX(5px)' },
               }
             },
             animation: {
               shake: 'shake 0.5s ease-in-out',
             }
          }
        }
      }
    </script>
    <script>
        // Immediately set theme and background noise
        (function() {
            const storedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const isDark = storedTheme === 'dark' || (!storedTheme && prefersDark);

            if (isDark) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }

            const noiseLight = "url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%239C92AC' fill-opacity='0.10' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'%3E%3C/path%3E%3C/svg%3E\")";
            const noiseDark = "url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%23C5C6C7' fill-opacity='0.05' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'%3E%3C/path%3E%3C/svg%3E\")";

             const setBgNoise = () => {
                document.body.style.backgroundImage = document.documentElement.classList.contains('dark') ? noiseDark : noiseLight;
             };

             if (document.body) {
                 setBgNoise();
             } else {
                 document.addEventListener('DOMContentLoaded', setBgNoise);
             }
        })();
    </script>
</head>
<body class="font-body bg-primary-bg text-primary-text dark:bg-dark-primary-bg dark:text-dark-primary-text min-h-screen relative overflow-x-hidden transition-colors duration-300">

    <div id="preloader">
        <div id="loading-bar-container">
            <div id="loading-bar"></div>
        </div>
    </div>

    <canvas id="particle-canvas"></canvas>

    <div id="scrollProgressBar" class="fixed top-0 left-0 right-0 h-1 bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary origin-left z-50" style="transform: scaleX(0);"></div>

    <header class="fixed top-0 left-0 right-0 z-40 transition-all duration-300 backdrop-blur-md bg-glass-light dark:bg-glass-dark border-b border-secondary-text/10 dark:border-dark-secondary-text/10">
       <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex-shrink-0">
                    <a href="#hero" class="text-xl font-bold bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent font-heading hover:opacity-80 transition-opacity">
                        Daniel Wanjala.
                    </a>
                    </div>
                <nav class="hidden md:flex space-x-6" id="desktop-nav">
                     <a href="#about" data-section="about" class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 relative text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text">
                        About <span class="active-underline"></span>
                    </a>
                     <a href="#skills" data-section="skills" class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 relative text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text">
                        Skills <span class="active-underline"></span>
                    </a>
                    <a href="#education" data-section="education" class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 relative text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text">
                        Education <span class="active-underline"></span>
                    </a>
                    <a href="#projects" data-section="projects" class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 relative text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text">
                        Projects <span class="active-underline"></span>
                    </a>
                    <a href="#essays" data-section="essays" class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 relative text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text">
                        Essays <span class="active-underline"></span>
                    </a>
                    <a href="#publications" data-section="publications" class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 relative text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text">
                        Publications <span class="active-underline"></span>
                    </a>
                    <a href="#demos" data-section="demos" class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 relative text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text">
                        Demos <span class="active-underline"></span>
                    </a>
                    <a href="#contact" data-section="contact" class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 relative text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text">
                        Contact <span class="active-underline"></span>
                    </a>
                </nav>
                <div class="flex items-center space-x-2">
                     <button id="theme-toggle" aria-label="Toggle Dark/Light Mode" class="p-2 rounded-full text-secondary-text dark:text-dark-secondary-text hover:text-accent dark:hover:text-dark-accent hover:bg-secondary-text/10 dark:hover:bg-dark-secondary-text/10 transition-colors duration-200">
                        <i id="theme-icon-sun" data-lucide="sun" class="h-5 w-5 hidden"></i>
                        <i id="theme-icon-moon" data-lucide="moon" class="h-5 w-5 hidden"></i>
                     </button>
                    <div class="md:hidden">
                        <button id="mobile-menu-button" class="inline-flex items-center justify-center p-2 rounded-md text-secondary-text dark:text-dark-secondary-text hover:text-accent dark:hover:text-dark-accent hover:bg-secondary-text/10 dark:hover:bg-dark-secondary-text/10 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-accent dark:focus:ring-dark-accent" aria-controls="mobile-menu" aria-expanded="false">
                            <span class="sr-only">Open main menu</span>
                            <svg id="menu-icon-open" class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                            <svg id="menu-icon-close" class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="md:hidden bg-glass-light dark:bg-glass-darker border-t border-secondary-text/10 dark:border-dark-secondary-text/10" id="mobile-menu">
             <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#hero" data-section="hero" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text">Hero</a>
                <a href="#about" data-section="about" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text">About</a>
                <a href="#skills" data-section="skills" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text">Skills</a>
                <a href="#education" data-section="education" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text">Education</a>
                <a href="#projects" data-section="projects" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text">Projects</a>
                <a href="#essays" data-section="essays" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text">Essays</a>
                <a href="#publications" data-section="publications" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text">Publications</a>
                <a href="#demos" data-section="demos" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text">Demos</a>
                <a href="#contact" data-section="contact" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text">Contact</a>
            </div>
        </div>
    </header>

    <div id="main-content-container">
        <main>
            <section id="hero" class="h-screen flex flex-col items-center justify-center text-center relative overflow-hidden px-4">
                <div class="absolute inset-0 bg-gradient-to-br from-primary-bg via-secondary-bg/50 to-primary-bg dark:from-dark-primary-bg dark:via-dark-secondary-bg/30 dark:to-dark-primary-bg opacity-80 z-0 transition-colors duration-300"></div>
                <svg class="absolute bottom-0 left-0 w-full h-32 text-secondary-bg/30 dark:text-dark-secondary-bg/30 z-0 opacity-50 transition-colors duration-300" preserveAspectRatio="none" viewBox="0 0 1440 320">
                    <path fill="currentColor" fill-opacity="1" d="M0,192L48,176C96,160,192,128,288,133.3C384,139,480,181,576,186.7C672,192,768,160,864,133.3C960,107,1056,85,1152,96C1248,107,1344,149,1392,170.7L1440,192L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path>
                </svg>

                <div class="relative z-10 reveal-hidden">
                    <h1 class="text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold mb-4 text-primary-text dark:text-dark-primary-text font-heading leading-tight tracking-tight">
                        I build data systems that <br class="hidden md:block" />
                        <span id="rotating-word-container" class="relative inline-block h-[1.2em] overflow-hidden align-bottom">
                            <span id="rotating-word" class="bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent inline-block">forecast</span>
                        </span>.
                    </h1>
                    <p class="text-lg md:text-xl text-secondary-text dark:text-dark-secondary-text mb-8 max-w-2xl mx-auto font-body leading-relaxed">
                        Machine learning meets real-world outcomes. From predictive insights to automated solutions.
                    </p>
                    <div class="flex flex-col sm:flex-row justify-center gap-4">
                        <a href="#projects" class="interactive-element group relative inline-flex items-center justify-center px-8 py-3 bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary text-white dark:text-jet-black font-semibold rounded-lg shadow-lg hover:shadow-accent/30 dark:hover:shadow-dark-accent/30 transition-all duration-300 ease-out overflow-hidden transform hover:-translate-y-1 hover:scale-103">
                            View My Work
                            <i data-lucide="arrow-right" class="ml-2 h-5 w-5 transform transition-transform duration-300 group-hover:translate-x-1"></i>
                        </a>
                        <a href="#contact" class="interactive-element group relative inline-flex items-center justify-center px-8 py-3 bg-transparent border-2 border-accent-secondary dark:border-dark-accent-secondary text-secondary-text dark:text-dark-secondary-text font-semibold rounded-lg shadow-md hover:shadow-accent-secondary/20 dark:hover:shadow-dark-accent-secondary/20 hover:bg-accent-secondary/10 dark:hover:bg-dark-accent-secondary/20 hover:text-primary-text dark:hover:text-dark-primary-text transition-all duration-300 ease-out overflow-hidden transform hover:-translate-y-1 hover:scale-103">
                            Get In Touch
                            <i data-lucide="mail" class="ml-2 h-5 w-5 transform transition-transform duration-300 group-hover:rotate-12"></i>
                        </a>
                    </div>
                </div>
                <div class="absolute bottom-10 left-1/2 transform -translate-x-1/2 z-10 animate-bounce">
                     <i data-lucide="chevron-down" class="w-6 h-6 text-accent-secondary dark:text-dark-accent-secondary"></i>
                </div>
            </section>

            <section id="about" class="min-h-screen w-full py-20 px-4 md:px-8 lg:px-16 bg-secondary-bg/30 dark:bg-dark-secondary-bg/30 reveal-hidden">
                <h2 class="text-4xl md:text-5xl font-bold mb-12 text-center bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent font-heading tracking-tight reveal-hidden">About Me: Data With A Pulse</h2>
                <div class="grid grid-cols-1 md:grid-cols-5 gap-12 items-center max-w-6xl mx-auto">
                    <div class="md:col-span-2 flex justify-center relative group reveal-hidden">
                         <div class="relative w-64 h-64 md:w-80 md:h-80 rounded-full overflow-hidden border-4 border-accent-secondary dark:border-dark-accent-secondary shadow-xl transition-all duration-300 hover:scale-105 hover:shadow-[0_0_25px_rgba(108,92,231,0.3)] dark:hover:shadow-[0_0_25px_rgba(102,252,241,0.3)]">
                            <img src="https://image-proxy.labnol.org/?url=https%3A%2F%2Flh3.googleusercontent.com%2Fa%2FACg8ocKz999-B81M89M5n0l6rW7-X9s7yV9z5H9f3Y1g6n8H%3Ds96-c" alt="Portrait of Daniel Wanjala" class="w-full h-full object-cover" loading="lazy" onerror="this.onerror=null;this.src='https://placehold.co/320x320/0B0C10/F7F7F7?text=Daniel+W.'">
                            <div class="absolute inset-0 rounded-full border-2 border-accent dark:border-dark-accent opacity-0 group-hover:opacity-50 animate-pulse"></div>
                        </div>
                    </div>
                    <div class="md:col-span-3 reveal-hidden">
                        <p class="text-lg md:text-xl text-secondary-text dark:text-dark-secondary-text mb-6 leading-relaxed font-body">
                            Hi, I'm Daniel Wanjala, a passionate <strong class="text-accent dark:text-dark-accent">Data Scientist and ML Engineer</strong> based near Nairobi, Kenya. My journey spans IT management and deep dives into data, driven by a belief in technology's power to solve real-world problems.
                        </p>
                        <p class="text-lg md:text-xl text-secondary-text dark:text-dark-secondary-text mb-8 leading-relaxed font-body">
                            Whether optimizing hospital operations with predictive analytics or building forecasting models, I focus on creating <strong class="text-accent dark:text-dark-accent">data systems that deliver tangible outcomes</strong>. I thrive on transforming complex data into actionable insights and robust applications. Currently pursuing an MSc in Data Science to further sharpen my expertise.
                        </p>
                        <div class="flex flex-wrap gap-4">
                            <div class="tooltip-container reveal-hidden" style="transition-delay: 0.1s;">
                                 <div class="flex items-center bg-glass-light dark:bg-glass-dark backdrop-blur-sm text-primary-text dark:text-dark-primary-text px-4 py-2 rounded-lg shadow-md border border-secondary-text/10 dark:border-dark-secondary-text/20">
                                    <i data-lucide="briefcase" class="w-5 h-5 mr-2 text-accent dark:text-dark-accent"></i>
                                    <span>Senior IT Manager</span>
                                 </div>
                                 <span class="tooltip-text">Kingdom Hospital, Webuye</span>
                            </div>
                             <div class="tooltip-container reveal-hidden" style="transition-delay: 0.2s;">
                                 <div class="flex items-center bg-glass-light dark:bg-glass-dark backdrop-blur-sm text-primary-text dark:text-dark-primary-text px-4 py-2 rounded-lg shadow-md border border-secondary-text/10 dark:border-dark-secondary-text/20">
                                    <i data-lucide="brain-circuit" class="w-5 h-5 mr-2 text-accent dark:text-dark-accent"></i>
                                    <span>Data Scientist</span>
                                 </div>
                                 <span class="tooltip-text">Volunteer @ Kingdom Hospital</span>
                            </div>
                             <div class="tooltip-container reveal-hidden" style="transition-delay: 0.3s;">
                                 <div class="flex items-center bg-glass-light dark:bg-glass-dark backdrop-blur-sm text-primary-text dark:text-dark-primary-text px-4 py-2 rounded-lg shadow-md border border-secondary-text/10 dark:border-dark-secondary-text/20">
                                    <i data-lucide="graduation-cap" class="w-5 h-5 mr-2 text-accent dark:text-dark-accent"></i>
                                    <span>MSc. Student</span>
                                 </div>
                                  <span class="tooltip-text">Cooperative University Kenya</span>
                            </div>
                        </div>
                    </div>
                </div>
                 <div class="text-center mt-12 reveal-hidden">
                    <a href="about.html" class="know-more-button group">
                        Learn More About Me
                        <i data-lucide="arrow-right"></i>
                    </a>
                </div>
            </section>

            <section id="skills" class="min-h-screen w-full py-20 px-4 md:px-8 lg:px-16 bg-primary-bg dark:bg-dark-primary-bg reveal-hidden">
                <h2 class="text-4xl md:text-5xl font-bold mb-12 text-center bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent font-heading tracking-tight reveal-hidden">Core Competencies</h2>
                <div class="max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="skill-card bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 shadow-lg reveal-hidden hover:shadow-xl transition-shadow duration-300">
                        <div class="flex items-center mb-4">
                            <i data-lucide="code-2" class="w-8 h-8 mr-3 text-accent dark:text-dark-accent"></i>
                            <h3 class="text-xl font-semibold text-primary-text dark:text-dark-primary-text font-heading">Programming & Data</h3>
                        </div>
                        <ul class="space-y-2 text-secondary-text dark:text-dark-secondary-text font-body text-sm">
                            <li class="flex items-center"><i data-lucide="check-circle" class="w-4 h-4 mr-2 text-emerald-green"></i> Python (Pandas, NumPy, Scikit-learn)</li>
                            <li class="flex items-center"><i data-lucide="check-circle" class="w-4 h-4 mr-2 text-emerald-green"></i> SQL & Database Management</li>
                            <li class="flex items-center"><i data-lucide="check-circle" class="w-4 h-4 mr-2 text-emerald-green"></i> Data Wrangling & Cleaning</li>
                            <li class="flex items-center"><i data-lucide="check-circle" class="w-4 h-4 mr-2 text-emerald-green"></i> API Integration</li>
                            <li class="flex items-center"><i data-lucide="check-circle" class="w-4 h-4 mr-2 text-emerald-green"></i> Git & Version Control</li>
                        </ul>
                    </div>
                    <div class="skill-card bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 shadow-lg reveal-hidden hover:shadow-xl transition-shadow duration-300" style="transition-delay: 100ms;">
                        <div class="flex items-center mb-4">
                            <i data-lucide="brain-circuit" class="w-8 h-8 mr-3 text-accent dark:text-dark-accent"></i>
                            <h3 class="text-xl font-semibold text-primary-text dark:text-dark-primary-text font-heading">Machine Learning & AI</h3>
                        </div>
                        <ul class="space-y-2 text-secondary-text dark:text-dark-secondary-text font-body text-sm">
                            <li class="flex items-center"><i data-lucide="check-circle" class="w-4 h-4 mr-2 text-emerald-green"></i> Predictive Modeling (Regression, Classification)</li>
                            <li class="flex items-center"><i data-lucide="check-circle" class="w-4 h-4 mr-2 text-emerald-green"></i> Time Series Forecasting (ARIMA, Prophet)</li>
                            <li class="flex items-center"><i data-lucide="check-circle" class="w-4 h-4 mr-2 text-emerald-green"></i> Neural Networks (TensorFlow/Keras)</li>
                            <li class="flex items-center"><i data-lucide="check-circle" class="w-4 h-4 mr-2 text-emerald-green"></i> Computer Vision Basics (OpenCV)</li>
                            <li class="flex items-center"><i data-lucide="check-circle" class="w-4 h-4 mr-2 text-emerald-green"></i> Model Deployment (Flask/Streamlit Basics)</li>
                        </ul>
                    </div>
                    <div class="skill-card bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 shadow-lg reveal-hidden hover:shadow-xl transition-shadow duration-300" style="transition-delay: 200ms;">
                        <div class="flex items-center mb-4">
                            <i data-lucide="bar-chart-3" class="w-8 h-8 mr-3 text-accent dark:text-dark-accent"></i>
                            <h3 class="text-xl font-semibold text-primary-text dark:text-dark-primary-text font-heading">Visualization & Tools</h3>
                        </div>
                        <ul class="space-y-2 text-secondary-text dark:text-dark-secondary-text font-body text-sm">
                            <li class="flex items-center"><i data-lucide="check-circle" class="w-4 h-4 mr-2 text-emerald-green"></i> Matplotlib & Seaborn</li>
                            <li class="flex items-center"><i data-lucide="check-circle" class="w-4 h-4 mr-2 text-emerald-green"></i> Plotly & Dash (Basic)</li>
                            <li class="flex items-center"><i data-lucide="check-circle" class="w-4 h-4 mr-2 text-emerald-green"></i> Jupyter Notebooks & Google Colab</li>
                            <li class="flex items-center"><i data-lucide="check-circle" class="w-4 h-4 mr-2 text-emerald-green"></i> Cloud Platforms (GCP/AWS Basics)</li>
                            <li class="flex items-center"><i data-lucide="check-circle" class="w-4 h-4 mr-2 text-emerald-green"></i> ERP Systems (Frappe/ERPNext)</li>
                        </ul>
                    </div>
                </div>
                 <div class="text-center mt-12 reveal-hidden">
                    <a href="skills.html" class="know-more-button group">
                        Explore My Skillset
                        <i data-lucide="arrow-right"></i>
                    </a>
                </div>
            </section>

            <section id="education" class="min-h-screen w-full py-20 px-4 md:px-8 lg:px-16 bg-secondary-bg/30 dark:bg-dark-secondary-bg/30 reveal-hidden">
                <h2 class="text-4xl md:text-5xl font-bold mb-12 text-center bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent font-heading tracking-tight reveal-hidden">Educational Journey</h2>
                <div class="max-w-4xl mx-auto space-y-10">
                    <div class="education-item relative pl-10 pb-8 border-l-2 border-accent dark:border-dark-accent reveal-slide-left">
                        <div class="absolute -left-[11px] top-0 w-5 h-5 bg-accent dark:bg-dark-accent rounded-full border-4 border-secondary-bg dark:border-dark-secondary-bg"></div>
                        <span class="absolute left-10 -top-3 text-xs font-mono text-accent-secondary dark:text-dark-accent-secondary bg-secondary-bg dark:bg-dark-secondary-bg px-2 py-0.5 rounded">2024 – Present (Part-Time)</span>
                        <h3 class="text-xl md:text-2xl font-semibold mb-1 text-primary-text dark:text-dark-primary-text font-heading">Master of Science in Data Science</h3>
                        <p class="text-md font-medium text-secondary-text dark:text-dark-secondary-text mb-2">Cooperative University of Kenya</p>
                        <p class="text-sm text-secondary-text dark:text-dark-secondary-text font-body leading-relaxed">
                            Currently pursuing advanced training in machine learning, statistical modeling, and data-driven research methodologies. Admitted with special approval into the late September intake based on prior experience and proven competencies in Data Science.
                        </p>
                    </div>
                    <div class="education-item relative pl-10 pb-8 border-l-2 border-accent dark:border-dark-accent reveal-slide-right">
                         <div class="absolute -left-[11px] top-0 w-5 h-5 bg-accent dark:bg-dark-accent rounded-full border-4 border-secondary-bg dark:border-dark-secondary-bg"></div>
                        <span class="absolute left-10 -top-3 text-xs font-mono text-accent-secondary dark:text-dark-accent-secondary bg-secondary-bg dark:bg-dark-secondary-bg px-2 py-0.5 rounded">Apr 2023 – Nov 2023</span>
                        <h3 class="text-xl md:text-2xl font-semibold mb-1 text-primary-text dark:text-dark-primary-text font-heading">Certificate in Data Science & Machine Learning</h3>
                        <p class="text-md font-medium text-secondary-text dark:text-dark-secondary-text mb-2">Moringa School, Nairobi</p>
                        <p class="text-sm text-secondary-text dark:text-dark-secondary-text font-body leading-relaxed">
                            A project-based, immersive program focusing on predictive analytics, neural networks, data wrangling, model deployment, and real-world applications in healthcare and business intelligence.
                        </p>
                    </div>
                    <div class="education-item relative pl-10 pb-8 border-l-2 border-accent dark:border-dark-accent reveal-slide-left">
                         <div class="absolute -left-[11px] top-0 w-5 h-5 bg-accent dark:bg-dark-accent rounded-full border-4 border-secondary-bg dark:border-dark-secondary-bg"></div>
                        <span class="absolute left-10 -top-3 text-xs font-mono text-accent-secondary dark:text-dark-accent-secondary bg-secondary-bg dark:bg-dark-secondary-bg px-2 py-0.5 rounded">May 2019 – Nov 2022</span>
                        <h3 class="text-xl md:text-2xl font-semibold mb-1 text-primary-text dark:text-dark-primary-text font-heading">Bachelor of Science in Information Technology</h3>
                        <p class="text-md font-medium text-secondary-text dark:text-dark-secondary-text mb-2">Zetech University, Kenya</p>
                        <p class="text-sm text-secondary-text dark:text-dark-secondary-text font-body leading-relaxed">
                            Specialized in software development, data structures, networking, and system integration. Graduated with a strong foundation in IT infrastructure, system design, and technical leadership.
                        </p>
                    </div>
                    <div class="education-item relative pl-10 pb-8 border-l-2 border-accent dark:border-dark-accent reveal-slide-right">
                         <div class="absolute -left-[11px] top-0 w-5 h-5 bg-accent dark:bg-dark-accent rounded-full border-4 border-secondary-bg dark:border-dark-secondary-bg"></div>
                         <span class="absolute left-10 -top-3 text-xs font-mono text-accent-secondary dark:text-dark-accent-secondary bg-secondary-bg dark:bg-dark-secondary-bg px-2 py-0.5 rounded">Graduated 2018</span>
                        <h3 class="text-xl md:text-2xl font-semibold mb-1 text-primary-text dark:text-dark-primary-text font-heading">Kenya Certificate of Secondary Education (KCSE)</h3>
                        <p class="text-md font-medium text-secondary-text dark:text-dark-secondary-text mb-2">St. Anthony’s Boys High School, Kitale</p>
                        <p class="text-sm text-secondary-text dark:text-dark-secondary-text font-body leading-relaxed">
                            Completed with a focus on sciences and mathematics, building the analytical mindset that would later shape a career in data and technology. (Also Alumni and Tutorial Fellow - Part-Time Applicant).
                        </p>
                    </div>
                </div>
                 <div class="text-center mt-12 reveal-hidden">
                    <a href="education.html" class="know-more-button group">
                        View Education Details
                        <i data-lucide="arrow-right"></i>
                    </a>
                </div>
            </section>

            <section id="projects" class="min-h-screen w-full py-20 px-4 md:px-8 lg:px-16 bg-primary-bg dark:bg-dark-primary-bg reveal-hidden">
                <h2 class="text-4xl md:text-5xl font-bold mb-12 text-center bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent font-heading tracking-tight reveal-hidden">Projects: Work That Talks Back</h2>
                <div class="columns-1 md:columns-2 lg:columns-3 gap-6 max-w-7xl mx-auto">
                    <article class="project-card interactive-element relative rounded-xl overflow-hidden shadow-lg cursor-pointer bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 group break-inside-avoid mb-6 reveal-hidden transition-transform duration-300 hover:-translate-y-1" data-project-id="1">
                         <div class="absolute top-0 left-0 h-1 w-full bg-gradient-to-r from-blue-500 to-blue-400 z-10"></div>
                        <div class="relative h-48 w-full">
                            <img src="https://placehold.co/600x400/0B0C10/F7F7F7?text=GDP+Model" alt="GDP Growth Prediction Model" class="project-image absolute inset-0 w-full h-full object-cover transition-opacity duration-500" loading="lazy" data-original-src="https://placehold.co/600x400/0B0C10/F7F7F7?text=GDP+Model" data-alt-src="https://placehold.co/600x400/66FCF1/0B0C10?text=GDP+Viz" onerror="this.onerror=null;this.src='https://placehold.co/600x400/0B0C10/F7F7F7?text=Image+Error'">
                        </div>
                        <div class="p-6 text-primary-text dark:text-dark-primary-text">
                            <h3 class="text-xl font-semibold mb-2 font-heading text-accent dark:text-dark-accent">GDP Growth Prediction Model</h3>
                            <p class="text-sm mb-3 text-secondary-text dark:text-dark-secondary-text font-body">Developed a machine learning model to predict annual GDP growth using economic indicators.</p>
                            <div class="flex flex-wrap gap-2">
                                <span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">Finance</span>
                                <span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">AI</span>
                                <span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">Python</span>
                            </div>
                        </div>
                        <div class="absolute inset-0 bg-gradient-to-t from-primary-bg/80 dark:from-dark-primary-bg/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="absolute bottom-4 left-4 text-accent dark:text-dark-accent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center text-sm">
                            View Project <i data-lucide="arrow-right" class="ml-1 h-4 w-4"></i>
                        </div>
                    </article>
                    <article class="project-card interactive-element relative rounded-xl overflow-hidden shadow-lg cursor-pointer bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 group break-inside-avoid mb-6 reveal-hidden transition-transform duration-300 hover:-translate-y-1" data-project-id="2">
                        <div class="absolute top-0 left-0 h-1 w-full bg-gradient-to-r from-emerald-500 to-emerald-400 z-10"></div>
                        <div class="relative h-48 w-full">
                            <img src="https://placehold.co/600x400/0B0C10/F7F7F7?text=Plant+AI" alt="AI-Driven Plant Disease Detection" class="project-image absolute inset-0 w-full h-full object-cover transition-opacity duration-500" loading="lazy" data-original-src="https://placehold.co/600x400/0B0C10/F7F7F7?text=Plant+AI" data-alt-src="https://placehold.co/600x400/66FCF1/0B0C10?text=Plant+Viz" onerror="this.onerror=null;this.src='https://placehold.co/600x400/0B0C10/F7F7F7?text=Image+Error'">
                        </div>
                         <div class="p-6 text-primary-text dark:text-dark-primary-text">
                            <h3 class="text-xl font-semibold mb-2 font-heading text-accent dark:text-dark-accent">AI-Driven Plant Disease Detection</h3>
                            <p class="text-sm mb-3 text-secondary-text dark:text-dark-secondary-text font-body">Collaboratively developed an advanced plant disease detection system using image processing.</p>
                            <div class="flex flex-wrap gap-2">
                                <span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">Health</span>
                                <span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">AI</span>
                                <span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">CV</span>
                            </div>
                        </div>
                         <div class="absolute inset-0 bg-gradient-to-t from-primary-bg/80 dark:from-dark-primary-bg/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="absolute bottom-4 left-4 text-accent dark:text-dark-accent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center text-sm">
                            View Project <i data-lucide="arrow-right" class="ml-1 h-4 w-4"></i>
                        </div>
                    </article>
                    <article class="project-card interactive-element relative rounded-xl overflow-hidden shadow-lg cursor-pointer bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 group break-inside-avoid mb-6 reveal-hidden transition-transform duration-300 hover:-translate-y-1" data-project-id="3">
                       <div class="absolute top-0 left-0 h-1 w-full bg-gradient-to-r from-red-500 to-red-400 z-10"></div>
                        <div class="relative h-48 w-full">
                             <img src="https://placehold.co/600x400/0B0C10/F7F7F7?text=Kenya+GDP" alt="Kenya's GDP Forecasting Tool" class="project-image absolute inset-0 w-full h-full object-cover transition-opacity duration-500" loading="lazy" data-original-src="https://placehold.co/600x400/0B0C10/F7F7F7?text=Kenya+GDP" data-alt-src="https://placehold.co/600x400/66FCF1/0B0C10?text=Kenya+Viz" onerror="this.onerror=null;this.src='https://placehold.co/600x400/0B0C10/F7F7F7?text=Image+Error'">
                        </div>
                          <div class="p-6 text-primary-text dark:text-dark-primary-text">
                            <h3 class="text-xl font-semibold mb-2 font-heading text-accent dark:text-dark-accent">Kenya's GDP Forecasting Tool</h3>
                            <p class="text-sm mb-3 text-secondary-text dark:text-dark-secondary-text font-body">Developed a forecasting tool to analyze and predict Kenya's GDP trends.</p>
                            <div class="flex flex-wrap gap-2">
                                <span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">Finance</span>
                                <span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">TimeSeries</span>
                                <span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">Python</span>
                            </div>
                        </div>
                         <div class="absolute inset-0 bg-gradient-to-t from-primary-bg/80 dark:from-dark-primary-bg/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="absolute bottom-4 left-4 text-accent dark:text-dark-accent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center text-sm">
                            View Project <i data-lucide="arrow-right" class="ml-1 h-4 w-4"></i>
                        </div>
                    </article>
                    <article class="project-card interactive-element relative rounded-xl overflow-hidden shadow-lg cursor-pointer bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 group break-inside-avoid mb-6 reveal-hidden transition-transform duration-300 hover:-translate-y-1" data-project-id="4">
                       <div class="absolute top-0 left-0 h-1 w-full bg-gradient-to-r from-purple-500 to-purple-400 z-10"></div>
                        <div class="relative h-48 w-full">
                            <img src="https://placehold.co/600x400/0B0C10/F7F7F7?text=InvestWise" alt="InvestWise Predictor" class="project-image absolute inset-0 w-full h-full object-cover transition-opacity duration-500" loading="lazy" data-original-src="https://placehold.co/600x400/0B0C10/F7F7F7?text=InvestWise" data-alt-src="https://placehold.co/600x400/66FCF1/0B0C10?text=Invest+Viz" onerror="this.onerror=null;this.src='https://placehold.co/600x400/0B0C10/F7F7F7?text=Image+Error'">
                        </div>
                         <div class="p-6 text-primary-text dark:text-dark-primary-text">
                            <h3 class="text-xl font-semibold mb-2 font-heading text-accent dark:text-dark-accent">InvestWise Predictor</h3>
                            <p class="text-sm mb-3 text-secondary-text dark:text-dark-secondary-text font-body">Intelligent online tool using neural networks to predict investment opportunities in Kenya.</p>
                            <div class="flex flex-wrap gap-2">
                                 <span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">Finance</span>
                                 <span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">AI</span>
                                 <span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">Web</span>
                            </div>
                        </div>
                         <div class="absolute inset-0 bg-gradient-to-t from-primary-bg/80 dark:from-dark-primary-bg/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="absolute bottom-4 left-4 text-accent dark:text-dark-accent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center text-sm">
                            View Project <i data-lucide="arrow-right" class="ml-1 h-4 w-4"></i>
                        </div>
                    </article>
                    <article class="project-card interactive-element relative rounded-xl overflow-hidden shadow-lg cursor-pointer bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 group break-inside-avoid mb-6 reveal-hidden transition-transform duration-300 hover:-translate-y-1" data-project-id="5">
                       <div class="absolute top-0 left-0 h-1 w-full bg-gradient-to-r from-yellow-500 to-yellow-400 z-10"></div>
                        <div class="relative h-48 w-full">
                            <img src="https://placehold.co/600x400/0B0C10/F7F7F7?text=Netflix+Stock" alt="Netflix Stock Profit Analysis" class="project-image absolute inset-0 w-full h-full object-cover transition-opacity duration-500" loading="lazy" data-original-src="https://placehold.co/600x400/0B0C10/F7F7F7?text=Netflix+Stock" data-alt-src="https://placehold.co/600x400/66FCF1/0B0C10?text=Netflix+Viz" onerror="this.onerror=null;this.src='https://placehold.co/600x400/0B0C10/F7F7F7?text=Image+Error'">
                        </div>
                          <div class="p-6 text-primary-text dark:text-dark-primary-text">
                            <h3 class="text-xl font-semibold mb-2 font-heading text-accent dark:text-dark-accent">Netflix Stock Profit Analysis</h3>
                            <p class="text-sm mb-3 text-secondary-text dark:text-dark-secondary-text font-body">Analyzed Netflix's stock performance to identify profit trends and patterns.</p>
                            <div class="flex flex-wrap gap-2">
                                <span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">Finance</span>
                                <span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">Analysis</span>
                                <span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">Python</span>
                            </div>
                        </div>
                         <div class="absolute inset-0 bg-gradient-to-t from-primary-bg/80 dark:from-dark-primary-bg/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="absolute bottom-4 left-4 text-accent dark:text-dark-accent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center text-sm">
                            View Project <i data-lucide="arrow-right" class="ml-1 h-4 w-4"></i>
                        </div>
                    </article>
                </div>
                <div class="text-center mt-12 reveal-hidden">
                    <a href="projects.html" class="know-more-button group">
                        See All Projects
                        <i data-lucide="arrow-right"></i>
                    </a>
                </div>
            </section>

            <section id="essays" class="min-h-screen w-full py-20 px-4 md:px-8 lg:px-16 bg-secondary-bg/30 dark:bg-dark-secondary-bg/30 reveal-hidden">
                <h2 class="text-4xl md:text-5xl font-bold mb-12 text-center bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent font-heading tracking-tight reveal-hidden">Essays: Thinking in Algorithms</h2>
                <div class="max-w-3xl mx-auto">
                    <article class="essay-card interactive-element bg-glass-light dark:bg-glass-dark border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 mb-6 shadow-lg relative overflow-hidden group reveal-slide-left">
                         <span class="absolute top-4 right-4 text-xs bg-accent-secondary/20 dark:bg-dark-accent-secondary/70 text-accent-secondary dark:text-sandstone px-2 py-1 rounded-full font-mono uppercase tracking-widest">Ethics</span>
                        <h3 class="text-xl font-semibold mb-2 text-accent dark:text-dark-accent font-heading">The Ethics of Algorithmic Decision Making</h3>
                        <p class="text-secondary-text dark:text-dark-secondary-text text-sm mb-3 font-body">Exploring the biases and societal impacts...</p>
                        <div class="flex justify-between items-center text-xs text-secondary-text dark:text-dark-secondary-text/80">
                            <span class="font-mono">7 min read</span>
                            <p class="text-accent dark:text-sandstone italic opacity-0 group-hover:opacity-100 transition-opacity duration-300">"Bias in, bias out."</p>
                        </div>
                        <div class="essay-progress-bar absolute bottom-0 left-0 h-1 bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary w-0 group-hover:w-full transition-all duration-500 ease-in-out"></div>
                    </article>
                    <article class="essay-card interactive-element bg-glass-light dark:bg-glass-dark border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 mb-6 shadow-lg relative overflow-hidden group reveal-slide-right">
                         <span class="absolute top-4 right-4 text-xs bg-accent-secondary/20 dark:bg-dark-accent-secondary/70 text-accent-secondary dark:text-sandstone px-2 py-1 rounded-full font-mono uppercase tracking-widest">Infrastructure</span>
                        <h3 class="text-xl font-semibold mb-2 text-accent dark:text-dark-accent font-heading">Scaling Machine Learning Infrastructure</h3>
                        <p class="text-secondary-text dark:text-dark-secondary-text text-sm mb-3 font-body">Challenges and solutions for deploying ML models...</p>
                        <div class="flex justify-between items-center text-xs text-secondary-text dark:text-dark-secondary-text/80">
                            <span class="font-mono">10 min read</span>
                             <p class="text-accent dark:text-sandstone italic opacity-0 group-hover:opacity-100 transition-opacity duration-300">"MLOps is key."</p>
                        </div>
                         <div class="essay-progress-bar absolute bottom-0 left-0 h-1 bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary w-0 group-hover:w-full transition-all duration-500 ease-in-out"></div>
                    </article>
                 </div>
                 <div class="text-center mt-12 reveal-hidden">
                    <a href="essays.html" class="know-more-button group">
                        Read More Essays
                        <i data-lucide="arrow-right"></i>
                    </a>
                </div>
            </section>

            <section id="publications" class="min-h-screen w-full py-20 px-4 md:px-8 lg:px-16 bg-primary-bg dark:bg-dark-primary-bg reveal-hidden">
                <h2 class="text-4xl md:text-5xl font-bold mb-12 text-center bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent font-heading tracking-tight reveal-hidden">Publications & Articles</h2>
                <div class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-6 lg:gap-8">
                    <a href="https://www.linkedin.com/pulse/logarithms-algorithms-invisible-engines-ai-data-science-wanjala-u9qgf/?trackingId=nX28LhJOSLauFfN5YIOsHQ%3D%3D" target="_blank" rel="noopener noreferrer" class="interactive-element publication-card block bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300 reveal-hidden" data-reveal-delay="0">
                        <h3 class="text-lg font-semibold mb-2 text-accent dark:text-dark-accent font-heading">Logarithms & Algorithms: The Invisible Engines of AI, Data Science, and Beyond</h3>
                        <p class="text-sm text-secondary-text dark:text-dark-secondary-text mb-3 font-body line-clamp-2">Ever wondered how Google finds exactly what you’re looking for in a fraction of a second? Or how does Spotify...</p>
                        <div class="text-xs text-secondary-text dark:text-dark-secondary-text/80 font-mono flex items-center justify-between">
                            <span>by Daniel Wanjala</span>
                            <span>~10 min read</span>
                        </div>
                    </a>
                    <a href="https://www.linkedin.com/pulse/from-excel-neural-networks-my-journey-data-science-daniel-wanjala-s6vjf/?trackingId=nX28LhJOSLauFfN5YIOsHQ%3D%3D" target="_blank" rel="noopener noreferrer" class="interactive-element publication-card block bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300 reveal-hidden" data-reveal-delay="100">
                        <h3 class="text-lg font-semibold mb-2 text-accent dark:text-dark-accent font-heading">From Excel to Neural Networks: My Journey in Data Science</h3>
                        <p class="text-sm text-secondary-text dark:text-dark-secondary-text mb-3 font-body line-clamp-2">First off, let me start by saying: that it’s been a while. My LinkedIn feed probably thought I disappeared into the data abyss...</p>
                        <div class="text-xs text-secondary-text dark:text-dark-secondary-text/80 font-mono flex items-center justify-between">
                            <span>by Daniel Wanjala</span>
                            <span>~12 min read</span>
                        </div>
                    </a>
                    <a href="https://www.linkedin.com/pulse/why-ai-bots-leave-customers-frustrated-improving-zuriand-wanjala-9kbhf/?trackingId=nX28LhJOSLauFfN5YIOsHQ%3D%3D" target="_blank" rel="noopener noreferrer" class="interactive-element publication-card block bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300 reveal-hidden" data-reveal-delay="200">
                        <h3 class="text-lg font-semibold mb-2 text-accent dark:text-dark-accent font-heading">Why AI Bots Leave Customers Frustrated: Improving Safaricom's Zuri (And Others)</h3>
                        <p class="text-sm text-secondary-text dark:text-dark-secondary-text mb-3 font-body line-clamp-2">If you call Safaricom or Airtel, you might feel frustrated because you're only interacting with an AI bot. While these bots, such as Safaricom's Zuri...</p>
                        <div class="text-xs text-secondary-text dark:text-dark-secondary-text/80 font-mono flex items-center justify-between">
                            <span>by Daniel Wanjala</span>
                            <span>~6 min read</span>
                        </div>
                    </a>
                    <a href="https://www.linkedin.com/pulse/frappe-framework-concepts-beginners-intermediate-daniel-wanjala-wki5f/?trackingId=nX28LhJOSLauFfN5YIOsHQ%3D%3D" target="_blank" rel="noopener noreferrer" class="interactive-element publication-card block bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300 reveal-hidden" data-reveal-delay="0">
                        <h3 class="text-lg font-semibold mb-2 text-accent dark:text-dark-accent font-heading">Frappe Framework Concepts for Beginners and Intermediate</h3>
                        <p class="text-sm text-secondary-text dark:text-dark-secondary-text mb-3 font-body line-clamp-2">Frappe Introduction to Frappe Framework Overview of Frappe Framework Frappe is an open-source web application framework built on Python and JavaScript...</p>
                        <div class="text-xs text-secondary-text dark:text-dark-secondary-text/80 font-mono flex items-center justify-between">
                            <span>by Daniel Wanjala</span>
                            <span>~8 min read</span>
                        </div>
                    </a>
                    <a href="https://www.linkedin.com/pulse/lets-talk-kenya-finance-bill-2024-how-machine-learning-daniel-wanjala-fapjf/?trackingId=nX28LhJOSLauFfN5YIOsHQ%3D%3D" target="_blank" rel="noopener noreferrer" class="interactive-element publication-card block bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300 reveal-hidden" data-reveal-delay="100">
                        <h3 class="text-lg font-semibold mb-2 text-accent dark:text-dark-accent font-heading">Let's Talk about the Kenya Finance Bill 2024 😪 and how Machine Learning will help...</h3>
                        <p class="text-sm text-secondary-text dark:text-dark-secondary-text mb-3 font-body line-clamp-2">Introduction The Kenya Finance Bill 2024 introduces a series of new tax measures and adjustments aimed at increasing government revenue...</p>
                        <div class="text-xs text-secondary-text dark:text-dark-secondary-text/80 font-mono flex items-center justify-between">
                            <span>by Daniel Wanjala</span>
                            <span>~10 min read</span>
                        </div>
                    </a>
                    <a href="https://www.linkedin.com/pulse/how-machine-learning-transportation-can-transform-africas-wanjala-163gf/?trackingId=nX28LhJOSLauFfN5YIOsHQ%3D%3D" target="_blank" rel="noopener noreferrer" class="interactive-element publication-card block bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300 reveal-hidden" data-reveal-delay="200">
                        <h3 class="text-lg font-semibold mb-2 text-accent dark:text-dark-accent font-heading">How Machine Learning in Transportation Can Transform Africa’s Transit Systems</h3>
                        <p class="text-sm text-secondary-text dark:text-dark-secondary-text mb-3 font-body line-clamp-2">Highway Design Highway SafeBoda Twiga Foods Africa’s transportation sector is undergoing a radical transformation, thanks to the infusion of machine...</p>
                        <div class="text-xs text-secondary-text dark:text-dark-secondary-text/80 font-mono flex items-center justify-between">
                            <span>by Daniel Wanjala</span>
                            <span>~14 min read</span>
                        </div>
                    </a>
                    <a href="https://www.linkedin.com/pulse/machine-learning-blockchain-crypto-financial-analysis-daniel-wanjala-bf0mf/?trackingId=nX28LhJOSLauFfN5YIOsHQ%3D%3D" target="_blank" rel="noopener noreferrer" class="interactive-element publication-card block bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300 reveal-hidden" data-reveal-delay="0">
                        <h3 class="text-lg font-semibold mb-2 text-accent dark:text-dark-accent font-heading">Machine Learning, Blockchain, and Crypto in Financial Analysis</h3>
                        <p class="text-sm text-secondary-text dark:text-dark-secondary-text mb-3 font-body line-clamp-2">Introduction: In the financial world, machine learning, blockchain, and cryptocurrencies are three emerging technologies reshaping how we analyze...</p>
                        <div class="text-xs text-secondary-text dark:text-dark-secondary-text/80 font-mono flex items-center justify-between">
                            <span>by Daniel Wanjala</span>
                            <span>~13 min read</span>
                        </div>
                    </a>
                    <a href="https://www.linkedin.com/pulse/oracle-machine-learning-algorithms-daniel-wanjala-fqo5f/?trackingId=nX28LhJOSLauFfN5YIOsHQ%3D%3D" target="_blank" rel="noopener noreferrer" class="interactive-element publication-card block bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300 reveal-hidden" data-reveal-delay="100">
                        <h3 class="text-lg font-semibold mb-2 text-accent dark:text-dark-accent font-heading">The Oracle of Machine Learning Algorithms</h3>
                        <p class="text-sm text-secondary-text dark:text-dark-secondary-text mb-3 font-body line-clamp-2">The field of technology has been revolutionized by machine learning algorithms, which provide unparalleled insights and efficiency...</p>
                        <div class="text-xs text-secondary-text dark:text-dark-secondary-text/80 font-mono flex items-center justify-between">
                            <span>by Daniel Wanjala</span>
                            <span>~3 min read</span>
                        </div>
                    </a>
                    <a href="https://www.linkedin.com/pulse/importance-diversity-inclusion-data-science-ml-daniel-wanjala-lw3if/?trackingId=nX28LhJOSLauFfN5YIOsHQ%3D%3D" target="_blank" rel="noopener noreferrer" class="interactive-element publication-card block bg-glass-light dark:bg-glass-dark backdrop-blur-lg border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300 reveal-hidden" data-reveal-delay="200">
                        <h3 class="text-lg font-semibold mb-2 text-accent dark:text-dark-accent font-heading">The Importance of Diversity and Inclusion in Data Science and ML</h3>
                        <p class="text-sm text-secondary-text dark:text-dark-secondary-text mb-3 font-body line-clamp-2">I. Introduction Diversity and inclusion are crucial elements in any field, and data science and machine learning (ML) are no exception...</p>
                        <div class="text-xs text-secondary-text dark:text-dark-secondary-text/80 font-mono flex items-center justify-between">
                            <span>by Daniel Wanjala</span>
                            <span>~15 min read</span>
                        </div>
                    </a>
                </div>
                 <div class="text-center mt-12 reveal-hidden">
                    <a href="publications.html" class="know-more-button group">
                        View All Publications
                        <i data-lucide="arrow-right"></i>
                    </a>
                </div>
            </section>

            <section id="demos" class="min-h-screen w-full py-20 px-4 md:px-8 lg:px-16 bg-secondary-bg/30 dark:bg-dark-secondary-bg/30 reveal-hidden">
                <h2 class="text-4xl md:text-5xl font-bold mb-12 text-center bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent font-heading tracking-tight reveal-hidden">Live Demos: Try My Logic</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-6xl mx-auto">
                    <article class="demo-card interactive-element bg-glass-light dark:bg-glass-dark backdrop-blur-sm border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 shadow-lg cursor-pointer hover:border-accent/60 dark:hover:border-dark-accent/60 transition-all duration-300 group reveal-hidden hover:-translate-y-1">
                        <i data-lucide="code" class="mb-3 text-accent dark:text-dark-accent h-6 w-6"></i>
                        <h3 class="text-xl font-semibold mb-2 text-primary-text dark:text-dark-primary-text font-heading">Plant Disease Detector</h3>
                        <p class="text-secondary-text dark:text-dark-secondary-text text-sm font-body">Upload an image to detect common plant diseases.</p>
                        <div class="mt-4 text-right text-xs text-accent dark:text-dark-accent opacity-70 group-hover:opacity-100 font-mono">
                            Try Demo &rarr;
                        </div>
                    </article>
                    <article class="demo-card interactive-element bg-glass-light dark:bg-glass-dark backdrop-blur-sm border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-xl p-6 shadow-lg cursor-pointer hover:border-accent/60 dark:hover:border-dark-accent/60 transition-all duration-300 group reveal-hidden hover:-translate-y-1" style="transition-delay: 0.1s;">
                        <i data-lucide="code" class="mb-3 text-accent dark:text-dark-accent h-6 w-6"></i>
                        <h3 class="text-xl font-semibold mb-2 text-primary-text dark:text-dark-primary-text font-heading">GDP Forecast Interactive</h3>
                        <p class="text-secondary-text dark:text-dark-secondary-text text-sm font-body">Adjust parameters to see GDP forecast variations.</p>
                        <div class="mt-4 text-right text-xs text-accent dark:text-dark-accent opacity-70 group-hover:opacity-100 font-mono">
                            Try Demo &rarr;
                        </div>
                    </article>
                 </div>
                <p class="text-center text-secondary-text dark:text-dark-secondary-text mt-12 text-sm reveal-hidden font-body">
                    Note: Live demos may link to external platforms like Streamlit Cloud or JS playgrounds.
                </p>
                 <div class="text-center mt-12 reveal-hidden">
                    <a href="demos.html" class="know-more-button group">
                        Explore Demos
                        <i data-lucide="arrow-right"></i>
                    </a>
                </div>
            </section>

            <section id="contact" class="min-h-screen w-full py-20 px-4 md:px-8 lg:px-16 bg-primary-bg dark:bg-dark-primary-bg reveal-hidden">
                <h2 class="text-4xl md:text-5xl font-bold mb-12 text-center bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent font-heading tracking-tight reveal-hidden">Contact: Let's Collaborate</h2>
                <div class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-12">
                    <div class="reveal-slide-left">
                        <h3 class="text-2xl font-semibold mb-6 text-primary-text dark:text-dark-primary-text font-heading">Connect with me</h3>
                        <div class="space-y-4">
                            <a href="https://www.linkedin.com/in/daniel-wanjala-912b8b17b/" target="_blank" rel="noopener noreferrer" class="social-card interactive-element flex items-center p-4 bg-glass-light dark:bg-glass-dark backdrop-blur-sm border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-lg text-primary-text dark:text-dark-primary-text hover:bg-accent/10 dark:hover:bg-dark-accent/10 hover:border-accent dark:hover:border-dark-accent transition-all duration-300 group hover:-translate-y-0.5 hover:shadow-lg">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mr-4 text-accent dark:text-dark-accent group-hover:scale-110 transition-transform"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect width="4" height="12" x="2" y="9"></rect><circle cx="4" cy="4" r="2"></circle></svg>
                                <span class="font-medium font-body">LinkedIn</span>
                                <i data-lucide="arrow-right" class="ml-auto h-5 w-5 text-secondary-text dark:text-dark-secondary-text group-hover:text-accent dark:group-hover:text-dark-accent group-hover:translate-x-1 transition-transform"></i>
                            </a>
                            <a href="https://github.com/MadScie254" target="_blank" rel="noopener noreferrer" class="social-card interactive-element flex items-center p-4 bg-glass-light dark:bg-glass-dark backdrop-blur-sm border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-lg text-primary-text dark:text-dark-primary-text hover:bg-accent/10 dark:hover:bg-dark-accent/10 hover:border-accent dark:hover:border-dark-accent transition-all duration-300 group hover:-translate-y-0.5 hover:shadow-lg" style="transition-delay: 0.1s;">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mr-4 text-accent dark:text-dark-accent group-hover:scale-110 transition-transform"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-1.5 6-7A6.9 6.9 0 0 0 18.5 4c.1-.8.1-1.7-.1-2.5 0 0-1.1-.4-3.6 1.3A12.3 12.3 0 0 0 12 2.8c-1.1 0-2.3.1-3.4.4-2.5-1.7-3.6-1.3-3.6-1.3-.2.8-.2 1.7-.1 2.5A6.9 6.9 0 0 0 3 7.5c0 5.5 3 7 6 7a4.8 4.8 0 0 0-1 3.5v4"></path></svg>
                                <span class="font-medium font-body">GitHub</span>
                                <i data-lucide="arrow-right" class="ml-auto h-5 w-5 text-secondary-text dark:text-dark-secondary-text group-hover:text-accent dark:group-hover:text-dark-accent group-hover:translate-x-1 transition-transform"></i>
                            </a>
                            <div class="social-card flex items-center p-4 bg-glass-light dark:bg-glass-dark backdrop-blur-md border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-lg text-primary-text dark:text-dark-primary-text transition-all duration-300 group hover:border-accent/50 dark:hover:border-dark-accent/50 reveal-hidden" data-reveal-delay="200">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mr-4 text-accent dark:text-dark-accent group-hover:scale-110 transition-transform"><rect width="20" height="16" x="2" y="4" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg>
                                <a href="mailto:dmwanjala254@gmail.com" class="font-medium font-body hover:text-accent dark:hover:text-dark-accent transition-colors break-all">dmwanjala254@gmail.com</a>
                                <button class="copy-btn ml-auto flex-shrink-0 p-1 rounded hover:bg-accent/20 dark:hover:bg-dark-accent/20 text-secondary-text dark:text-dark-secondary-text hover:text-accent dark:hover:text-dark-accent transition-colors" data-copy-text="dmwanjala254@gmail.com" aria-label="Copy email address">
                                    <i data-lucide="copy" class="h-4 w-4"></i>
                                </button>
                            </div>
                            <a id="whatsapp-link" href="#" target="_blank" rel="noopener noreferrer" class="social-card interactive-element flex items-center p-4 bg-glass-light dark:bg-glass-dark backdrop-blur-sm border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-lg text-primary-text dark:text-dark-primary-text hover:bg-accent/10 dark:hover:bg-dark-accent/10 hover:border-accent dark:hover:border-dark-accent transition-all duration-300 group hover:-translate-y-0.5 hover:shadow-lg" style="transition-delay: 0.3s;">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6 mr-4 text-accent dark:text-dark-accent group-hover:scale-110 transition-transform"> <path d="M16.6 14c-.2-.1-1.5-.7-1.7-.8-.2-.1-.4-.1-.6.1-.2.2-.6.8-.8 1-.1.2-.3.2-.5.1-.7-.3-1.4-.7-2-1.2-.5-.5-1-1.1-1.4-1.7-.1-.2 0-.4.1-.5.1-.1.2-.2.4-.4.1-.1.2-.3.3-.4.1-.2 0-.4-.1-.5-.1-.1-1.7-4-1.9-4.5-.3-.4-.5-.4-.7-.4h-.5c-.2 0-.5.1-.7.3-.2.2-.8.8-.8 1.9 0 1.1.8 2.2 1 2.4.1.2 1.5 2.3 3.7 3.3.5.2.9.4 1.2.5.5.2 1 .1 1.4-.1.4-.2.6-.4.8-.8.2-.3.2-.6.1-.7zm4.9-1.5c-.3-1.2-1.8-2.2-3.4-2.5-.4-.1-.9.1-1.3.4l-.1.1c-.1.1-.2.1-.3.1-.3 0-.5-.1-.7-.2-.1-.1-.2-.2-.3-.3-.6-.4-1.1-.9-1.6-1.4-.1-.1-.3-.2-.4-.2-.1 0-.2 0-.3.1-.4.4-.8.8-1.1 1.3L12 10c-.1.1-.2.2-.3.2-.1.1-.3.1-.4.1h-.5c-1.1 0-2.1-.4-2.9-1.1-.2-.1-.4-.2-.6-.2-.4 0-.8.2-1.1.5-.3.3-.5.7-.6 1.1-.1.4-.1.9 0 1.3l.1.3c.1.1.1.3 0 .4-.3.4-.6.9-.8 1.4 0 .1-.1.2-.1.3-.2.7-.3 1.4-.3 2.1 0 1.9.8 3.6 2.2 4.9 1.4 1.3 3.1 2 5 2h.1c.5 0 1 0 1.4-.1.5-.1 1-.2 1.5-.4.5-.2 1-.5 1.4-.8.4-.3.8-.7 1.1-1.1.1-.1.2-.2.3-.3.1-.1.3-.1.4-.1.2 0 .4.1.6.2.2.1.4.3.6.4 1.2.6 2.6.9 4.1.8 1.4-.1 2.8-.6 3.9-1.5s1.9-2.3 2.3-3.8c.3-1.1.2-2.3-.1-3.4-.1-.4-.3-.8-.6-1.1zM12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2z"></path> </svg>
                                <span class="font-medium font-body">WhatsApp</span>
                                <i data-lucide="arrow-right" class="ml-auto h-5 w-5 text-secondary-text dark:text-dark-secondary-text group-hover:text-accent dark:group-hover:text-dark-accent group-hover:translate-x-1 transition-transform"></i>
                            </a>
                            <a id="whatsapp-direct-link" href="#" target="_blank" rel="noopener noreferrer" class="mt-6 inline-block text-sm text-accent dark:text-dark-accent hover:underline reveal-hidden font-body" data-reveal-delay="400">
                                👋🏽 Message me directly on WhatsApp
                            </a>
                        </div>
                    </div>
                    <div class="reveal-slide-right">
                        <h3 class="text-2xl font-semibold mb-6 text-primary-text dark:text-dark-primary-text font-heading">Send a Message</h3>
                        <form id="contactForm" class="space-y-6" novalidate>
                            <div>
                                <label for="name" class="block text-sm font-medium text-secondary-text dark:text-dark-secondary-text mb-1 font-body">Name</label>
                                <input type="text" name="name" id="name" required class="form-input w-full px-4 py-2 rounded-lg bg-glass-light dark:bg-glass-dark backdrop-blur-sm border border-secondary-text/30 dark:border-dark-secondary-text/30 focus:border-accent dark:focus:border-dark-accent focus:ring-1 focus:ring-accent dark:focus:ring-dark-accent text-primary-text dark:text-dark-primary-text transition duration-200 outline-none ring-1 ring-transparent placeholder:text-secondary-text/50 dark:placeholder:text-dark-secondary-text/50" placeholder="Your Name">
                                <p class="form-error mt-1 text-xs text-red-coral hidden font-mono"></p>
                            </div>
                            <div>
                                <label for="email" class="block text-sm font-medium text-secondary-text dark:text-dark-secondary-text mb-1 font-body">Email</label>
                                <input type="email" name="email" id="email" required class="form-input w-full px-4 py-2 rounded-lg bg-glass-light dark:bg-glass-dark backdrop-blur-sm border border-secondary-text/30 dark:border-dark-secondary-text/30 focus:border-accent dark:focus:border-dark-accent focus:ring-1 focus:ring-accent dark:focus:ring-dark-accent text-primary-text dark:text-dark-primary-text transition duration-200 outline-none ring-1 ring-transparent placeholder:text-secondary-text/50 dark:placeholder:text-dark-secondary-text/50" placeholder="your.email@example.com">
                                 <p class="form-error mt-1 text-xs text-red-coral hidden font-mono"></p>
                            </div>
                            <div>
                                <label for="message" class="block text-sm font-medium text-secondary-text dark:text-dark-secondary-text mb-1 font-body">Message</label>
                                <textarea name="message" id="message" rows="4" required class="form-input w-full px-4 py-2 rounded-lg bg-glass-light dark:bg-glass-dark backdrop-blur-sm border border-secondary-text/30 dark:border-dark-secondary-text/30 focus:border-accent dark:focus:border-dark-accent focus:ring-1 focus:ring-accent dark:focus:ring-dark-accent text-primary-text dark:text-dark-primary-text transition duration-200 outline-none resize-none ring-1 ring-transparent placeholder:text-secondary-text/50 dark:placeholder:text-dark-secondary-text/50" placeholder="How can I help?"></textarea>
                                 <p class="form-error mt-1 text-xs text-red-coral hidden font-mono"></p>
                            </div>
                            <div>
                                <button type="submit" id="submitButton" class="interactive-element w-full px-6 py-3 rounded-lg font-semibold transition-all duration-300 ease-out flex items-center justify-center shadow-md hover:shadow-lg bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary text-white dark:text-jet-black hover:opacity-90 transform hover:-translate-y-0.5 hover:scale-103">
                                    <span id="buttonText">Send Message</span>
                                    <i data-lucide="arrow-right" id="buttonIcon" class="ml-2 h-5 w-5"></i>
                                </button>
                                 <p id="formStatus" class="mt-2 text-center text-sm font-body"></p>
                            </div>
                        </form>
                    </div>
                </div>
                 <div class="text-center mt-12 reveal-hidden">
                    <a href="contact.html" class="know-more-button group">
                        Get In Touch
                        <i data-lucide="arrow-right"></i>
                    </a>
                </div>
            </section>
        </main>

        <footer class="bg-secondary-bg/10 dark:bg-dark-secondary-bg text-secondary-text dark:text-dark-secondary-text py-6 px-4 md:px-8 text-center text-sm reveal-hidden border-t border-secondary-text/10 dark:border-dark-secondary-text/10 font-body">
             © <span id="currentYear"></span> Daniel Wanjala. All rights reserved. | Predicting Progress. Designing Resilience.
        </footer>

        <div id="projectModal" class="fixed inset-0 bg-black/80 dark:bg-jet-black/90 backdrop-blur-lg flex items-center justify-center z-50 p-4 hidden-modal">
            <div id="projectModalContentWrapper" class="bg-glass-light dark:bg-glass-darker backdrop-blur-lg text-primary-text dark:text-dark-primary-text rounded-xl shadow-2xl overflow-hidden max-w-3xl w-full border border-secondary-text/10 dark:border-dark-secondary-text/20">
                 <div id="projectModalContent"> </div>
            </div>
        </div>

        <div id="copy-toast">✅ Copied!</div>

    </div> <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Initialize Lucide Icons ---
            lucide.createIcons();

            // --- Constants and State ---
            const name = "Daniel Wanjala";
            // Project data (unchanged from original)
             const projectsData = [
              { id: 1, title: "GDP Growth Prediction Model", description: "Developed a machine learning model...", tags: ["Finance", "AI", "Python"], imageUrl: "https://placehold.co/600x400/0B0C10/F7F7F7?text=GDP+Model", altImageUrl: "https://placehold.co/600x400/66FCF1/0B0C10?text=GDP+Viz", problem: "Needed a reliable way to forecast...", dataUsed: "Exchange rates, inflation rates...", results: "Provided insights for policymakers...", techStack: ["Python", "Scikit-learn", "Pandas"], githubUrl: "https://github.com/MadScie254/Phase-3-Project-Modelling", liveDemoUrl: null, accentColor: "blue-500" },
              { id: 2, title: "AI-Driven Plant Disease Detection", description: "Collaboratively developed an advanced system...", tags: ["Health", "AI", "CV"], imageUrl: "https://placehold.co/600x400/0B0C10/F7F7F7?text=Plant+AI", altImageUrl: "https://placehold.co/600x400/66FCF1/0B0C10?text=Plant+Viz", problem: "Early and accurate detection is crucial...", dataUsed: "Image datasets of plants...", results: "Enhanced early detection...", techStack: ["Python", "TensorFlow", "OpenCV"], githubUrl: "https://github.com/MadScie254/Capstone-Lazarus", liveDemoUrl: null, accentColor: "emerald-green" },
              { id: 3, title: "Kenya's GDP Forecasting Tool", description: "Developed a forecasting tool...", tags: ["Finance", "TimeSeries", "Python"], imageUrl: "https://placehold.co/600x400/0B0C10/F7F7F7?text=Kenya+GDP", altImageUrl: "https://placehold.co/600x400/66FCF1/0B0C10?text=Kenya+Viz", problem: "Stakeholders needed fact-based analysis...", dataUsed: "Time-series data, economic indicators...", results: "Aided in strategic planning...", techStack: ["Python", "Statsmodels", "Pandas"], githubUrl: "https://github.com/MadScie254/GDP-Forecast-Sample", liveDemoUrl: null, accentColor: "red-coral" },
              { id: 4, title: "InvestWise Predictor", description: "Intelligent online tool using neural networks...", tags: ["Finance", "AI", "Web"], imageUrl: "https://placehold.co/600x400/0B0C10/F7F7F7?text=InvestWise", altImageUrl: "https://placehold.co/600x400/66FCF1/0B0C10?text=Invest+Viz", problem: "Investors needed data-driven guidance...", dataUsed: "Economic indicators, trade data...", results: "Assisted investors in making informed decisions...", techStack: ["Python", "TensorFlow", "Flask (implied)"], githubUrl: "https://github.com/MadScie254/InvestWise-Predictor-Project", liveDemoUrl: null, accentColor: "tech-purple" },
              { id: 5, title: "Netflix Stock Profit Analysis", description: "Analyzed Netflix's stock performance...", tags: ["Finance", "Analysis", "Python"], imageUrl: "https://placehold.co/600x400/0B0C10/F7F7F7?text=Netflix+Stock", altImageUrl: "https://placehold.co/600x400/66FCF1/0B0C10?text=Netflix+Viz", problem: "Understanding historical performance...", dataUsed: "Historical Netflix stock data.", results: "Provided insights into profitability...", techStack: ["Python", "Pandas", "Matplotlib"], githubUrl: "https://github.com/MadScie254/Netflix-Analysis", liveDemoUrl: null, accentColor: "sandstone" }
            ];
            const whatsappBaseUrl = "https://wa.me/254742007277"; // Replace with actual number if needed
            const whatsappMessage = "Hello Daniel, I visited your portfolio and would like to connect.";
            let toneJsStarted = false;
            let synth, clickSynth;
            let particleAnimationId;
            let mouse = { x: null, y: null, radius: 100 }; // Mouse position for particle interaction

            // --- DOM Element References ---
            const htmlEl = document.documentElement;
            const preloader = document.getElementById('preloader');
            const themeToggleButton = document.getElementById('theme-toggle');
            const themeIconSun = document.getElementById('theme-icon-sun');
            const themeIconMoon = document.getElementById('theme-icon-moon');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const menuIconOpen = document.getElementById('menu-icon-open');
            const menuIconClose = document.getElementById('menu-icon-close');
            const rotatingWordEl = document.getElementById('rotating-word');
            const projectCards = document.querySelectorAll('.project-card');
            const projectModal = document.getElementById('projectModal');
            const projectModalContent = document.getElementById('projectModalContent');
            const projectModalContentWrapper = document.getElementById('projectModalContentWrapper');
            const contactForm = document.getElementById('contactForm');
            const submitButton = document.getElementById('submitButton');
            const buttonText = document.getElementById('buttonText');
            const buttonIcon = document.getElementById('buttonIcon');
            const formStatusEl = document.getElementById('formStatus');
            const currentYearEl = document.getElementById('currentYear');
            const scrollProgressBar = document.getElementById('scrollProgressBar');
            const navLinks = document.querySelectorAll('#desktop-nav .nav-link');
            const mobileNavLinks = document.querySelectorAll('#mobile-menu .mobile-nav-link');
            const sections = document.querySelectorAll('main section[id]');
            const whatsappLink = document.getElementById('whatsapp-link');
            const whatsappDirectLink = document.getElementById('whatsapp-direct-link');
            const copyButtons = document.querySelectorAll('.copy-btn');
            const copyToast = document.getElementById('copy-toast');
            const counterElements = document.querySelectorAll('[data-target]');
            const mainContentContainer = document.getElementById('main-content-container');
            const particleCanvas = document.getElementById('particle-canvas');
            const interactiveElements = document.querySelectorAll('a, button, .project-card, .essay-card, .demo-card, #theme-toggle, .publication-card, .skill-card, .education-item'); // Added new interactive elements


            // --- Hide Preloader ---
            window.addEventListener('load', () => {
                 setTimeout(() => {
                    if (preloader) {
                        preloader.classList.add('hidden');
                    }
                 }, 4000); // Keep preloader duration
            });

            // --- Update WhatsApp Link ---
            const encodedMessage = encodeURIComponent(whatsappMessage);
            const whatsappUrlWithMessage = `${whatsappBaseUrl}?text=${encodedMessage}`;
            if (whatsappLink) whatsappLink.href = whatsappUrlWithMessage;
            if (whatsappDirectLink) whatsappDirectLink.href = whatsappUrlWithMessage;

            // --- Tone.js Initialization ---
            function startTone() {
                if (toneJsStarted || typeof Tone === 'undefined') return;
                Tone.start();
                // Low volume synth for subtle hover feedback
                synth = new Tone.Synth({
                    oscillator: { type: 'sine' },
                    envelope: { attack: 0.005, decay: 0.1, sustain: 0.1, release: 0.1 }
                }).toDestination();
                 synth.volume.value = -25; // Quieter hover sound

                // Slightly different synth for clicks
                clickSynth = new Tone.Synth({
                    oscillator: { type: 'triangle' },
                    envelope: { attack: 0.001, decay: 0.1, sustain: 0.05, release: 0.1 }
                }).toDestination();
                clickSynth.volume.value = -20; // Slightly louder click

                toneJsStarted = true;
                console.log("Tone.js AudioContext started.");
            }
            // Start audio context on first user interaction
            document.body.addEventListener('click', startTone, { once: true });
            document.body.addEventListener('keydown', startTone, { once: true });

            // --- Sound Feedback for Interactive Elements ---
            interactiveElements.forEach(el => {
                 el.addEventListener('mouseenter', () => {
                    if (toneJsStarted && synth) {
                        // Play a subtle high note on hover
                        synth.triggerAttackRelease('C5', '16n', Tone.now());
                    }
                });
                 el.addEventListener('click', () => {
                    if (toneJsStarted && clickSynth) {
                        // Play a distinct click sound
                        clickSynth.triggerAttackRelease('E4', '16n', Tone.now());
                    }
                });
            });

            // --- Theme Toggle ---
            function updateThemeUI(theme) {
                if (!themeIconSun || !themeIconMoon) return;
                if (theme === 'dark') {
                    themeIconSun.classList.remove('hidden');
                    themeIconMoon.classList.add('hidden');
                } else {
                    themeIconSun.classList.add('hidden');
                    themeIconMoon.classList.remove('hidden');
                }
                 lucide.createIcons(); // Re-render icons after changing visibility
                 // Update body background noise pattern
                 const noiseLight = "url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%239C92AC' fill-opacity='0.10' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'%3E%3C/path%3E%3C/svg%3E\")";
                 const noiseDark = "url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%23C5C6C7' fill-opacity='0.05' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'%3E%3C/path%3E%3C/svg%3E\")";
                 document.body.style.backgroundImage = theme === 'dark' ? noiseDark : noiseLight;
            }

            function setTheme(theme) {
                if (theme === 'dark') {
                    htmlEl.classList.add('dark');
                } else {
                    htmlEl.classList.remove('dark');
                }
                localStorage.setItem('theme', theme);
                updateThemeUI(theme);
                 // Play a subtle sound feedback for theme change
                 if (toneJsStarted && clickSynth) {
                     clickSynth.triggerAttackRelease(theme === 'dark' ? 'C3' : 'G3', '8n', Tone.now());
                 }
                 // Re-initialize particles with new theme colors
                 if (particleCanvas) initParticles();
            }

            // Set initial theme based on preference or storage
            const currentTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
            updateThemeUI(currentTheme); // Update icons immediately

            // Theme toggle button listener
            if (themeToggleButton) {
                themeToggleButton.addEventListener('click', () => {
                    const newTheme = htmlEl.classList.contains('dark') ? 'light' : 'dark';
                    setTheme(newTheme);
                });
            }

            // --- Mobile Menu Toggle ---
             if (mobileMenuButton && mobileMenu && menuIconOpen && menuIconClose) {
                 mobileMenuButton.addEventListener('click', () => {
                    const isExpanded = mobileMenuButton.getAttribute('aria-expanded') === 'true';
                    mobileMenuButton.setAttribute('aria-expanded', !isExpanded);
                    mobileMenu.classList.toggle('open'); // Toggle the 'open' class for smooth transition
                    menuIconOpen.classList.toggle('hidden'); // Toggle burger icon
                    menuIconClose.classList.toggle('hidden'); // Toggle close icon
                 });
                 // Close mobile menu when a link is clicked
                 mobileNavLinks.forEach(link => {
                    link.addEventListener('click', () => {
                         mobileMenuButton.setAttribute('aria-expanded', 'false');
                         mobileMenu.classList.remove('open');
                         menuIconOpen.classList.remove('hidden');
                         menuIconClose.classList.add('hidden');
                    });
                 });
             }

            // --- Hero Section Word Rotation ---
             const words = ["forecast", "heal", "accelerate", "optimize", "innovate", "analyze", "deploy"]; // Added more words
             let wordIndex = 0;
             if (rotatingWordEl) {
                 // Function to change the word
                 function changeWord() {
                     wordIndex = (wordIndex + 1) % words.length;
                     rotatingWordEl.style.opacity = '0';
                     rotatingWordEl.style.transform = 'translateY(10px)'; // Move down slightly before changing
                     setTimeout(() => {
                         rotatingWordEl.textContent = words[wordIndex];
                         rotatingWordEl.style.opacity = '1';
                         rotatingWordEl.style.transform = 'translateY(0)'; // Move back up
                     }, 300); // Wait for fade out transition
                 }
                 // Set interval for rotation
                 setInterval(changeWord, 3000); // Change every 3 seconds
                 // Apply smooth transition styles
                 rotatingWordEl.style.transition = 'opacity 0.3s ease-in-out, transform 0.3s ease-in-out';
             }

            // --- Project Card Hover Image Swap ---
            projectCards.forEach(card => {
                 const img = card.querySelector('.project-image');
                if (img) {
                    const originalSrc = img.getAttribute('data-original-src');
                    const altSrc = img.getAttribute('data-alt-src');
                    // Swap to alt image on hover
                    card.addEventListener('mouseenter', () => { if (altSrc) img.src = altSrc; });
                    // Swap back to original image when mouse leaves
                    card.addEventListener('mouseleave', () => { if (originalSrc) img.src = originalSrc; });
                }
            });

            // --- Project Modal (with GitHub Stats Fetch) ---
            function openModal(projectId) {
                const project = projectsData.find(p => p.id === parseInt(projectId));
                if (!project || !projectModalContent || !projectModal || !projectModalContentWrapper) return;

                // Generate HTML for tech stack tags
                const techStackHtml = project.techStack.map(tech => `<span class="text-xs bg-accent/10 dark:bg-dark-accent/10 text-accent dark:text-dark-accent px-2 py-1 rounded-full font-mono">${tech}</span>`).join(' ');
                // Generate GitHub button if URL exists
                const githubButton = project.githubUrl ? `<a href="${project.githubUrl}" target="_blank" rel="noopener noreferrer" class="interactive-element inline-flex items-center px-4 py-2 bg-secondary-text dark:bg-dark-accent-secondary text-primary-bg dark:text-jet-black rounded-lg hover:opacity-80 transition-opacity duration-200 font-medium shadow-md"> <i data-lucide="github" class="mr-2 h-4 w-4"></i> GitHub </a>` : '';
                // Generate Live Demo button if URL exists
                const demoButton = project.liveDemoUrl ? `<a href="${project.liveDemoUrl}" target="_blank" rel="noopener noreferrer" class="interactive-element inline-flex items-center px-4 py-2 bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary text-white dark:text-jet-black rounded-lg hover:opacity-80 transition-opacity duration-200 font-medium shadow-md"> <i data-lucide="code" class="mr-2 h-4 w-4"></i> Live Demo </a>` : '';

                // Set initial modal content with placeholders for stats
                projectModalContent.innerHTML = `
                    <div class="relative">
                       <img src="${project.altImageUrl || project.imageUrl}" alt="${project.title}" class="w-full h-64 object-cover" loading="lazy" onerror="this.onerror=null;this.src='https://placehold.co/800x400/0B0C10/F7F7F7?text=Image+Error'">
                       <button id="closeModalButton" class="absolute top-4 right-4 text-primary-text dark:text-dark-primary-text bg-primary-bg/50 dark:bg-dark-primary-bg/50 rounded-full p-2 hover:bg-accent/20 dark:hover:bg-dark-accent/20 transition-colors duration-200 z-10" aria-label="Close project details">
                         <i data-lucide="x" class="h-5 w-5"></i>
                       </button>
                       <div class="absolute bottom-0 left-0 h-1.5 w-full bg-gradient-to-r from-${project.accentColor || 'accent'} to-${project.accentColor ? project.accentColor.replace('-500','-400') : 'accent-secondary'}"></div>
                    </div>
                    <div class="p-6 md:p-8 max-h-[60vh] overflow-y-auto">
                      <h2 class="text-3xl font-bold mb-4 bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent font-heading">${project.title}</h2>
                      <div>
                        <h4 class="font-semibold text-lg mb-1 text-accent dark:text-dark-accent font-heading">Problem Statement</h4>
                        <p class="mb-4 text-secondary-text dark:text-dark-secondary-text font-body">${project.problem}</p>
                        <h4 class="font-semibold text-lg mb-1 text-accent dark:text-dark-accent font-heading">Data Used</h4>
                        <p class="mb-4 text-secondary-text dark:text-dark-secondary-text font-body">${project.dataUsed}</p>
                        <h4 class="font-semibold text-lg mb-1 text-accent dark:text-dark-accent font-heading">Results</h4>
                        <p class="mb-4 text-secondary-text dark:text-dark-secondary-text font-body">${project.results}</p>
                        <h4 class="font-semibold text-lg mb-2 text-accent dark:text-dark-accent font-heading">Tech Stack</h4>
                        <div class="flex flex-wrap gap-2 mb-6">${techStackHtml}</div>
                      </div>

                      <div id="github-stats-container" class="mt-6 pt-4 border-t border-secondary-text/10 dark:border-dark-secondary-text/20 ${!project.githubUrl ? 'hidden' : ''}">
                          <button id="fetch-stats-button" class="interactive-element text-sm text-accent dark:text-dark-accent hover:underline mb-2">Show GitHub Stats</button>
                          <div id="github-stats-content" class="hidden text-sm space-y-1">
                              <p>Fetching stats...</p> </div>
                          <p class="text-xs text-secondary-text dark:text-dark-secondary-text mt-2">Note: Stats via public GitHub API. May be rate-limited.</p>
                      </div>

                      <div class="flex gap-4 mt-6">${githubButton}${demoButton}</div>
                    </div>`;

                // Add event listener for the close button
                const closeButton = projectModalContent.querySelector('#closeModalButton');
                if(closeButton) closeButton.addEventListener('click', closeModal);

                // Add event listener for the fetch GitHub stats button
                const fetchStatsButton = projectModalContent.querySelector('#fetch-stats-button');
                const statsContent = projectModalContent.querySelector('#github-stats-content');

                if (fetchStatsButton && statsContent && project.githubUrl) {
                    fetchStatsButton.addEventListener('click', () => {
                        fetchStatsButton.textContent = 'Loading...';
                        fetchStatsButton.disabled = true;
                        statsContent.classList.remove('hidden'); // Show the loading message

                        try {
                            // Extract owner and repo name from GitHub URL
                            const url = new URL(project.githubUrl);
                            const pathParts = url.pathname.split('/').filter(Boolean); // Get parts like ['owner', 'repo']
                            if (pathParts.length >= 2) {
                                const owner = pathParts[0];
                                const repo = pathParts[1];
                                const apiUrl = `https://api.github.com/repos/${owner}/${repo}`;

                                // Fetch data from GitHub API
                                fetch(apiUrl)
                                .then(response => {
                                    if (!response.ok) { throw new Error(`HTTP error! status: ${response.status}`); }
                                    return response.json();
                                })
                                .then(data => {
                                    // Display fetched stats
                                    statsContent.innerHTML = `
                                        <span class="inline-flex items-center mr-4">
                                            <i data-lucide="star" class="w-4 h-4 mr-1 text-yellow-500"></i> ${data.stargazers_count ?? 'N/A'} Stars
                                        </span>
                                        <span class="inline-flex items-center">
                                            <i data-lucide="git-fork" class="w-4 h-4 mr-1 text-secondary-text dark:text-dark-secondary-text"></i> ${data.forks_count ?? 'N/A'} Forks
                                        </span>
                                    `;
                                    lucide.createIcons(); // Render new icons (star, fork)
                                    fetchStatsButton.classList.add('hidden'); // Hide button after successful fetch
                                })
                                .catch(error => {
                                    // Handle errors during fetch
                                    console.error("Error fetching GitHub stats:", error);
                                    statsContent.innerHTML = `<p class="text-red-coral">Could not load stats.</p>`;
                                    fetchStatsButton.textContent = 'Retry Stats'; // Allow retry
                                    fetchStatsButton.disabled = false;
                                });
                            } else { throw new Error("Could not parse owner/repo from URL"); }
                        } catch (error) {
                             // Handle errors parsing the URL
                             console.error("Error processing GitHub URL:", error);
                             statsContent.innerHTML = `<p class="text-red-coral">Invalid GitHub URL.</p>`;
                             fetchStatsButton.classList.add('hidden'); // Hide button if URL is invalid
                        }
                    }, { once: false }); // Allow retry by not using { once: true }
                }

                // Show the modal with animation
                projectModal.classList.remove('hidden-modal');
                projectModal.classList.add('visible-modal');
                document.body.style.overflow = 'hidden'; // Prevent background scrolling
                lucide.createIcons(); // Ensure all icons in the modal are rendered
            }

            // Function to close the modal
            function closeModal() {
                if (!projectModal || !projectModalContent) return;
                projectModal.classList.add('hidden-modal');
                projectModal.classList.remove('visible-modal');
                document.body.style.overflow = ''; // Re-enable background scrolling
                // Clear modal content after transition
                setTimeout(() => { projectModalContent.innerHTML = ''; }, 300);
            }

            // Add click listeners to project cards to open the modal
            projectCards.forEach(card => card.addEventListener('click', () => openModal(card.getAttribute('data-project-id'))));
            // Add listener to close modal when clicking outside the content area
            if(projectModal) projectModal.addEventListener('click', (event) => { if (event.target === projectModal) closeModal(); });
            // Add listener to close modal with the Escape key
            document.addEventListener('keydown', (event) => { if (event.key === 'Escape' && projectModal && projectModal.classList.contains('visible-modal')) closeModal(); });

            // --- Contact Form Handling ---
             if (contactForm) {
                 contactForm.addEventListener('submit', (e) => {
                    e.preventDefault(); // Prevent default form submission
                    let isValid = true;
                    let firstErrorField = null;

                    // Reset previous status/errors
                    if(formStatusEl) {
                        formStatusEl.textContent = '';
                        formStatusEl.className = 'mt-2 text-center text-sm font-body'; // Reset classes
                    }
                    contactForm.querySelectorAll('.form-error').forEach(el => el.classList.add('hidden')); // Hide all error messages
                    contactForm.querySelectorAll('.form-input').forEach(el => el.classList.remove('border-red-coral', 'ring-red-coral', 'border-emerald-green')); // Remove validation borders

                    // Get form fields
                    const nameField = contactForm.querySelector('#name');
                    const emailField = contactForm.querySelector('#email');
                    const messageField = contactForm.querySelector('#message');
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/; // Simple email regex

                    // Validate Name
                    if (nameField && !nameField.value.trim()) {
                        isValid = false;
                        nameField.classList.add('border-red-coral', 'ring-red-coral');
                        nameField.nextElementSibling.textContent = 'Name is required.';
                        nameField.nextElementSibling.classList.remove('hidden');
                        if (!firstErrorField) firstErrorField = nameField; // Track first error for focus
                    }
                    // Validate Email
                    if (emailField && !emailField.value.trim()) {
                        isValid = false;
                        emailField.classList.add('border-red-coral', 'ring-red-coral');
                        emailField.nextElementSibling.textContent = 'Email is required.';
                        emailField.nextElementSibling.classList.remove('hidden');
                        if (!firstErrorField) firstErrorField = emailField;
                    } else if (emailField && !emailRegex.test(emailField.value)) {
                        isValid = false;
                        emailField.classList.add('border-red-coral', 'ring-red-coral');
                        emailField.nextElementSibling.textContent = 'Please enter a valid email address.';
                        emailField.nextElementSibling.classList.remove('hidden');
                        if (!firstErrorField) firstErrorField = emailField;
                    }
                    // Validate Message
                    if (messageField && !messageField.value.trim()) {
                        isValid = false;
                        messageField.classList.add('border-red-coral', 'ring-red-coral');
                        messageField.nextElementSibling.textContent = 'Message cannot be empty.';
                        messageField.nextElementSibling.classList.remove('hidden');
                        if (!firstErrorField) firstErrorField = messageField;
                    }

                    // If form is invalid
                    if (!isValid) {
                        if(submitButton) submitButton.classList.add('animate-shake', '!bg-red-coral'); // Shake button and make it red
                        if(buttonText) buttonText.textContent = 'Please Check Errors';
                        if(buttonIcon) { buttonIcon.setAttribute('data-lucide', 'alert-circle'); lucide.createIcons(); } // Change icon to alert
                        if(formStatusEl) { formStatusEl.textContent = 'Please correct the errors above.'; formStatusEl.classList.add('text-red-coral'); }
                        if (firstErrorField) firstErrorField.focus(); // Focus the first field with an error
                        // Reset button appearance after a delay
                        setTimeout(() => {
                            if(submitButton) submitButton.classList.remove('animate-shake', '!bg-red-coral');
                            if(buttonText) buttonText.textContent = 'Send Message';
                            if(buttonIcon) { buttonIcon.setAttribute('data-lucide', 'arrow-right'); lucide.createIcons(); } // Reset icon
                        }, 1500);
                        return; // Stop form submission
                    }

                    // If form is valid, show success state (simulation)
                    // Add green border to valid fields
                    contactForm.querySelectorAll('.form-input').forEach(el => {
                        if (!el.classList.contains('border-red-coral')) { // Only add green if no error
                            el.classList.add('border-emerald-green');
                        }
                    });

                    // Update button to "Sending..." state
                    if(submitButton) submitButton.disabled = true;
                    if(buttonText) buttonText.textContent = 'Sending...';
                    if(buttonIcon) buttonIcon.classList.add('hidden'); // Hide icon while sending
                    if(formStatusEl) formStatusEl.textContent = ''; // Clear status message

                    // Simulate network delay for submission
                    setTimeout(() => {
                        // Update button to "Sent" state
                        if(submitButton) {
                            submitButton.classList.remove('bg-gradient-to-r', 'from-accent', 'to-accent-secondary', 'dark:from-dark-accent', 'dark:to-dark-accent-secondary');
                            submitButton.classList.add('!bg-emerald-green', 'text-white'); // Make button green
                        }
                        if(buttonText) buttonText.textContent = 'Message Sent!';
                        if(formStatusEl) {
                            formStatusEl.textContent = 'Thank you for your message! I\'ll get back to you soon.';
                            formStatusEl.classList.add('text-emerald-green'); // Show success message
                        }
                        contactForm.reset(); // Clear the form
                        // Remove validation borders after successful submission
                        contactForm.querySelectorAll('.form-input').forEach(el => el.classList.remove('border-emerald-green', 'border-red-coral', 'ring-red-coral'));

                        // Reset button and form status after another delay
                        setTimeout(() => {
                            if(submitButton) {
                                submitButton.disabled = false;
                                submitButton.classList.remove('!bg-emerald-green', 'text-white');
                                // Re-apply original gradient background
                                submitButton.classList.add('bg-gradient-to-r', 'from-accent', 'to-accent-secondary', 'dark:from-dark-accent', 'dark:to-dark-accent-secondary');
                            }
                            if(buttonText) buttonText.textContent = 'Send Message';
                            if(buttonIcon) buttonIcon.classList.remove('hidden'); // Show icon again
                            if(formStatusEl) {
                                formStatusEl.textContent = ''; // Clear success message
                                formStatusEl.className = 'mt-2 text-center text-sm font-body'; // Reset classes
                            }
                        }, 3000); // Reset after 3 seconds

                    }, 1500); // Simulate 1.5 second delay
                });
             }

            // --- Footer Current Year ---
            if (currentYearEl) currentYearEl.textContent = new Date().getFullYear();

            // --- Scroll Progress Bar ---
            window.addEventListener('scroll', () => {
                const scrollableHeight = document.documentElement.scrollHeight - window.innerHeight;
                const scrolled = window.scrollY;
                // Calculate progress, handle division by zero if scrollableHeight is 0
                const progress = scrollableHeight > 0 ? (scrolled / scrollableHeight) : 0;
                if(scrollProgressBar) scrollProgressBar.style.transform = `scaleX(${progress})`;
            });

            // --- Scroll Reveal Animations (with Staggering) ---
            const revealObserverOptions = { threshold: 0.1, rootMargin: "0px 0px -50px 0px" }; // Trigger slightly before element is fully visible
            const revealCallback = (entries, observer) => {
                entries.forEach((entry, index) => {
                    if (entry.isIntersecting) {
                        // Apply delay based on data attribute or index for staggering effect
                        const delay = (entry.target.dataset.revealDelay || (index * 100)); // Default stagger 100ms
                        entry.target.style.transitionDelay = `${delay}ms`;
                        // Add visibility classes
                        entry.target.classList.add('reveal-visible');
                        if (entry.target.classList.contains('reveal-slide-left') || entry.target.classList.contains('reveal-slide-right')) {
                            entry.target.classList.add('slide-in');
                        }
                        observer.unobserve(entry.target); // Stop observing once revealed
                    }
                });
            };
            const revealObserver = new IntersectionObserver(revealCallback, revealObserverOptions);
            // Observe all elements with reveal classes
            document.querySelectorAll('.reveal-hidden, .reveal-slide-left, .reveal-slide-right').forEach(el => revealObserver.observe(el));

            // --- Active Navigation Link Highlighting ---
            let currentActiveSectionId = null;
            // Observer options: trigger when section is roughly centered in viewport
            const navObserverOptions = { root: null, rootMargin: "-40% 0px -60% 0px", threshold: 0 };
             const navObserverCallback = (entries) => {
                let intersectingSectionId = currentActiveSectionId; // Keep track of the currently active section
                 entries.forEach(entry => {
                     // If a section is intersecting significantly, mark it as potentially active
                     if (entry.isIntersecting && entry.intersectionRatio > 0) {
                         intersectingSectionId = entry.target.getAttribute('id');
                     }
                 });

                 // Update active link only if the intersecting section has changed
                 if (intersectingSectionId !== currentActiveSectionId) {
                    currentActiveSectionId = intersectingSectionId;
                    // Update desktop nav links
                    navLinks.forEach(link => {
                        link.classList.toggle('nav-active', link.getAttribute('data-section') === currentActiveSectionId);
                    });
                    // Update mobile nav links
                    mobileNavLinks.forEach(link => {
                         link.classList.toggle('nav-active', link.getAttribute('data-section') === currentActiveSectionId);
                    });
                 }
            };
            const navObserver = new IntersectionObserver(navObserverCallback, navObserverOptions);
            // Observe all main sections with an ID
            sections.forEach(section => { if(section) navObserver.observe(section); });

            // Initial check on page load for hash links
            const initialHash = window.location.hash.substring(1);
             if (initialHash) {
                 currentActiveSectionId = initialHash;
                 // Highlight the corresponding nav link immediately
                 navLinks.forEach(link => {
                     link.classList.toggle('nav-active', link.getAttribute('data-section') === currentActiveSectionId);
                 });
                 mobileNavLinks.forEach(link => {
                      link.classList.toggle('nav-active', link.getAttribute('data-section') === currentActiveSectionId);
                 });
             }

            // --- Clipboard Copy Functionality ---
            let toastTimeout; // Timeout ID for hiding the toast
            copyButtons.forEach(button => {
                 button.addEventListener('click', () => {
                    const textToCopy = button.dataset.copyText; // Get text from data attribute
                    if (textToCopy && navigator.clipboard) {
                        navigator.clipboard.writeText(textToCopy).then(() => {
                            // Show success toast
                            if (copyToast) {
                                copyToast.classList.add('show');
                                // Clear previous timeout if exists
                                clearTimeout(toastTimeout);
                                // Set new timeout to hide toast
                                toastTimeout = setTimeout(() => {
                                    copyToast.classList.remove('show');
                                }, 2000); // Hide after 2 seconds
                            }
                        }).catch(err => {
                            // Log error if copy fails
                            console.error('Failed to copy text: ', err);
                        });
                    }
                });
            });

            // --- Animated Counters (Example - if you add elements with data-target) ---
            const animateCounter = (el) => {
                 const target = parseInt(el.dataset.target, 10);
                if (isNaN(target)) return; // Ignore if target is not a number
                let current = 0;
                const duration = 1500; // Animation duration in ms
                const stepTime = 20; // Update interval in ms
                const totalSteps = duration / stepTime;
                const increment = target / totalSteps; // Value to add each step

                const timer = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        el.textContent = target; // Ensure final value is exact
                        clearInterval(timer); // Stop the interval
                    } else {
                        el.textContent = Math.ceil(current); // Update text content
                    }
                }, stepTime);
            };
            // Observer to trigger counter animation when element is visible
            const counterObserverOptions = { threshold: 0.5 }; // Trigger when 50% visible
            const counterObserverCallback = (entries, observer) => {
                 entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        animateCounter(entry.target); // Start animation
                        observer.unobserve(entry.target); // Stop observing once animated
                    }
                });
            };
            const counterObserver = new IntersectionObserver(counterObserverCallback, counterObserverOptions);
            // Observe elements with data-target attribute
            counterElements.forEach(el => counterObserver.observe(el));

            // --- Device Orientation Tilt Effect (Optional Enhancement) ---
            function handleOrientation(event) {
                 if (!mainContentContainer) return; // Check if container exists
                // Clamp beta (X-axis tilt) and gamma (Y-axis tilt) values
                const beta = Math.max(-30, Math.min(30, event.beta || 0));
                const gamma = Math.max(-30, Math.min(30, event.gamma || 0));
                const maxTilt = 1.0; // Max tilt degrees
                // Calculate tilt percentages
                const tiltY = (beta / 30 * maxTilt).toFixed(2);
                const tiltX = (gamma / 30 * -maxTilt).toFixed(2); // Invert gamma for natural feel
                // Apply transform
                mainContentContainer.style.transform = `perspective(1500px) rotateX(${tiltY}deg) rotateY(${tiltX}deg)`;
            }
            // Check for DeviceOrientationEvent support and permissions
            if (window.DeviceOrientationEvent && typeof window.DeviceOrientationEvent.requestPermission === 'function') {
                 // iOS 13+ requires permission
                 console.log("DeviceOrientation requires permission request on this device.");
                 // Example: Add a button to request permission
                 // document.getElementById('request-orientation-permission').addEventListener('click', () => {
                 //   DeviceOrientationEvent.requestPermission().then(permissionState => {
                 //     if (permissionState === 'granted') {
                 //       window.addEventListener('deviceorientation', handleOrientation, true);
                 //     }
                 //   });
                 // });
                 // For now, just add listener, might not work without explicit user grant
                 window.addEventListener('deviceorientation', handleOrientation, true);
            } else if (window.DeviceOrientationEvent) {
                 // Older browsers / Android
                 window.addEventListener('deviceorientation', handleOrientation, true);
            } else {
                console.log("DeviceOrientation not supported.");
            }

             // --- Particle Background Animation (Theme Aware & Interactive) ---
            if (particleCanvas) {
                const ctx = particleCanvas.getContext('2d');
                let particles = [];

                // Update mouse position on mouse move over the canvas
                particleCanvas.addEventListener('mousemove', (event) => {
                    mouse.x = event.clientX;
                    mouse.y = event.clientY;
                });
                // Reset mouse position when mouse leaves canvas
                particleCanvas.addEventListener('mouseleave', () => {
                    mouse.x = null;
                    mouse.y = null;
                });

                // Function to resize canvas to window size
                function resizeCanvas() {
                    particleCanvas.width = window.innerWidth;
                    particleCanvas.height = window.innerHeight;
                 }

                // Function to create particles
                function createParticles() {
                    particles = [];
                    // Adjust particle count based on screen area
                    const particleCount = Math.floor((particleCanvas.width * particleCanvas.height) / 20000); // Denser particles
                    for (let i = 0; i < particleCount; i++) {
                        particles.push({
                            x: Math.random() * particleCanvas.width,
                            y: Math.random() * particleCanvas.height,
                            vx: (Math.random() - 0.5) * 0.3, // Slightly faster base speed
                            vy: (Math.random() - 0.5) * 0.3,
                            radius: Math.random() * 1.5 + 0.5, // Slightly larger particles
                            baseColor: null, // Store the base theme color
                            drawColor: null // Store the current color (potentially affected by mouse)
                        });
                    }
                }

                // Function to draw particles and lines
                function drawParticles() {
                    if (!ctx) return;
                    ctx.clearRect(0, 0, particleCanvas.width, particleCanvas.height); // Clear canvas each frame
                    const isDark = document.documentElement.classList.contains('dark');
                    // Get theme colors from Tailwind config
                    const twConfig = tailwind.config.theme.extend.colors;
                    const lightColors = [`${twConfig.accent}80`, `${twConfig['accent-secondary']}80`]; // Use alpha hex for transparency
                    const darkColors = [`${twConfig['dark-accent']}80`, `${twConfig['dark-accent-secondary']}80`];
                    const themeColors = isDark ? darkColors : lightColors;
                    const lineColor = isDark ? 'rgba(197, 198, 199, 0.08)' : 'rgba(74, 74, 74, 0.08)'; // Subtle line color

                    particles.forEach((p, i) => {
                        // Assign base color if needed (on first draw or theme change)
                         if (!p.baseColor) {
                             p.baseColor = themeColors[Math.floor(Math.random() * themeColors.length)];
                         }
                         p.drawColor = p.baseColor; // Default draw color

                        // Interaction with mouse
                        if (mouse.x !== null && mouse.y !== null) {
                            const dx = mouse.x - p.x;
                            const dy = mouse.y - p.y;
                            const distance = Math.sqrt(dx * dx + dy * dy);
                            const interactionRadius = 150; // Increased interaction radius

                            if (distance < interactionRadius) {
                                // Make particles near mouse slightly brighter/more opaque
                                const opacityFactor = 1 - (distance / interactionRadius);
                                const baseHex = p.baseColor.substring(0, 7); // Get #RRGGBB
                                const alphaHex = Math.min(255, Math.floor(parseInt(p.baseColor.substring(7, 9) || '80', 16) + opacityFactor * 150)).toString(16).padStart(2, '0'); // Increase alpha
                                p.drawColor = `${baseHex}${alphaHex}`;

                                // Push particles away from mouse slightly
                                const force = (interactionRadius - distance) / interactionRadius;
                                p.x -= (dx / distance) * force * 0.5; // Gentle push
                                p.y -= (dy / distance) * force * 0.5;
                            }
                        }

                        // Draw particle
                        ctx.fillStyle = p.drawColor;
                        ctx.beginPath();
                        ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
                        ctx.fill();

                        // Update position
                        p.x += p.vx;
                        p.y += p.vy;

                        // Wrap particles around edges
                        if (p.x < -p.radius) p.x = particleCanvas.width + p.radius;
                        if (p.x > particleCanvas.width + p.radius) p.x = -p.radius;
                        if (p.y < -p.radius) p.y = particleCanvas.height + p.radius;
                        if (p.y > particleCanvas.height + p.radius) p.y = -p.radius;

                        // Draw lines to nearby particles
                        const lineDistanceThreshold = 100; // Max distance to draw lines
                        for (let j = i + 1; j < particles.length; j++) {
                            const p2 = particles[j];
                            const dx = p.x - p2.x;
                            const dy = p.y - p2.y;
                            const distance = Math.sqrt(dx * dx + dy * dy);

                            if (distance < lineDistanceThreshold) {
                                ctx.strokeStyle = lineColor;
                                ctx.lineWidth = 0.5 * (1 - distance / lineDistanceThreshold); // Thinner lines further away
                                ctx.beginPath();
                                ctx.moveTo(p.x, p.y);
                                ctx.lineTo(p2.x, p2.y);
                                ctx.stroke();
                            }
                        }
                    });

                    // Request next frame
                    particleAnimationId = requestAnimationFrame(drawParticles);
                }

                // Initialize or re-initialize particles
                function initParticles() {
                    resizeCanvas();
                    // Reset particle base colors so they get reassigned based on current theme
                    particles.forEach(p => p.baseColor = null);
                    createParticles(); // Create particles (they will get colors in drawParticles)
                    if (particleAnimationId) cancelAnimationFrame(particleAnimationId); // Stop previous animation loop
                    if (!document.hidden) { drawParticles(); } // Start animation loop if page is visible
                }

                initParticles(); // Initial setup

                // Re-initialize on resize (debounced)
                let resizeTimeout;
                window.addEventListener('resize', () => {
                    clearTimeout(resizeTimeout);
                    resizeTimeout = setTimeout(initParticles, 250);
                });

                 // Pause/Resume animation based on page visibility
                 document.addEventListener('visibilitychange', () => {
                    if (document.hidden) {
                        if (particleAnimationId) {
                            cancelAnimationFrame(particleAnimationId);
                            particleAnimationId = null;
                            console.log("Particle animation paused.");
                        }
                    } else {
                        if (!particleAnimationId) { // Only resume if not already running
                            drawParticles();
                            console.log("Particle animation resumed.");
                        }
                    }
                });
            }


        }); // End DOMContentLoaded
    </script>

</body>
</html>
