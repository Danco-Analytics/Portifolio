<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>About Daniel Wanjala - Data Scientist / ML Engineer</title>
    <link rel="icon" href="assets/logo.png" type="image/png">
    <link rel="shortcut icon" href="assets/logo.png" type="image/png">
    <link rel="apple-touch-icon" href="assets/apple-touch-icon.png">

    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&family=Satoshi:wght@400;500;700&family=Inter:wght@400;500&family=IBM+Plex+Sans:wght@400;500&family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">

    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-cloud/1.2.5/d3.layout.cloud.min.js"></script>


    <style>
        /* --- Base body styles --- */
        body {
          font-family: 'Inter', 'IBM Plex Sans', sans-serif;
          overflow-x: hidden;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
          background-attachment: fixed;
          position: relative;
          /* Ensure body has a default background in case Tailwind fails */
          background-color: #F7F7F7;
        }
        html.dark body {
            background-color: #0B0C10;
        }
        .font-heading { font-family: 'Satoshi', 'Space Grotesk', 'Neue Montreal', sans-serif; }
        .font-body { font-family: 'Inter', 'IBM Plex Sans', sans-serif; }
        .font-mono { font-family: 'JetBrains Mono', 'Source Code Pro', monospace; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: theme('colors.sandstone', '#E0C097'); } /* Added fallback */
        ::-webkit-scrollbar-thumb { background: theme('colors.accent', '#6C5CE7'); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: theme('colors.accent-secondary', '#FF6B6B'); }
        html.dark ::-webkit-scrollbar-track { background: theme('colors.dark-secondary-bg', '#1F2833'); }
        html.dark ::-webkit-scrollbar-thumb { background: theme('colors.dark-accent', '#66FCF1'); }
        html.dark ::-webkit-scrollbar-thumb:hover { background: theme('colors.dark-accent-secondary', '#45A29E'); }
        html { scroll-behavior: smooth; }

        /* --- Reveal Animations --- */
        .reveal-hidden { opacity: 0; transform: translateY(30px); transition: opacity 0.8s ease-out, transform 0.8s ease-out; }
        .reveal-visible { opacity: 1; transform: translateY(0); }
        .reveal-slide-left { opacity: 0; transform: translateX(-50px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
        .reveal-slide-right { opacity: 0; transform: translateX(50px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
        .reveal-visible.slide-in { opacity: 1; transform: translateX(0); }

        /* --- Header & Nav --- */
        header.scrolled { @apply h-14 shadow-md; }
        header.scrolled .h-16 { @apply h-14; }
        header.scrolled .h-8 { @apply h-7; }
        .nav-link.nav-active { @apply bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent; }
        .nav-link .active-underline { display: none; width: 0%; height: 2px; background-image: linear-gradient(to right, theme('colors.accent'), theme('colors.accent-secondary')); position: absolute; bottom: -2px; left: 50%; transform: translateX(-50%); transition: width 0.3s ease; }
        html.dark .nav-link .active-underline { background-image: linear-gradient(to right, theme('colors.dark-accent'), theme('colors.dark-accent-secondary')); }
        .nav-link.nav-active .active-underline { display: block !important; width: 60%; }
        .mobile-nav-link.nav-active { background-image: linear-gradient(to right, theme('colors.accent/10'), theme('colors.accent-secondary/20')); color: theme('colors.accent') !important; }
        html.dark .mobile-nav-link.nav-active { background-image: linear-gradient(to right, theme('colors.dark-accent/10'), theme('colors.dark-accent-secondary/20')); color: theme('colors.dark-accent') !important; }
        #mobile-menu { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out, opacity 0.3s ease-out; opacity: 0; }
        #mobile-menu.open { max-height: 500px; opacity: 1; }

        /* --- Preloader --- */
        #preloader { position: fixed; inset: 0; background-color: #F7F7F7; z-index: 9999; display: flex; align-items: center; justify-content: center; opacity: 1; transition: opacity 0.5s ease-out 0.5s, visibility 0s linear 1s; visibility: visible; } /* Adjusted transition */
        html.dark #preloader { background-color: #0B0C10; }
        #preloader.hidden { opacity: 0; visibility: hidden; pointer-events: none; } /* Use visibility */
        .preloader-pulse { width: 60px; height: 60px; border-radius: 50%; background-color: theme('colors.accent', '#6C5CE7'); box-shadow: 0 0 0 0 theme('colors.accent/50', 'rgba(108, 92, 231, 0.5)'); animation: pulse 2s infinite cubic-bezier(0.66, 0, 0, 1); }
        html.dark .preloader-pulse { background-color: theme('colors.dark-accent', '#66FCF1'); box-shadow: 0 0 0 0 theme('colors.dark-accent/50', 'rgba(102, 252, 241, 0.5)'); }
        @keyframes pulse { to { box-shadow: 0 0 0 45px rgba(108, 92, 231, 0); } }
        html.dark @keyframes pulse { to { box-shadow: 0 0 0 45px rgba(102, 252, 241, 0); } }

        /* --- Canvas & Tilt --- */
        #particle-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        #main-content-container { perspective: 1000px; transition: transform 0.5s cubic-bezier(0.23, 1, 0.32, 1); }

        /* --- Buttons & Toast --- */
        .know-more-button { @apply inline-flex items-center justify-center px-6 py-2 mt-8 text-sm font-medium rounded-lg shadow-md transition-all duration-300 ease-out transform hover:-translate-y-1 hover:scale-103; @apply bg-gradient-to-r from-accent/80 to-accent-secondary/80 dark:from-dark-accent/80 dark:to-dark-accent-secondary/80 text-white dark:text-jet-black; @apply hover:from-accent hover:to-accent-secondary dark:hover:from-dark-accent dark:hover:to-dark-accent-secondary hover:shadow-lg; @apply focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent dark:focus:ring-dark-accent; }
        .know-more-button i { @apply ml-2 h-4 w-4 transition-transform duration-300 group-hover:translate-x-1; }
        #back-to-top { position: fixed; bottom: 20px; right: 20px; opacity: 0; visibility: hidden; transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out, transform 0.3s ease-in-out; transform: translateY(20px); z-index: 1000; @apply focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent dark:focus:ring-dark-accent; }
        #back-to-top.visible { opacity: 1; visibility: visible; transform: translateY(0); }
        #copy-toast { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background-color: theme('colors.emerald-green', '#2ECC71'); color: white; padding: 10px 20px; border-radius: 20px; font-size: 0.9rem; z-index: 10000; opacity: 0; transition: opacity 0.3s ease-out, transform 0.3s ease-out; pointer-events: none; }
        #copy-toast.show { opacity: 1; transform: translateX(-50%) translateY(-10px); }
        #floating-whatsapp { position: fixed; bottom: 90px; right: 20px; z-index: 999; transition: transform 0.3s ease-out; @apply focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-whatsapp-green; }
         #floating-whatsapp:hover { transform: scale(1.1); }

        /* --- Accessibility Focus --- */
        *:focus-visible { outline: 2px solid theme('colors.accent', '#6C5CE7'); outline-offset: 2px; border-radius: 2px; }
        html.dark *:focus-visible { outline-color: theme('colors.dark-accent', '#66FCF1'); }
        *:focus { outline: none; }

        /* --- Styles for About Page --- */
        /* 1. Interactive Timeline Enhancements */
        .about-timeline-item { position: relative; padding-left: 3rem; padding-bottom: 2rem; border-left: 3px solid theme('colors.accent/50', 'rgba(108, 92, 231, 0.5)'); transition: border-color 0.3s ease; }
        html.dark .about-timeline-item { border-left-color: theme('colors.dark-accent/50', 'rgba(102, 252, 241, 0.5)'); }
        .about-timeline-item:hover { border-left-color: theme('colors.accent', '#6C5CE7'); }
        html.dark .about-timeline-item:hover { border-left-color: theme('colors.dark-accent', '#66FCF1'); }
        .about-timeline-icon { position: absolute; left: -1rem; top: 0; transform: translateX(-50%); width: 2rem; height: 2rem; border-radius: 50%; display: flex; align-items: center; justify-content: center; background-color: theme('colors.secondary-bg', '#E0C097'); border: 3px solid theme('colors.accent', '#6C5CE7'); transition: all 0.3s ease; z-index: 1; }
        html.dark .about-timeline-icon { background-color: theme('colors.dark-secondary-bg', '#1F2833'); border-color: theme('colors.dark-accent', '#66FCF1'); }
        .about-timeline-item:hover .about-timeline-icon { transform: translateX(-50%) scale(1.1); border-color: theme('colors.accent-secondary', '#FF6B6B'); }
        html.dark .about-timeline-item:hover .about-timeline-icon { border-color: theme('colors.dark-accent-secondary', '#45A29E'); }
        .about-timeline-icon i { width: 1rem; height: 1rem; color: theme('colors.accent', '#6C5CE7'); }
        html.dark .about-timeline-icon i { color: theme('colors.dark-accent', '#66FCF1'); }
        .timeline-details { max-height: 0; overflow: hidden; transition: max-height 0.5s ease-out, opacity 0.5s ease-out, margin-top 0.5s ease-out; opacity: 0; margin-top: 0; }
        .timeline-details.open { max-height: 300px; opacity: 1; margin-top: 0.75rem; }
        .timeline-toggle-btn { @apply text-xs font-mono text-accent dark:text-dark-accent hover:underline cursor-pointer mt-2 inline-block focus:outline-none focus:ring-1 focus:ring-accent dark:focus:ring-dark-accent rounded; }

        /* 2. Skill Cloud Styling */
        #skill-cloud-container { position: relative; min-height: 350px; background: theme('colors.glass-light', 'rgba(225, 229, 255, 0.1)'); border: 1px solid theme('colors.secondary-text/10', 'rgba(74, 74, 74, 0.1)'); border-radius: 0.75rem; padding: 1rem; box-shadow: theme('boxShadow.lg'); backdrop-filter: blur(10px); }
        html.dark #skill-cloud-container { background: theme('colors.glass-dark', 'rgba(17, 24, 39, 0.2)'); border-color: theme('colors.dark-secondary-text/20', 'rgba(197, 198, 199, 0.2)'); }
        #skill-cloud svg { width: 100%; height: 100%; display: block; } /* Added display block */
        .skill-tag { cursor: default; transition: transform 0.2s ease-out, opacity 0.2s ease-out; opacity: 0.8; }
        .skill-tag:hover { transform: scale(1.1); opacity: 1; filter: drop-shadow(0 0 3px currentColor); }

        /* 3. Animated Background Gradient */
        @keyframes subtleGradient { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        .animated-gradient-bg { background: linear-gradient(-45deg, theme('colors.primary-bg', '#F7F7F7'), theme('colors.secondary-bg/30', 'rgba(224, 192, 151, 0.3)'), theme('colors.accent/10', 'rgba(108, 92, 231, 0.1)'), theme('colors.primary-bg', '#F7F7F7')); background-size: 400% 400%; animation: subtleGradient 25s ease infinite; }
        html.dark .animated-gradient-bg { background: linear-gradient(-45deg, theme('colors.dark-primary-bg', '#0B0C10'), theme('colors.dark-secondary-bg/30', 'rgba(31, 40, 51, 0.3)'), theme('colors.dark-accent/10', 'rgba(102, 252, 241, 0.1)'), theme('colors.dark-primary-bg', '#0B0C10')); background-size: 400% 400%; animation: subtleGradient 25s ease infinite; }

        /* 5. Value Cards with Flip Animation */
        .value-card-container { perspective: 1000px; }
        .value-card { position: relative; width: 100%; height: 180px; transform-style: preserve-3d; transition: transform 0.7s cubic-bezier(0.4, 0.2, 0.2, 1); cursor: pointer; @apply rounded-xl shadow-lg bg-glass-light dark:bg-glass-dark border border-secondary-text/10 dark:border-dark-secondary-text/20; }
        .value-card .front, .value-card .back { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; padding: 1.5rem; @apply rounded-xl; }
        .value-card .front { z-index: 2; }
        .value-card .back { transform: rotateY(180deg); z-index: 1; background-image: linear-gradient(to br, theme('colors.accent/30', 'rgba(108, 92, 231, 0.3)'), theme('colors.accent-secondary/30', 'rgba(255, 107, 107, 0.3)')); }
        html.dark .value-card .back { background-image: linear-gradient(to br, theme('colors.dark-accent/30', 'rgba(102, 252, 241, 0.3)'), theme('colors.dark-accent-secondary/30', 'rgba(69, 162, 158, 0.3)')); }
        .value-card-container:hover .value-card, .value-card-container:focus-within .value-card { transform: rotateY(180deg); }

        /* 6. Code Snippet Showcase */
        .code-snippet-box { @apply font-mono text-xs p-4 rounded-lg bg-jet-black/80 dark:bg-jet-black/90 text-ghost-white overflow-auto relative shadow-inner; min-height: 100px; } /* Added overflow-auto */
        .code-snippet-box::before { content: '_'; animation: blink 1s step-end infinite; @apply text-signal-cyan; position: absolute; right: 1rem; bottom: 0.5rem; }
        @keyframes blink { 50% { opacity: 0; } }
        #code-snippet-content { white-space: pre-wrap; word-break: break-all; }

        /* 9. Parallax Scrolling Effect */
        .parallax-section { background-attachment: fixed; background-position: center; background-repeat: no-repeat; background-size: cover; position: relative; }
        .parallax-overlay { position: absolute; inset: 0; background-color: theme('colors.primary-bg/70', 'rgba(247, 247, 247, 0.7)'); }
        html.dark .parallax-overlay { background-color: theme('colors.dark-primary-bg/80', 'rgba(11, 12, 16, 0.8)'); }

        /* 10. SVG Path Animations */
        .animated-svg-line { stroke-dasharray: 1000; stroke-dashoffset: 1000; animation: drawLine 3s ease-out forwards; }
        @keyframes drawLine { to { stroke-dashoffset: 0; } }

        /* 11. Philosophy Accordion */
        .accordion-item { @apply mb-2 border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-lg overflow-hidden; }
        .accordion-button { @apply w-full flex justify-between items-center p-4 text-left font-semibold text-primary-text dark:text-dark-primary-text bg-glass-light dark:bg-glass-dark hover:bg-accent/5 dark:hover:bg-dark-accent/5 transition-colors duration-200 cursor-pointer; @apply focus:outline-none focus:ring-1 focus:ring-inset focus:ring-accent dark:focus:ring-dark-accent; }
        .accordion-button i { transition: transform 0.3s ease; }
        .accordion-button[aria-expanded="true"] i { transform: rotate(180deg); }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.4s ease-out, padding 0.4s ease-out; padding: 0 1rem; @apply bg-secondary-bg/10 dark:bg-dark-secondary-bg/10 text-secondary-text dark:text-dark-secondary-text; }
        .accordion-content.open { max-height: 500px; padding: 1rem; }

        /* 13. Interest Icons with Popovers */
        .interest-popover-container { position: relative; display: inline-block; }
        .interest-icon-btn { @apply p-3 rounded-full bg-glass-light dark:bg-glass-dark border border-secondary-text/10 dark:border-dark-secondary-text/20 shadow-md hover:border-accent dark:hover:border-dark-accent hover:bg-accent/10 dark:hover:bg-dark-accent/10 transition-all duration-300 cursor-pointer focus:outline-none focus:ring-2 focus:ring-accent dark:focus:ring-dark-accent; }
        .interest-icon-btn i { @apply w-6 h-6 text-accent dark:text-dark-accent; }
        .interest-popover { visibility: hidden; opacity: 0; transition: visibility 0s 0.3s, opacity 0.3s ease-out; position: absolute; bottom: 110%; left: 50%; transform: translateX(-50%); width: 200px; background-color: theme('colors.tertiary-light', '#F5B041'); color: theme('colors.primary-text', '#0B0C10'); @apply p-3 rounded-lg shadow-lg text-xs font-body z-20; pointer-events: none; }
        html.dark .interest-popover { background-color: theme('colors.tertiary-dark', '#F39C12'); color: theme('colors.dark-primary-text', '#F7F7F7'); }
        .interest-popover::after { content: ""; position: absolute; top: 100%; left: 50%; margin-left: -5px; border-width: 5px; border-style: solid; border-color: theme('colors.tertiary-light', '#F5B041') transparent transparent transparent; }
        html.dark .interest-popover::after { border-top-color: theme('colors.tertiary-dark', '#F39C12'); }
        .interest-popover-container:hover .interest-popover, .interest-icon-btn:focus + .interest-popover { visibility: visible; opacity: 1; transition-delay: 0s; }

        /* 20. Gamified Spark Element */
        .sparkle-container { position: relative; display: inline-block; }
        .sparkle-btn { @apply cursor-pointer focus:outline-none focus:ring-2 focus:ring-accent dark:focus:ring-dark-accent rounded-full; }
        .sparkle { position: absolute; width: 4px; height: 4px; background: theme('colors.accent-secondary', '#FF6B6B'); border-radius: 50%; top: 50%; left: 50%; transform: translate(-50%, -50%); pointer-events: none; opacity: 0; animation: sparkle-effect 0.6s ease-out forwards; }
        html.dark .sparkle { background: theme('colors.dark-accent-secondary', '#45A29E'); }
        @keyframes sparkle-effect { 0% { transform: translate(-50%, -50%) scale(0.5); opacity: 1; } 100% { transform: translate(-50%, -50%) scale(1.5) translate(var(--tx, 0), var(--ty, 0)); opacity: 0; } }

        /* 21. Hover Reveal Text */
        .hover-reveal-keyword { @apply border-b border-dashed border-accent dark:border-dark-accent cursor-help relative; }
        .reveal-content { visibility: hidden; opacity: 0; position: absolute; bottom: 100%; left: 0; margin-bottom: 5px; @apply p-2 bg-tertiary-light dark:bg-tertiary-dark text-primary-text dark:text-dark-primary-text text-xs rounded shadow-lg z-10 w-max max-w-xs; transition: opacity 0.3s ease, visibility 0s 0.3s; pointer-events: none; }
        .hover-reveal-keyword:hover .reveal-content { visibility: visible; opacity: 1; transition-delay: 0s; }

    </style>
    <script>
      // Tailwind Config (Copied from index.html - Essential for theme colors)
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            colors: { /* Keep full color config */
              'jet-black': '#0B0C10', 'ghost-white': '#F7F7F7', 'signal-cyan': '#66FCF1',
              'tech-purple': '#6C5CE7', 'emerald-green': '#2ECC71', 'red-coral': '#FF6B6B',
              'sandstone': '#E0C097', 'whatsapp-green': '#25D366',
              'primary-bg': '#F7F7F7', 'primary-text': '#0B0C10', 'secondary-bg': '#E0C097',
              'secondary-text': '#4A4A4A', 'accent': '#6C5CE7', 'accent-secondary': '#FF6B6B',
              'dark-primary-bg': '#0B0C10', 'dark-primary-text': '#F7F7F7', 'dark-secondary-bg': '#1F2833',
              'dark-secondary-text': '#C5C6C7', 'dark-accent': '#66FCF1', 'dark-accent-secondary': '#45A29E',
              'tertiary-light': '#F5B041', 'tertiary-dark': '#F39C12',
              'glass-light': 'rgba(225, 229, 255, 0.1)', 'glass-dark': 'rgba(17, 24, 39, 0.2)',
              'glass-darker': 'rgba(17, 24, 39, 0.3)',
            },
            fontFamily: { /* Keep font config */
              heading: ['Satoshi', 'Space Grotesk', 'Neue Montreal', 'sans-serif'],
              body: ['Inter', 'IBM Plex Sans', 'sans-serif'],
              mono: ['JetBrains Mono', 'Source Code Pro', 'monospace'],
            },
            keyframes: { /* Keep all keyframes */
               shake: {'0%, 100%': { transform: 'translateX(0)' },'10%, 30%, 50%, 70%, 90%': { transform: 'translateX(-5px)' },'20%, 40%, 60%, 80%': { transform: 'translateX(5px)' },},
               pulse: {'to': { boxShadow: '0 0 0 45px rgba(108, 92, 231, 0)' }},
               'pulse-icon': {'0%': { transform: 'scale(1)' },'50%': { transform: 'scale(1.15)' },'100%': { transform: 'scale(1)' },},
               'bounce-icon': {'0%, 100%': { transform: 'translateY(0) scale(1)' },'50%': { transform: 'translateY(-4px) scale(1.1)' },},
               blink: { '50%': { opacity: '0' } },
               subtleGradient: { '0%': { background-position: '0% 50%' }, '50%': { background-position: '100% 50%' }, '100%': { background-position: '0% 50%' } },
               drawLine: { to: { 'stroke-dashoffset': '0' } },
               'sparkle-effect': { '0%': { transform: 'translate(-50%, -50%) scale(0.5)', opacity: '1' }, '100%': { transform: 'translate(-50%, -50%) scale(1.5) translate(var(--tx, 0), var(--ty, 0))', opacity: '0' } }
             },
             animation: { /* Keep all animations */
               shake: 'shake 0.5s ease-in-out',
               pulse: 'pulse 2s infinite cubic-bezier(0.66, 0, 0, 1)',
               'pulse-icon': 'pulse-icon 1.5s ease-out',
               'bounce-icon': 'bounce-icon 0.5s ease-in-out',
               blink: 'blink 1s step-end infinite',
               'subtle-gradient': 'subtleGradient 25s ease infinite',
               'draw-line': 'drawLine 3s ease-out forwards',
               'sparkle': 'sparkle-effect 0.6s ease-out forwards'
             }
          }
        }
      }
    </script>
    <script>
        // Theme Initialization (Runs immediately)
        (function() {
            try {
                const storedTheme = localStorage.getItem('theme');
                let initialTheme = 'light';
                if (storedTheme) { initialTheme = storedTheme; }
                if (initialTheme === 'dark') { document.documentElement.classList.add('dark'); }
                else { document.documentElement.classList.remove('dark'); }
            } catch (e) {
                console.error("Error applying initial theme:", e);
            }

            // Apply background noise after DOM is ready
            const applyBgNoise = () => {
                try {
                    const noiseLight = "url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%239C92AC' fill-opacity='0.10' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'%3E%3C/path%3E%3C/svg%3E\")";
                    const noiseDark = "url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%23C5C6C7' fill-opacity='0.05' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'%3E%3C/path%3E%3C/svg%3E\")";
                    if (document.body) { document.body.style.backgroundImage = document.documentElement.classList.contains('dark') ? noiseDark : noiseLight; }
                } catch (e) {
                    console.error("Error applying background noise:", e);
                }
            };
             if (document.readyState === 'loading') { document.addEventListener('DOMContentLoaded', applyBgNoise); }
             else { applyBgNoise(); }
        })();
    </script>
</head>
<body class="font-body bg-primary-bg text-primary-text dark:bg-dark-primary-bg dark:text-dark-primary-text min-h-screen relative overflow-x-hidden transition-colors duration-300">

    <div id="preloader"> <div class="preloader-pulse"></div> </div>

    <canvas id="particle-canvas"></canvas>

    <div id="scrollProgressBar" class="fixed top-0 left-0 right-0 h-1 bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary origin-left z-50" style="transform: scaleX(0);"></div>

    <header id="main-header" class="fixed top-0 left-0 right-0 z-40 transition-all duration-300 backdrop-blur-md bg-glass-light dark:bg-glass-dark border-b border-secondary-text/10 dark:border-dark-secondary-text/10 h-16">
       <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16 transition-all duration-300">
                <a href="index.html#hero" class="flex items-center space-x-2 group" aria-label="Daniel Wanjala - Home"> <img src="assets/logo.png" alt="" class="h-8 w-auto transition-transform duration-300 group-hover:scale-110 group-hover:rotate-[-5deg]" aria-hidden="true" onerror="this.style.display='none'; console.error('Logo image failed to load')">
                     <span class="text-xl font-bold bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent font-heading group-hover:opacity-80 transition-opacity duration-300">
                        Daniel Wanjala.
                    </span>
                </a>
                <nav class="hidden md:flex space-x-6" id="desktop-nav" aria-label="Main navigation">
                     <a href="index.html#about" data-section="about" class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 relative text-primary-text dark:text-dark-primary-text nav-active"> About <span class="active-underline" style="display: block !important; width: 60%;"></span> </a>
                     <a href="index.html#skills" data-section="skills" class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 relative text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text"> Skills <span class="active-underline"></span> </a>
                    <a href="index.html#education" data-section="education" class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 relative text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text"> Education <span class="active-underline"></span> </a>
                    <a href="index.html#projects" data-section="projects" class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 relative text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text"> Projects <span class="active-underline"></span> </a>
                    <a href="index.html#essays" data-section="essays" class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 relative text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text"> Essays <span class="active-underline"></span> </a>
                    <a href="index.html#publications" data-section="publications" class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 relative text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text"> Publications <span class="active-underline"></span> </a>
                    <a href="index.html#demos" data-section="demos" class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 relative text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text"> Demos <span class="active-underline"></span> </a>
                    <a href="index.html#contact" data-section="contact" class="nav-link px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 relative text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text"> Contact <span class="active-underline"></span> </a>
                </nav>
                <div class="flex items-center space-x-2">
                     <button id="theme-toggle" aria-label="Toggle Dark/Light Mode" class="interactive-element p-2 rounded-full text-secondary-text dark:text-dark-secondary-text hover:text-accent dark:hover:text-dark-accent hover:bg-secondary-text/10 dark:hover:bg-dark-secondary-text/10 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-accent dark:focus:ring-dark-accent">
                        <i id="theme-icon-sun" data-lucide="sun" class="h-5 w-5 hidden" aria-hidden="true"></i>
                        <i id="theme-icon-moon" data-lucide="moon" class="h-5 w-5" aria-hidden="true"></i>
                     </button>
                    <div class="md:hidden">
                        <button id="mobile-menu-button" class="interactive-element inline-flex items-center justify-center p-2 rounded-md text-secondary-text dark:text-dark-secondary-text hover:text-accent dark:hover:text-dark-accent hover:bg-secondary-text/10 dark:hover:bg-dark-secondary-text/10 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-accent dark:focus:ring-dark-accent" aria-controls="mobile-menu" aria-expanded="false">
                            <span class="sr-only">Open main menu</span>
                            <svg id="menu-icon-open" class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                            <svg id="menu-icon-close" class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="md:hidden bg-glass-light dark:bg-glass-darker border-t border-secondary-text/10 dark:border-dark-secondary-text/10" id="mobile-menu">
             <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3" role="menu" aria-orientation="vertical" aria-labelledby="mobile-menu-button">
                <a href="index.html#hero" data-section="hero" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text" role="menuitem">Hero</a>
                <a href="#about" data-section="about" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 text-accent dark:text-dark-accent nav-active">About</a> <a href="index.html#skills" data-section="skills" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text" role="menuitem">Skills</a>
                <a href="index.html#education" data-section="education" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text" role="menuitem">Education</a>
                <a href="index.html#projects" data-section="projects" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text" role="menuitem">Projects</a>
                <a href="index.html#essays" data-section="essays" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text" role="menuitem">Essays</a>
                <a href="index.html#publications" data-section="publications" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text" role="menuitem">Publications</a>
                <a href="index.html#demos" data-section="demos" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text" role="menuitem">Demos</a>
                <a href="index.html#contact" data-section="contact" class="mobile-nav-link block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 text-secondary-text dark:text-dark-secondary-text hover:text-primary-text dark:hover:text-dark-primary-text" role="menuitem">Contact</a>
            </div>
        </div>
    </header>

    <div id="main-content-container">
        <main class="pt-16"> <section id="about-hero" class="relative py-24 md:py-32 px-4 md:px-8 lg:px-16 overflow-hidden animated-gradient-bg">
                <div class="relative z-10 max-w-4xl mx-auto text-center reveal-hidden">
                    <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold mb-6 text-primary-text dark:text-dark-primary-text font-heading leading-tight tracking-tight">
                        Decoding the Data: <span class="bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent">My Journey</span>
                    </h1>
                    <p class="text-lg md:text-xl text-secondary-text dark:text-dark-secondary-text mb-8 max-w-3xl mx-auto font-body leading-relaxed">
                        From managing critical IT infrastructure to engineering intelligent systems that predict and optimize, my path has been driven by a fascination with technology's potential to solve tangible problems. Dive deeper into the story behind the code.
                    </p>
                    <div class="sparkle-container inline-block">
                         <button class="sparkle-btn p-1" aria-label="Trigger sparkle effect">
                            <i data-lucide="sparkles" class="w-6 h-6 text-accent dark:text-dark-accent"></i>
                        </button>
                    </div>
                </div>
            </section>

            <section id="narrative" class="py-20 px-4 md:px-8 lg:px-16 bg-primary-bg dark:bg-dark-primary-bg">
                <div class="max-w-5xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-12 items-start">
                    <div class="md:col-span-1 reveal-slide-left">
                        <img src="assets/profile.jpg" alt="Daniel Wanjala working" class="rounded-lg shadow-xl w-full h-auto object-cover mb-6 border-4 border-accent/20 dark:border-dark-accent/20" loading="lazy" onerror="this.onerror=null;this.src='https://placehold.co/400x500/0B0C10/F7F7F7?text=Daniel+W.'">
                        <h3 class="text-2xl font-semibold mb-4 font-heading text-primary-text dark:text-dark-primary-text">Daniel Wanjala</h3>
                        <p class="text-md font-medium text-accent dark:text-dark-accent mb-4">Data Scientist & ML Engineer</p>
                        <div class="flex space-x-3">
                            <a href="https://www.linkedin.com/in/daniel-wanjala-912b8b17b/" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn Profile" class="text-secondary-text dark:text-dark-secondary-text hover:text-accent dark:hover:text-dark-accent transition-colors"><i data-lucide="linkedin" class="w-5 h-5"></i></a>
                            <a href="https://github.com/MadScie254" target="_blank" rel="noopener noreferrer" aria-label="GitHub Profile" class="text-secondary-text dark:text-dark-secondary-text hover:text-accent dark:hover:text-dark-accent transition-colors"><i data-lucide="github" class="w-5 h-5"></i></a>
                            <a href="mailto:dmwanjala254@gmail.com" aria-label="Email" class="text-secondary-text dark:text-dark-secondary-text hover:text-accent dark:hover:text-dark-accent transition-colors"><i data-lucide="mail" class="w-5 h-5"></i></a>
                        </div>
                    </div>
                    <div class="md:col-span-2 reveal-slide-right">
                        <h2 class="text-3xl md:text-4xl font-bold mb-6 bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent font-heading tracking-tight">From Systems to Signals: A Tech Odyssey</h2>
                        <p class="text-lg text-secondary-text dark:text-dark-secondary-text mb-6 leading-relaxed font-body">
                            My fascination with technology wasn't born in a data center, but rather in the dynamic world of IT management. As the <strong class="text-accent dark:text-dark-accent font-medium">Senior IT Manager at Kingdom Hospital</strong>, I was immersed in the critical task of keeping systems running, networks secure, and data flowing. It was here, amidst the complexities of healthcare operations, that I witnessed firsthand the transformative power data could hold – if only it could be effectively harnessed.
                        </p>
                        <p class="text-lg text-secondary-text dark:text-dark-secondary-text mb-6 leading-relaxed font-body">
                            Leading IT interns, ensuring uptime, and safeguarding sensitive patient information taught me the importance of robust infrastructure and meticulous processes. But I saw beyond maintenance; I saw patterns, inefficiencies, and opportunities. Questions began to form: Could we predict patient influx? Could we optimize resource allocation? Could we automate routine tasks to free up valuable human expertise? This curiosity sparked a transition, a pivot towards the world of <strong class="text-accent dark:text-dark-accent font-medium">Data Science and Machine Learning</strong>.
                        </p>
                        <p class="text-lg text-secondary-text dark:text-dark-secondary-text leading-relaxed font-body">
                             My Bachelor's in Information Technology from Zetech University provided the foundational bedrock, but the intensive, project-driven <strong class="text-accent dark:text-dark-accent font-medium">Data Science program at Moringa School</strong> truly ignited my passion for extracting insights from raw information. It was a deep dive into Python, predictive modeling, neural networks, and the art of data visualization – translating complex algorithms into tangible results, like the <span class="hover-reveal-keyword">patient flow optimization model<span class="reveal-content">Reduced waiting times by 35% at Kingdom Hospital through predictive analytics.</span></span> I developed, which significantly reduced waiting times at the hospital.
                        </p>
                         <div class="mt-8 p-4 bg-glass-light dark:bg-glass-dark border border-secondary-text/10 dark:border-dark-secondary-text/20 rounded-lg shadow-sm">
                            <p class="text-md italic text-secondary-text dark:text-dark-secondary-text font-body">"The goal is to turn data into information, and information into insight."</p>
                            <p class="text-right text-xs font-mono text-accent dark:text-dark-accent mt-2">- Carly Fiorina (Adapted)</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="journey" class="py-20 px-4 md:px-8 lg:px-16 bg-secondary-bg/30 dark:bg-dark-secondary-bg/30">
                 <h2 class="text-4xl md:text-5xl font-bold mb-16 text-center bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent font-heading tracking-tight reveal-hidden">Milestones on the Path</h2>
                 <div class="max-w-3xl mx-auto">
                    <div class="about-timeline-item reveal-hidden">
                        <div class="about-timeline-icon"><i data-lucide="hard-drive"></i></div>
                        <p class="text-sm font-mono text-accent-secondary dark:text-dark-accent-secondary mb-1">2019 - 2022</p>
                        <h3 class="text-xl font-semibold mb-2 text-primary-text dark:text-dark-primary-text font-heading">Foundation in IT</h3>
                        <p class="text-md text-secondary-text dark:text-dark-secondary-text font-body mb-2">Completed BSc. Information Technology at Zetech University, building a strong base in systems, networks, and software development.</p>
                        <button class="timeline-toggle-btn" aria-expanded="false">Show Details +</button>
                        <div class="timeline-details text-sm text-secondary-text dark:text-dark-secondary-text font-body space-y-1">
                            <p>• Specialized coursework in database management and business intelligence.</p>
                            <p>• Gained practical experience in IT solutions and system design.</p>
                        </div>
                    </div>
                    <div class="about-timeline-item reveal-hidden">
                        <div class="about-timeline-icon"><i data-lucide="hospital"></i></div>
                        <p class="text-sm font-mono text-accent-secondary dark:text-dark-accent-secondary mb-1">Jan 2023 - Present</p>
                        <h3 class="text-xl font-semibold mb-2 text-primary-text dark:text-dark-primary-text font-heading">Senior IT Manager - Kingdom Hospital</h3>
                        <p class="text-md text-secondary-text dark:text-dark-secondary-text font-body mb-2">Led IT operations, network security, and system maintenance in a dynamic healthcare environment.</p>
                        <button class="timeline-toggle-btn" aria-expanded="false">Show Details +</button>
                        <div class="timeline-details text-sm text-secondary-text dark:text-dark-secondary-text font-body space-y-1">
                            <p>• Managed IT interns and ensured data integrity across departments.</p>
                            <p>• Implemented Frappe-based solutions for hospital management.</p>
                            <p>• Oversaw cybersecurity compliance and disaster recovery planning.</p>
                        </div>
                    </div>
                     <div class="about-timeline-item reveal-hidden">
                        <div class="about-timeline-icon"><i data-lucide="brain-circuit"></i></div>
                        <p class="text-sm font-mono text-accent-secondary dark:text-dark-accent-secondary mb-1">During 2023</p>
                        <h3 class="text-xl font-semibold mb-2 text-primary-text dark:text-dark-primary-text font-heading">The Data Science Ignition</h3>
                        <p class="text-md text-secondary-text dark:text-dark-secondary-text font-body mb-2">Volunteering as a Data Scientist at Kingdom Hospital, applying analytics to real-world hospital challenges. Completed Moringa School's Data Science Certificate.</p>
                        <button class="timeline-toggle-btn" aria-expanded="false">Show Details +</button>
                        <div class="timeline-details text-sm text-secondary-text dark:text-dark-secondary-text font-body space-y-1">
                            <p>• Developed predictive models (e.g., patient flow optimization).</p>
                            <p>• Championed data-driven decision-making within operations.</p>
                            <p>• Mastered Python, deep learning, and visualization techniques.</p>
                            <p>• Won Prime Code Champ Contest (2023) for ML/algorithm skills.</p>
                        </div>
                    </div>
                     <div class="about-timeline-item reveal-hidden">
                        <div class="about-timeline-icon"><i data-lucide="users"></i></div>
                        <p class="text-sm font-mono text-accent-secondary dark:text-dark-accent-secondary mb-1">Ongoing</p>
                        <h3 class="text-xl font-semibold mb-2 text-primary-text dark:text-dark-primary-text font-heading">Community Impact & Growth</h3>
                        <p class="text-md text-secondary-text dark:text-dark-secondary-text font-body mb-2">Volunteered ICT expertise for Webuye District, pursued numerous certifications (HackerRank, Google, LinkedIn, Udemy), and engaged with open-source development.</p>
                         <button class="timeline-toggle-btn" aria-expanded="false">Show Details +</button>
                        <div class="timeline-details text-sm text-secondary-text dark:text-dark-secondary-text font-body space-y-1">
                            <p>• Assisted Webuye District with record digitization and cybersecurity.</p>
                            <p>• Continuously learning through certifications in Cloud, Problem Solving, Python, JS, etc.</p>
                            <p>• Exploring interests in AI research, cybersecurity, and DevOps.</p>
                        </div>
                    </div>
                     <div class="about-timeline-item reveal-hidden" style="border-left-color: transparent;"> <div class="about-timeline-icon"><i data-lucide="graduation-cap"></i></div>
                        <p class="text-sm font-mono text-accent-secondary dark:text-dark-accent-secondary mb-1">2024 - Present</p>
                        <h3 class="text-xl font-semibold mb-2 text-primary-text dark:text-dark-primary-text font-heading">Deepening Expertise: MSc Data Science</h3>
                        <p class="text-md text-secondary-text dark:text-dark-secondary-text font-body mb-2">Currently pursuing a Master of Science in Data Science at Cooperative University of Kenya to further specialize in advanced machine learning, statistical modeling, and research.</p>
                         <button class="timeline-toggle-btn" aria-expanded="false">Show Details +</button>
                        <div class="timeline-details text-sm text-secondary-text dark:text-dark-secondary-text font-body space-y-1">
                             <p>• Admitted into the program with special approval based on prior experience.</p>
                             <p>• Focusing on cutting-edge techniques and research methodologies.</p>
                        </div>
                    </div>
                 </div>
            </section>

            <section id="philosophy" class="py-20 px-4 md:px-8 lg:px-16 bg-primary-bg dark:bg-dark-primary-bg">
                 <h2 class="text-4xl md:text-5xl font-bold mb-6 text-center bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent font-heading tracking-tight reveal-hidden">Guiding Principles</h2>
                 <p class="text-lg text-center text-secondary-text dark:text-dark-secondary-text mb-16 max-w-3xl mx-auto font-body leading-relaxed reveal-hidden" data-reveal-delay="100">
                    Technology is a tool, but its true value lies in its application. I believe in building systems that are not just technically sound, but also efficient, ethical, and impactful.
                 </p>

                 <div class="max-w-6xl mx-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="value-card-container reveal-hidden" data-reveal-delay="0" tabindex="0">
                        <div class="value-card">
                            <div class="front">
                                <i data-lucide="database-zap" class="w-12 h-12 mb-3 text-accent dark:text-dark-accent"></i>
                                <h3 class="text-xl font-semibold font-heading">Data-Driven Decisions</h3>
                            </div>
                            <div class="back">
                                <p class="text-sm font-body">Harnessing the power of data to uncover insights, optimize processes, and drive measurable results. Evidence over intuition.</p>
                            </div>
                        </div>
                    </div>
                    <div class="value-card-container reveal-hidden" data-reveal-delay="100" tabindex="0">
                        <div class="value-card">
                            <div class="front">
                                <i data-lucide="zap" class="w-12 h-12 mb-3 text-accent dark:text-dark-accent"></i>
                                <h3 class="text-xl font-semibold font-heading">Efficiency & Automation</h3>
                            </div>
                            <div class="back">
                                <p class="text-sm font-body">Streamlining workflows and automating repetitive tasks to enhance productivity and free up human potential for complex challenges.</p>
                            </div>
                        </div>
                    </div>
                     <div class="value-card-container reveal-hidden" data-reveal-delay="200" tabindex="0">
                        <div class="value-card">
                            <div class="front">
                                <i data-lucide="shield-check" class="w-12 h-12 mb-3 text-accent dark:text-dark-accent"></i>
                                <h3 class="text-xl font-semibold font-heading">Integrity & Security</h3>
                            </div>
                            <div class="back">
                                <p class="text-sm font-body">Prioritizing data privacy, security compliance, and ethical considerations in every solution I build. Trust is paramount.</p>
                            </div>
                        </div>
                    </div>
                     <div class="value-card-container reveal-hidden" data-reveal-delay="300" tabindex="0">
                        <div class="value-card">
                            <div class="front">
                                <i data-lucide="book-open-check" class="w-12 h-12 mb-3 text-accent dark:text-dark-accent"></i>
                                <h3 class="text-xl font-semibold font-heading">Continuous Learning</h3>
                            </div>
                            <div class="back">
                                <p class="text-sm font-body">The tech landscape evolves rapidly. I am committed to lifelong learning, staying curious, and embracing new tools and techniques.</p>
                            </div>
                        </div>
                    </div>
                     <div class="value-card-container reveal-hidden" data-reveal-delay="400" tabindex="0">
                        <div class="value-card">
                            <div class="front">
                                <i data-lucide="puzzle" class="w-12 h-12 mb-3 text-accent dark:text-dark-accent"></i>
                                <h3 class="text-xl font-semibold font-heading">Pragmatic Problem-Solving</h3>
                            </div>
                            <div class="back">
                                <p class="text-sm font-body">Applying critical thinking and analytical skills to break down complex problems and engineer effective, practical solutions.</p>
                            </div>
                        </div>
                    </div>
                     <div class="value-card-container reveal-hidden" data-reveal-delay="500" tabindex="0">
                        <div class="value-card">
                            <div class="front">
                                <i data-lucide="users-2" class="w-12 h-12 mb-3 text-accent dark:text-dark-accent"></i>
                                <h3 class="text-xl font-semibold font-heading">Collaboration</h3>
                            </div>
                            <div class="back">
                                <p class="text-sm font-body">Believing that the best solutions come from teamwork, open communication, and diverse perspectives.</p>
                            </div>
                        </div>
                    </div>
                 </div>

                 <div class="max-w-3xl mx-auto mt-20 reveal-hidden">
                     <h3 class="text-2xl font-semibold mb-6 text-center font-heading text-primary-text dark:text-dark-primary-text">My Approach</h3>
                     <div id="philosophy-accordion">
                         <div class="accordion-item">
                            <h2>
                                <button type="button" class="accordion-button" aria-expanded="false" aria-controls="accordion-content-1">
                                    <span>Bridging IT Foundations and Data Insights</span>
                                    <i data-lucide="chevron-down" class="w-5 h-5"></i>
                                </button>
                            </h2>
                            <div id="accordion-content-1" class="accordion-content" role="region" aria-labelledby="accordion-button-1">
                                <p>My background in IT management provides a unique perspective. I understand the underlying infrastructure, the importance of uptime, security, and user experience. This foundation allows me to build data science solutions that are not just theoretically sound, but also practical, scalable, and integrate seamlessly into existing systems.</p>
                            </div>
                        </div>
                         <div class="accordion-item">
                             <h2>
                                <button type="button" class="accordion-button" aria-expanded="false" aria-controls="accordion-content-2">
                                    <span>Focus on Tangible Outcomes</span>
                                     <i data-lucide="chevron-down" class="w-5 h-5"></i>
                                </button>
                            </h2>
                            <div id="accordion-content-2" class="accordion-content" role="region" aria-labelledby="accordion-button-2">
                                <p>While I'm fascinated by the elegance of algorithms, my primary focus is always on the real-world impact. How can this model improve patient care? How can this analysis boost efficiency? How can this tool empower better decisions? I strive to connect the dots between complex data and concrete, positive outcomes.</p>
                            </div>
                        </div>
                         <div class="accordion-item">
                             <h2>
                                <button type="button" class="accordion-button" aria-expanded="false" aria-controls="accordion-content-3">
                                    <span>Ethical Considerations in AI</span>
                                     <i data-lucide="chevron-down" class="w-5 h-5"></i>
                                </button>
                            </h2>
                            <div id="accordion-content-3" class="accordion-content" role="region" aria-labelledby="accordion-button-3">
                                <p>As we build more intelligent systems, understanding and mitigating bias, ensuring fairness, and maintaining transparency are crucial. I am committed to developing and deploying AI responsibly, considering the potential societal impacts and striving for ethical best practices.</p>
                            </div>
                        </div>
                     </div>
                 </div>
            </section>

            <section id="skills-visualized" class="py-20 px-4 md:px-8 lg:px-16 bg-secondary-bg/30 dark:bg-dark-secondary-bg/30">
                <h2 class="text-4xl md:text-5xl font-bold mb-16 text-center bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent font-heading tracking-tight reveal-hidden">Toolkit & Expertise</h2>
                 <div class="max-w-4xl mx-auto reveal-hidden">
                    <p class="text-center text-lg text-secondary-text dark:text-dark-secondary-text mb-10 font-body">Visualizing the core areas of my technical skillset using a dynamic cloud:</p>
                    <div id="skill-cloud-container">
                        <div id="skill-cloud" class="w-full h-full">
                            </div>
                    </div>
                    <p class="text-center text-xs text-secondary-text dark:text-dark-secondary-text mt-4 font-mono">Hover over skills for emphasis. Size indicates relative focus/experience.</p>
                 </div>

                 <div class="max-w-2xl mx-auto mt-20 reveal-hidden">
                     <h3 class="text-2xl font-semibold mb-4 text-center font-heading text-primary-text dark:text-dark-primary-text">A Glimpse of Code</h3>
                     <div class="code-snippet-box">
                         <pre><code id="code-snippet-content"></code></pre>
                     </div>
                     <p class="text-center text-xs text-secondary-text dark:text-dark-secondary-text mt-2 font-mono">Illustrative snippet (auto-typing effect)</p>
                 </div>
            </section>

             <section id="beyond-code" class="py-20 px-4 md:px-8 lg:px-16 bg-primary-bg dark:bg-dark-primary-bg">
                <h2 class="text-4xl md:text-5xl font-bold mb-16 text-center bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary bg-clip-text text-transparent font-heading tracking-tight reveal-hidden">Beyond the Keyboard</h2>
                <p class="text-lg text-center text-secondary-text dark:text-dark-secondary-text mb-12 max-w-3xl mx-auto font-body leading-relaxed reveal-hidden" data-reveal-delay="100">
                    Life isn't just algorithms and datasets. When I step away from the screen, I recharge through exploration, community, and a healthy dose of competition.
                </p>
                <div class="max-w-4xl mx-auto flex flex-wrap justify-center gap-8 md:gap-12 reveal-hidden" data-reveal-delay="200">
                    <div class="interest-popover-container text-center">
                        <button class="interest-icon-btn" aria-describedby="popover-hiking">
                            <i data-lucide="mountain-snow"></i>
                        </button>
                        <div id="popover-hiking" class="interest-popover" role="tooltip">Exploring Kenya's beautiful trails and landscapes helps clear the mind and offers new perspectives.</div>
                        <p class="mt-2 text-sm font-medium text-secondary-text dark:text-dark-secondary-text">Hiking</p>
                    </div>
                    <div class="interest-popover-container text-center">
                         <button class="interest-icon-btn" aria-describedby="popover-ai">
                            <i data-lucide="brain"></i>
                        </button>
                         <div id="popover-ai" class="interest-popover" role="tooltip">Constantly diving into the latest advancements in AI, predictive analytics, and machine learning research.</div>
                        <p class="mt-2 text-sm font-medium text-secondary-text dark:text-dark-secondary-text">AI Research</p>
                    </div>
                    <div class="interest-popover-container text-center">
                         <button class="interest-icon-btn" aria-describedby="popover-oss">
                            <i data-lucide="github"></i>
                        </button>
                         <div id="popover-oss" class="interest-popover" role="tooltip">Contributing to and learning from the open-source community, with a keen interest in cybersecurity principles.</div>
                        <p class="mt-2 text-sm font-medium text-secondary-text dark:text-dark-secondary-text">Open Source & Security</p>
                    </div>
                     <div class="interest-popover-container text-center">
                         <button class="interest-icon-btn" aria-describedby="popover-rugby">
                            <i data-lucide="activity"></i> </button>
                         <div id="popover-rugby" class="interest-popover" role="tooltip">The teamwork, strategy, and physical challenge of rugby offer valuable lessons applicable beyond the field.</div>
                        <p class="mt-2 text-sm font-medium text-secondary-text dark:text-dark-secondary-text">Rugby</p>
                    </div>
                     <div class="interest-popover-container text-center">
                         <button class="interest-icon-btn" aria-describedby="popover-cloud">
                            <i data-lucide="cloud"></i>
                        </button>
                         <div id="popover-cloud" class="interest-popover" role="tooltip">Exploring cloud computing platforms and DevOps practices to build scalable and resilient systems.</div>
                        <p class="mt-2 text-sm font-medium text-secondary-text dark:text-dark-secondary-text">Cloud & DevOps</p>
                    </div>
                </div>
            </section>

            <section id="about-cta" class="py-20 px-4 bg-gradient-to-r from-accent to-accent-secondary dark:from-dark-accent dark:to-dark-accent-secondary text-center">
                <div class="max-w-3xl mx-auto reveal-hidden">
                    <h2 class="text-3xl md:text-4xl font-bold mb-6 text-white dark:text-jet-black font-heading">Intrigued by the Journey?</h2>
                    <p class="text-lg text-ghost-white/90 dark:text-jet-black/90 mb-8 font-body leading-relaxed">
                        If my blend of technical expertise, practical experience, and passion for data-driven solutions resonates with you, let's connect. I'm always open to discussing new challenges, collaborations, or opportunities to make an impact.
                    </p>
                    <a href="index.html#contact" class="interactive-element group relative inline-flex items-center justify-center px-8 py-3 bg-white dark:bg-jet-black text-accent dark:text-dark-accent font-semibold rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 ease-out transform hover:-translate-y-1 hover:scale-103 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-white dark:focus:ring-jet-black">
                        Get In Touch
                        <i data-lucide="send" class="ml-2 h-5 w-5 transform transition-transform duration-300 group-hover:translate-x-1" aria-hidden="true"></i>
                    </a>
                </div>
            </section>

        </main>

        <footer class="bg-secondary-bg/10 dark:bg-dark-secondary-bg text-secondary-text dark:text-dark-secondary-text py-6 px-4 md:px-8 text-center text-sm reveal-hidden opacity-0 border-t border-secondary-text/10 dark:border-dark-secondary-text/10 font-body">
             © <span id="currentYear"></span> Daniel Wanjala. All rights reserved. | Predicting Progress. Designing Resilience.
        </footer>

        <a id="floating-whatsapp" href="#" target="_blank" rel="noopener noreferrer" aria-label="Chat on WhatsApp" class="interactive-element p-3 rounded-full bg-whatsapp-green text-white shadow-lg hover:bg-whatsapp-green/90">
             <i data-lucide="message-circle" class="h-6 w-6" aria-hidden="true"></i>
        </a>

        <button id="back-to-top" aria-label="Back to Top" class="interactive-element p-3 rounded-full bg-accent dark:bg-dark-accent text-white dark:text-jet-black shadow-lg hover:bg-accent-secondary dark:hover:bg-dark-accent-secondary transition-all duration-300">
            <i data-lucide="arrow-up" class="h-5 w-5" aria-hidden="true"></i>
        </button>

        <div id="copy-toast" role="status" aria-live="polite">✅ Copied!</div>

    </div> <script>
        /**
         * Main JavaScript for Daniel Wanjala's About Page
         * Includes shared functionality from index.html and new features.
         * Added error handling and checks for library loading.
         */
        document.addEventListener('DOMContentLoaded', () => {
            console.log("DOM fully loaded and parsed."); // Debug log

            // --- Initialize Lucide Icons ---
            try {
                if (typeof lucide !== 'undefined') {
                    lucide.createIcons();
                    console.log("Lucide icons initialized."); // Debug log
                } else {
                    console.warn('Lucide icons library not loaded at DOMContentLoaded.');
                    // Optionally, try again after a short delay or on window.load
                }
            } catch (e) {
                console.error('Error creating Lucide icons:', e);
            }

            // --- Constants and State (Shared & New) ---
            const whatsappBaseUrl = "https://wa.me/254742007277";
            const whatsappMessage = "Hello Daniel, I visited your about page and would like to connect.";
            const particleInteractionRadius = 120;
            const particleLineThreshold = 110;
            const scrollRevealThreshold = 0.1;
            const scrollRevealRootMargin = "0px 0px -50px 0px";

            // State Variables
            let toneJsStarted = false;
            let synth, clickSynth;
            let particleAnimationId = null;
            let mouse = { x: null, y: null };
            let isScrolling;
            let toastTimeout;
            let codeTyperTimeout;
            let skillCloudResizeTimeout; // Added for debouncing skill cloud redraw

            // --- DOM Element References (Cache elements) ---
            const getElement = (id) => document.getElementById(id);
            const querySelector = (selector) => document.querySelector(selector);
            const querySelectorAll = (selector) => document.querySelectorAll(selector);

            const htmlEl = document.documentElement;
            const bodyEl = document.body;
            const preloader = getElement('preloader');
            const mainHeader = getElement('main-header');
            const themeToggleButton = getElement('theme-toggle');
            const themeIconSun = getElement('theme-icon-sun');
            const themeIconMoon = getElement('theme-icon-moon');
            const mobileMenuButton = getElement('mobile-menu-button');
            const mobileMenu = getElement('mobile-menu');
            const menuIconOpen = getElement('menu-icon-open');
            const menuIconClose = getElement('menu-icon-close');
            const currentYearEl = getElement('currentYear');
            const scrollProgressBar = getElement('scrollProgressBar');
            const navLinks = querySelectorAll('#desktop-nav .nav-link');
            const mobileNavLinks = querySelectorAll('#mobile-menu .mobile-nav-link');
            const floatingWhatsappLink = getElement('floating-whatsapp');
            const copyButtons = querySelectorAll('.copy-btn');
            const copyToast = getElement('copy-toast');
            const mainContentContainer = getElement('main-content-container');
            const particleCanvas = getElement('particle-canvas');
            const backToTopButton = getElement('back-to-top');
            const interactiveElements = querySelectorAll('a[href], button, [role="button"], [role="link"], .value-card-container, .accordion-button, .timeline-toggle-btn, .interest-icon-btn, .sparkle-btn, #theme-toggle, #back-to-top, .copy-btn, #floating-whatsapp');

            // New Elements
            const timelineToggleButtons = querySelectorAll('.timeline-toggle-btn');
            const skillCloudContainer = getElement('skill-cloud'); // The inner div where SVG is appended
            const codeSnippetEl = getElement('code-snippet-content');
            const accordionButtons = querySelectorAll('.accordion-button');
            const sparkleButton = querySelector('.sparkle-btn');

            // --- Helper Functions ---
            const checkLibrary = (libName) => typeof window[libName] !== 'undefined';

            // --- Initial Setup Functions ---
            function hidePreloader() {
                 // Use window.load to ensure all assets (images, etc.) are loaded
                 window.addEventListener('load', () => {
                    console.log("Window loaded."); // Debug log
                     // Delay hiding slightly to avoid layout shifts if content renders late
                     setTimeout(() => {
                        if (preloader) {
                            preloader.classList.add('hidden');
                            console.log("Preloader hidden."); // Debug log
                        } else {
                            console.warn("Preloader element not found.");
                        }
                     }, 100); // Shorter delay, check if sufficient
                 }, { once: true });

                 // Fallback: Hide preloader after a max timeout if window.load fails/takes too long
                 setTimeout(() => {
                     if (preloader && !preloader.classList.contains('hidden')) {
                         console.warn("Preloader forced hidden after timeout.");
                         preloader.classList.add('hidden');
                     }
                 }, 5000); // 5 seconds max wait
            }

            function setupWhatsAppLinks() {
                try {
                    const encodedMessage = encodeURIComponent(whatsappMessage);
                    const whatsappUrlWithMessage = `${whatsappBaseUrl}?text=${encodedMessage}`;
                    if (floatingWhatsappLink) floatingWhatsappLink.href = whatsappUrlWithMessage;
                } catch (e) {
                    console.error("Error setting up WhatsApp links:", e);
                }
            }

            function setupToneJS() {
                 const startTone = () => {
                    if (toneJsStarted || !checkLibrary('Tone')) return;
                    try {
                        Tone.start();
                        synth = new Tone.Synth({ oscillator: { type: 'sine' }, envelope: { attack: 0.005, decay: 0.1, sustain: 0.1, release: 0.1 }, volume: -25 }).toDestination();
                        clickSynth = new Tone.Synth({ oscillator: { type: 'triangle' }, envelope: { attack: 0.001, decay: 0.1, sustain: 0.05, release: 0.1 }, volume: -20 }).toDestination();
                        toneJsStarted = true; console.log("Tone.js AudioContext started.");
                        ['click', 'keydown', 'touchstart'].forEach(evt => bodyEl.removeEventListener(evt, startTone));
                    } catch (e) { console.error("Tone.js initialization failed:", e); toneJsStarted = false; }
                };
                if (checkLibrary('Tone')) {
                    ['click', 'keydown', 'touchstart'].forEach(evt => bodyEl.addEventListener(evt, startTone, { once: true, passive: true }));
                } else {
                    console.warn("Tone.js library not loaded.");
                }
            }

            function addSoundFeedback() {
                 interactiveElements.forEach(el => {
                    try {
                        el.addEventListener('mouseenter', () => { if (toneJsStarted && synth) { try { synth.triggerAttackRelease('C5', '16n', Tone.now()); } catch(e) {} } });
                        el.addEventListener('click', () => { if (toneJsStarted && clickSynth) { try { clickSynth.triggerAttackRelease('E4', '16n', Tone.now()); } catch(e) {} } });
                    } catch (e) {
                        console.error("Error adding sound feedback listener:", e, el);
                    }
                 });
            }

            function setFooterYear() { try { if (currentYearEl) currentYearEl.textContent = new Date().getFullYear(); } catch(e) { console.error("Error setting footer year:", e); } }

            function updateThemeUI() {
                 try {
                    if (!htmlEl || !bodyEl) return;
                    const isDark = htmlEl.classList.contains('dark');
                    if (themeIconSun && themeIconMoon) {
                        themeIconSun.classList.toggle('hidden', !isDark);
                        themeIconMoon.classList.toggle('hidden', isDark);
                        if (checkLibrary('lucide')) lucide.createIcons();
                    }
                    // Apply background noise (already handled by IIFE on load)
                    // Redraw particles and skill cloud as their colors depend on the theme
                    if (particleCanvas) initParticles();
                    if (skillCloudContainer) drawSkillCloud();
                 } catch (e) {
                    console.error("Error updating theme UI:", e);
                 }
            }

             function setTheme(theme) {
                 try {
                    if (!htmlEl) return;
                    htmlEl.classList.toggle('dark', theme === 'dark');
                    localStorage.setItem('theme', theme);
                    updateThemeUI();
                    if (toneJsStarted && clickSynth) { try { clickSynth.triggerAttackRelease(theme === 'dark' ? 'C3' : 'G3', '8n', Tone.now()); } catch(e) {} }
                 } catch (e) {
                    console.error("Error setting theme:", e);
                 }
            }

            function toggleMobileMenu() {
                try {
                    if (!mobileMenuButton || !mobileMenu || !menuIconOpen || !menuIconClose) return;
                    const isExpanded = mobileMenuButton.getAttribute('aria-expanded') === 'true';
                    mobileMenuButton.setAttribute('aria-expanded', !isExpanded);
                    mobileMenu.classList.toggle('open');
                    menuIconOpen.classList.toggle('hidden');
                    menuIconClose.classList.toggle('hidden');
                } catch (e) {
                    console.error("Error toggling mobile menu:", e);
                }
            }

             function closeMobileMenu() {
                try {
                    if (!mobileMenuButton || !mobileMenu || !menuIconOpen || !menuIconClose) return;
                    if (mobileMenuButton.getAttribute('aria-expanded') === 'true') {
                        mobileMenuButton.setAttribute('aria-expanded', 'false');
                        mobileMenu.classList.remove('open');
                        menuIconOpen.classList.remove('hidden');
                        menuIconClose.classList.add('hidden');
                    }
                } catch (e) {
                    console.error("Error closing mobile menu:", e);
                }
            }

            function handleScroll() {
                try {
                    if (!htmlEl || !scrollProgressBar || !mainHeader) return;
                    const scrollableHeight = htmlEl.scrollHeight - window.innerHeight;
                    const scrolled = window.scrollY;
                    // Ensure progress is between 0 and 1, handle division by zero
                    const progress = scrollableHeight > 0 ? Math.max(0, Math.min(1, scrolled / scrollableHeight)) : 0;
                    scrollProgressBar.style.transform = `scaleX(${progress})`;
                    mainHeader.classList.toggle('scrolled', scrolled > 50);
                    if (backToTopButton) { backToTopButton.classList.toggle('visible', scrolled > 300); }
                } catch (e) {
                    console.error("Error handling scroll:", e);
                }
            }

            function setupScrollReveal() {
                try {
                    if (typeof IntersectionObserver === 'undefined') {
                        console.warn("IntersectionObserver not supported, reveal animations disabled.");
                        // Optionally, make all elements visible immediately
                        querySelectorAll('.reveal-hidden, .reveal-slide-left, .reveal-slide-right').forEach(el => el.classList.add('reveal-visible', 'slide-in'));
                        return;
                    }
                    const revealObserverOptions = { threshold: scrollRevealThreshold, rootMargin: scrollRevealRootMargin };
                    const revealCallback = (entries, observer) => {
                        entries.forEach((entry, index) => {
                            if (entry.isIntersecting) {
                                try {
                                    const delay = entry.target.dataset.revealDelay ? parseInt(entry.target.dataset.revealDelay) : (index * 50);
                                    entry.target.style.transitionDelay = `${delay}ms`;
                                    entry.target.classList.add('reveal-visible');
                                    if (entry.target.classList.contains('reveal-slide-left') || entry.target.classList.contains('reveal-slide-right')) { entry.target.classList.add('slide-in'); }
                                    if (entry.target.classList.contains('about-timeline-item')) {
                                        const icon = entry.target.querySelector('.about-timeline-icon');
                                        if (icon) icon.style.animation = `pulse-icon 1.5s ease-out ${delay + 200}ms`;
                                    }
                                    observer.unobserve(entry.target);
                                } catch (e) {
                                    console.error("Error revealing element:", e, entry.target);
                                    entry.target.classList.add('reveal-visible', 'slide-in'); // Force visible on error
                                    observer.unobserve(entry.target);
                                }
                            }
                        });
                    };
                    const revealObserver = new IntersectionObserver(revealCallback, revealObserverOptions);
                    querySelectorAll('.reveal-hidden, .reveal-slide-left, .reveal-slide-right').forEach(el => revealObserver.observe(el));
                } catch (e) {
                    console.error("Error setting up scroll reveal:", e);
                    // Fallback: Make all elements visible if setup fails
                    querySelectorAll('.reveal-hidden, .reveal-slide-left, .reveal-slide-right').forEach(el => el.classList.add('reveal-visible', 'slide-in'));
                }
            }

             function setupClipboardCopy() {
                try {
                    copyButtons.forEach(button => {
                        button.addEventListener('click', () => {
                            const textToCopy = button.dataset.copyText;
                            if (textToCopy && navigator.clipboard) {
                                navigator.clipboard.writeText(textToCopy).then(() => {
                                    if (copyToast) { copyToast.classList.add('show'); clearTimeout(toastTimeout); toastTimeout = setTimeout(() => { copyToast.classList.remove('show'); }, 2000); }
                                    const icon = button.querySelector('i[data-lucide]');
                                    if (icon) { const originalIcon = icon.getAttribute('data-lucide'); icon.setAttribute('data-lucide', 'check'); if (checkLibrary('lucide')) lucide.createIcons(); setTimeout(() => { icon.setAttribute('data-lucide', originalIcon); if (checkLibrary('lucide')) lucide.createIcons(); }, 1500); }
                                    if (toneJsStarted && clickSynth) { try { clickSynth.triggerAttackRelease('G4', '16n', Tone.now()); } catch(e) {} }
                                }).catch(err => { console.error('Failed to copy text: ', err); });
                            } else { console.warn('Clipboard API not available or no text to copy.'); }
                        });
                    });
                } catch (e) {
                    console.error("Error setting up clipboard copy:", e);
                }
             }

            function setupTiltEffect() {
                try {
                    if (!mainContentContainer) return;
                    if (window.DeviceOrientationEvent) {
                        const handleOrientation = (event) => {
                            if (event.beta === null || event.gamma === null) return;
                            const beta = Math.max(-20, Math.min(20, event.beta)); const gamma = Math.max(-20, Math.min(20, event.gamma));
                            const maxTilt = 1.5; const tiltY = (beta / 20 * maxTilt).toFixed(2); const tiltX = (gamma / 20 * -maxTilt).toFixed(2);
                            requestAnimationFrame(() => { mainContentContainer.style.transform = `perspective(1500px) rotateX(${tiltY}deg) rotateY(${tiltX}deg)`; });
                        };
                        window.addEventListener('deviceorientation', handleOrientation, true);
                    } else { console.log("DeviceOrientation not supported."); }
                } catch (e) {
                    console.error("Error setting up tilt effect:", e);
                }
            }

            function setupBackToTop() { try { if (backToTopButton) { backToTopButton.addEventListener('click', () => { window.scrollTo({ top: 0, behavior: 'smooth' }); }); } } catch(e) { console.error("Error setting up back-to-top:", e); } }

            // --- Particle Background Logic (Keep as is, assumed stable) ---
            let particles = [];
            function initParticles() { if (!particleCanvas) return; const ctx = particleCanvas.getContext('2d'); if (!ctx) return; if (particleAnimationId) cancelAnimationFrame(particleAnimationId); resizeCanvas(); particles.forEach(p => p.baseColor = null); createParticles(); if (!document.hidden) { drawParticles(); } }
            function resizeCanvas() { if (!particleCanvas) return; particleCanvas.width = window.innerWidth; particleCanvas.height = window.innerHeight; }
            function createParticles() { if (!particleCanvas) return; particles = []; const particleCount = Math.floor((particleCanvas.width * particleCanvas.height) / 18000); for (let i = 0; i < particleCount; i++) { particles.push({ x: Math.random() * particleCanvas.width, y: Math.random() * particleCanvas.height, vx: (Math.random() - 0.5) * 0.3, vy: (Math.random() - 0.5) * 0.3, radius: Math.random() * 1.8 + 0.8, baseRadius: Math.random() * 1.8 + 0.8, baseColor: null, drawColor: null }); } }
            function drawParticles() { if (!particleCanvas) return; const ctx = particleCanvas.getContext('2d'); if (!ctx) return; ctx.clearRect(0, 0, particleCanvas.width, particleCanvas.height); const isDark = htmlEl.classList.contains('dark'); const twConfig = tailwind.config.theme.extend.colors; const lightColors = [`${twConfig.accent}80`, `${twConfig['accent-secondary']}80`, `${twConfig['tertiary-light']}60`]; const darkColors = [`${twConfig['dark-accent']}80`, `${twConfig['dark-accent-secondary']}80`, `${twConfig['tertiary-dark']}60`]; const themeColors = isDark ? darkColors : lightColors; const lineColor = isDark ? 'rgba(197, 198, 199, 0.05)' : 'rgba(74, 74, 74, 0.05)'; particles.forEach((p, i) => { if (!p.baseColor) p.baseColor = themeColors[Math.floor(Math.random() * themeColors.length)]; p.drawColor = p.baseColor; p.radius = p.baseRadius; if (mouse.x !== null && mouse.y !== null) { const dx = mouse.x - p.x; const dy = mouse.y - p.y; const distance = Math.sqrt(dx * dx + dy * dy); if (distance < particleInteractionRadius) { const proximityFactor = 1 - (distance / particleInteractionRadius); const baseHex = p.baseColor.substring(0, 7); const currentAlphaHex = p.baseColor.substring(7, 9) || '80'; const currentAlphaDec = parseInt(currentAlphaHex, 16); const targetAlphaDec = Math.min(255, Math.floor(currentAlphaDec + proximityFactor * 100)); p.drawColor = `${baseHex}${targetAlphaDec.toString(16).padStart(2, '0')}`; p.radius = p.baseRadius + proximityFactor * 1.5; const force = proximityFactor; const pushStrength = 0.4; p.x -= (dx / distance) * force * pushStrength; p.y -= (dy / distance) * force * pushStrength; } } ctx.fillStyle = p.drawColor; ctx.beginPath(); ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2); ctx.fill(); p.x += p.vx; p.y += p.vy; if (p.x < -p.radius) p.x = particleCanvas.width + p.radius; if (p.x > particleCanvas.width + p.radius) p.x = -p.radius; if (p.y < -p.radius) p.y = particleCanvas.height + p.radius; if (p.y > particleCanvas.height + p.radius) p.y = -p.radius; for (let j = i + 1; j < particles.length; j++) { const p2 = particles[j]; const dx = p.x - p2.x; const dy = p.y - p2.y; const distance = Math.sqrt(dx * dx + dy * dy); if (distance < particleLineThreshold) { ctx.strokeStyle = lineColor; ctx.lineWidth = 0.5 * (1 - distance / particleLineThreshold); ctx.beginPath(); ctx.moveTo(p.x, p.y); ctx.lineTo(p2.x, p2.y); ctx.stroke(); } } }); particleAnimationId = requestAnimationFrame(drawParticles); }
            const updateMousePosition = (event) => { if (!particleCanvas) return; const rect = particleCanvas.getBoundingClientRect(); const clientX = event.touches ? event.touches[0].clientX : event.clientX; const clientY = event.touches ? event.touches[0].clientY : event.clientY; mouse.x = clientX - rect.left; mouse.y = clientY - rect.top; };
            const resetMousePosition = () => { mouse.x = null; mouse.y = null; };

            // --- NEW JavaScript for About Page Features ---
            function setupTimelineToggle() {
                try {
                    timelineToggleButtons.forEach(button => {
                        button.addEventListener('click', () => {
                            const details = button.nextElementSibling;
                            const isExpanded = button.getAttribute('aria-expanded') === 'true';
                            if (details && details.classList.contains('timeline-details')) {
                                button.setAttribute('aria-expanded', !isExpanded);
                                details.classList.toggle('open');
                                button.textContent = isExpanded ? 'Show Details +' : 'Hide Details -';
                            }
                        });
                    });
                } catch (e) {
                    console.error("Error setting up timeline toggle:", e);
                }
            }

            function drawSkillCloud() {
                try {
                    // Check dependencies first
                    if (!checkLibrary('d3') || !d3.layout || !d3.layout.cloud) {
                        console.warn("D3 or D3 Cloud library not fully loaded. Skipping skill cloud draw.");
                        if(skillCloudContainer) skillCloudContainer.innerHTML = '<p class="text-center text-secondary-text dark:text-dark-secondary-text p-8">Skill cloud visualization requires D3.js libraries.</p>';
                        return;
                    }
                    if (!skillCloudContainer) {
                         console.warn("Skill cloud container element not found.");
                         return;
                    }

                    const skillsData = [ { text: "Python", size: 90 }, { text: "SQL", size: 70 }, { text: "Machine Learning", size: 95 }, { text: "Predictive Modeling", size: 85 }, { text: "Deep Learning", size: 75 }, { text: "Neural Networks", size: 70 }, { text: "TensorFlow", size: 60 }, { text: "Scikit-learn", size: 80 }, { text: "Pandas", size: 85 }, { text: "NumPy", size: 70 }, { text: "Data Wrangling", size: 88 }, { text: "Feature Engineering", size: 78 }, { text: "Data Visualization", size: 75 }, { text: "Matplotlib", size: 65 }, { text: "Seaborn", size: 65 }, { text: "Tableau", size: 50 }, { text: "API Integration", size: 60 }, { text: "Git", size: 70 }, { text: "System Admin", size: 55 }, { text: "Network Security", size: 60 }, { text: "Frappe/ERPNext", size: 50 }, { text: "Problem Solving", size: 92 }, { text: "Leadership", size: 70 }, { text: "Communication", size: 68 } ];
                    const containerWidth = skillCloudContainer.clientWidth;
                    const containerHeight = skillCloudContainer.clientHeight || 350;
                    if (containerWidth <= 0 || containerHeight <= 0) {
                        console.warn("Skill cloud container has no dimensions yet. Retrying shortly.");
                        // Retry after a short delay if dimensions aren't ready
                        clearTimeout(skillCloudResizeTimeout);
                        skillCloudResizeTimeout = setTimeout(drawSkillCloud, 100);
                        return;
                    }

                    const minFontSize = 12; const maxFontSize = Math.min(40, containerWidth / 15);
                    const isDark = document.documentElement.classList.contains('dark');
                    const twColors = tailwind.config.theme.extend.colors;
                    const lightColors = [twColors.accent, twColors['accent-secondary'], twColors['tertiary-light']];
                    const darkColors = [twColors['dark-accent'], twColors['dark-accent-secondary'], twColors['tertiary-dark']];
                    const colorScale = d3.scaleOrdinal(isDark ? darkColors : lightColors);

                    const layout = d3.layout.cloud()
                        .size([containerWidth, containerHeight])
                        .words(skillsData.map(d => ({ text: d.text, size: d.size })))
                        .padding(5)
                        .fontSize(d => minFontSize + (d.size / 100) * (maxFontSize - minFontSize))
                        .rotate(() => (Math.random() > 0.7 ? 0 : 0))
                        .font("JetBrains Mono, monospace")
                        .on("end", draw);

                    layout.start();

                    function draw(words) {
                        d3.select(skillCloudContainer).select("svg").remove();
                        const svg = d3.select(skillCloudContainer).append("svg")
                            .attr("width", layout.size()[0])
                            .attr("height", layout.size()[1])
                            .append("g")
                            .attr("transform", `translate(${layout.size()[0] / 2},${layout.size()[1] / 2})`);
                        svg.selectAll("text").data(words).enter().append("text")
                            .attr("class", "skill-tag")
                            .style("font-size", d => `${d.size}px`)
                            .style("font-family", "JetBrains Mono, monospace")
                            .style("fill", (d, i) => colorScale(i))
                            .attr("text-anchor", "middle")
                            .attr("transform", d => `translate(${[d.x, d.y]})rotate(${d.rotate})`)
                            .text(d => d.text);
                    }
                } catch (e) {
                    console.error("Error drawing skill cloud:", e);
                    if(skillCloudContainer) skillCloudContainer.innerHTML = '<p class="text-center text-red-500 p-8">Error loading skill cloud visualization.</p>';
                }
            }

            function animateCodeSnippet() {
                try {
                    if (!codeSnippetEl) return;
                    const codeToShow = `# Example: Patient Flow Optimization Logic\nimport pandas as pd\nfrom sklearn.ensemble import RandomForestRegressor\n\n# Load historical data\ndata = pd.read_csv('hospital_admissions.csv')\ndata['timestamp'] = pd.to_datetime(data['timestamp'])\n\n# Feature engineering\ndata['hour'] = data['timestamp'].dt.hour\ndata['dayofweek'] = data['timestamp'].dt.dayofweek\n\n# Define features (X) and target (y)\nfeatures = ['hour', 'dayofweek', 'previous_day_admissions']\ntarget = 'current_admissions'\nX = data[features]\ny = data[target]\n\n# Train model\nmodel = RandomForestRegressor(n_estimators=100, random_state=42)\nmodel.fit(X, y)\n\n# Predict\nfuture_data = pd.DataFrame({'hour': [10], 'dayofweek': [1], 'previous_day_admissions': [50]})\npredicted_admissions = model.predict(future_data)\n\nprint(f"Predicted admissions: {predicted_admissions[0]:.0f}")`.trim();
                    let i = 0; codeSnippetEl.textContent = ''; clearTimeout(codeTyperTimeout);
                    function typeChar() { if (i < codeToShow.length) { codeSnippetEl.textContent += codeToShow.charAt(i); i++; codeTyperTimeout = setTimeout(typeChar, 25); } } // Slightly slower typing
                    typeChar();
                } catch (e) {
                    console.error("Error animating code snippet:", e);
                }
            }

             function setupAccordion() {
                 try {
                     accordionButtons.forEach(button => {
                         button.addEventListener('click', () => {
                             const content = document.getElementById(button.getAttribute('aria-controls'));
                             if (!content) return;
                             const isExpanded = button.getAttribute('aria-expanded') === 'true';
                             button.setAttribute('aria-expanded', !isExpanded);
                             content.classList.toggle('open');
                         });
                     });
                 } catch (e) {
                    console.error("Error setting up accordion:", e);
                 }
             }

             function setupSparkleEffect() {
                 try {
                     if (!sparkleButton) return;
                     const container = sparkleButton.closest('.sparkle-container');
                     if (!container) return;
                     sparkleButton.addEventListener('click', () => {
                         const numSparkles = Math.floor(Math.random() * 6) + 5;
                         for (let i = 0; i < numSparkles; i++) {
                             const sparkle = document.createElement('div');
                             sparkle.classList.add('sparkle');
                             const angle = Math.random() * Math.PI * 2; const distance = Math.random() * 30 + 10;
                             sparkle.style.setProperty('--tx', `${Math.cos(angle) * distance}px`);
                             sparkle.style.setProperty('--ty', `${Math.sin(angle) * distance}px`);
                             container.appendChild(sparkle);
                             sparkle.addEventListener('animationend', () => { sparkle.remove(); });
                         }
                     });
                 } catch (e) {
                    console.error("Error setting up sparkle effect:", e);
                 }
             }


            // --- Event Listeners & Initialization Call (About Page) ---
            console.log("Setting up event listeners and initializing...");

            // Theme Toggle Button
            if (themeToggleButton) {
                themeToggleButton.addEventListener('click', () => {
                    const newTheme = htmlEl.classList.contains('dark') ? 'light' : 'dark';
                    setTheme(newTheme);
                });
            } else { console.warn("Theme toggle button not found."); }

            // Mobile Menu Button & Links
            if (mobileMenuButton) { mobileMenuButton.addEventListener('click', toggleMobileMenu); } else { console.warn("Mobile menu button not found."); }
            mobileNavLinks.forEach(link => { link.addEventListener('click', closeMobileMenu); });

            // Scroll Listener
            window.addEventListener('scroll', handleScroll, { passive: true });

            // --- Initialize All Features ---
            hidePreloader();
            setupWhatsAppLinks();
            setupToneJS();
            addSoundFeedback(); // Add listeners early, they check toneJsStarted internally
            setFooterYear();
            updateThemeUI(); // Set initial theme UI state
            setupScrollReveal();
            setupClipboardCopy();
            setupTiltEffect();
            setupBackToTop();

            // Particle initialization (needs canvas)
            if (particleCanvas) {
                initParticles(); // Start particle animation
                // Add particle listeners
                particleCanvas.addEventListener('mousemove', updateMousePosition);
                particleCanvas.addEventListener('touchmove', updateMousePosition, { passive: true });
                particleCanvas.addEventListener('mouseleave', resetMousePosition);
                particleCanvas.addEventListener('touchend', resetMousePosition);
                // Handle window resize for canvas
                let resizeTimeout;
                window.addEventListener('resize', () => {
                    clearTimeout(resizeTimeout);
                    resizeTimeout = setTimeout(() => {
                        console.log("Resizing canvas and skill cloud..."); // Debug log
                        initParticles();
                        drawSkillCloud(); // Redraw skill cloud on resize
                    }, 300); // Debounced resize
                });
                 // Handle visibility change
                 document.addEventListener('visibilitychange', () => {
                     if (!particleCanvas) return;
                     if (document.hidden) { if (particleAnimationId) { cancelAnimationFrame(particleAnimationId); particleAnimationId = null; } }
                     else { if (!particleAnimationId) { drawParticles(); } }
                 });
            } else { console.warn("Particle canvas element not found."); }


            // About Page Specific Inits
            setupTimelineToggle();
            if (skillCloudContainer) {
                // Initial draw might need a slight delay if container dimensions aren't ready immediately
                setTimeout(drawSkillCloud, 50);
            } else { console.warn("Skill cloud container element not found."); }
            animateCodeSnippet();
            setupAccordion();
            setupSparkleEffect();

            console.log("Initialization complete."); // Debug log

        }); // End DOMContentLoaded
    </script>

     </body>
</html>